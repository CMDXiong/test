消息记录（此消息记录为文本格式，不支持重新导入）

================================================================
消息分组:我的QQ群
================================================================
消息对象:版图编程技术交流
================================================================

2017-02-10 10:30:40 PM 系统消息(10000)
你已经是群成员了，和大家打个招呼吧！

2017-02-10 10:31:52 PM 郎量：183(47445613)
欢迎邓博士加入。CMD 为潘雄硕士，梅子为真名。

2017-02-10 10:47:36 PM 华丽🈴联(1816023692)
大家元宵快乐，新年进步！ [表情]我们共同努力，早日成功！[表情][表情][表情]

2017-02-11 1:08:46 AM CMD(1357211280)
[图片]

2017-02-11 7:27:53 PM 华丽🈴联(1816023692)
[图片]

2017-02-11 7:49:55 PM Sunny(1126859953)
欢迎欢迎[表情][表情][表情]

2017-02-11 8:46:57 PM 华丽🈴联(1816023692)
[表情][表情]我已经准备了上传了新代码，请试验GitLab提取。

2017-02-11 8:49:26 PM 系统消息(10000)
刘昕加入本群

2017-02-11 8:52:52 PM 郎量(47445613)
@梅子 @潘雄 github账号大家到自己邮件去取。明天下午2点~2点40大家到会议室开个会。 会议室3点有人占用。

2017-02-11 8:53:22 PM 郎量(47445613)
欢迎刘博士加入群[表情]

2017-02-11 8:53:58 PM 刘昕(2389021593)
大家好

2017-02-11 9:07:24 PM 潘雄(1357211280)
欢迎欢迎，多多关照[表情]

2017-02-11 9:12:44 PM 潘雄(1357211280)
好的@郎量 

2017-02-11 9:14:40 PM 梅子(1126859953)
好的

2017-02-11 9:15:02 PM 梅子(1126859953)
欢迎欢迎[表情][表情]

2017-02-12 6:10:57 PM 梅子(1126859953)
[图片]

2017-02-12 6:11:50 PM 梅子(1126859953)
是不是自己注册？@华丽联 

2017-02-12 6:12:18 PM 梅子(1126859953)
邓博士，我没有账号

2017-02-12 6:13:10 PM 梅子(1126859953)
@郎量 

2017-02-12 6:14:11 PM 梅子(1126859953)
老师，我注册了之后是这样

2017-02-12 6:14:12 PM 梅子(1126859953)
[图片]

2017-02-12 8:28:04 PM 华丽🈴联(1816023692)
@梅子  郎老师已经给你们都建立了账号的。我观察看到你们也在Project里面的。[图片]你用这个链接试一下？http: http://git.optixera.com/hdeng/optixera.gitssh: git@git.optixera.com:hdeng/optixera.git

2017-02-12 8:36:52 PM 华丽🈴联(1816023692)
@梅子 @潘雄  你们可能已经有上述文档，按步骤对着做应该不难的。如果需要我讲解的话，可以约个你们白天的时间，我比你们晚16小时。其它技术细节问题，也可随时留言或者约时间讲解。[表情][表情][表情][表情]

2017-02-12 8:45:19 PM 潘雄(1357211280)
好的，辛苦邓博士了[表情]

2017-02-12 8:45:27 PM 华丽🈴联(1816023692)
@梅子 [图片]看来你有两个账号，其中一个MeiZi 在项目里面（但是你没有用其登录），另外一个Sunny不在项目里面（用其登录所以看不到项目）。你希望保留哪一个账号？我可以确定加入项目。

2017-02-12 8:48:01 PM 梅子(1126859953)
好的，邓博士，那就用Sunny这个，第一个Meizi我没有登过

2017-02-12 8:48:27 PM 梅子(1126859953)
[表情]麻烦邓博士了

2017-02-12 8:49:45 PM 梅子(1126859953)
@华丽联 

2017-02-12 8:53:17 PM 华丽🈴联(1816023692)
@潘雄 @梅子 大家都辛苦了。不过可以保证你们会学到很多工业界很多实战技能，这些在学校里暂时学不到的。对你们今后发展会很有帮助的。[表情]  @梅子 已经将Sunny加入项目，请试验。

2017-02-12 8:54:48 PM 潘雄(1357211280)
哇，很期待。

2017-02-12 8:54:52 PM 潘雄(1357211280)
[图片]

2017-02-12 8:57:04 PM 梅子(1126859953)
好的[表情]

2017-02-12 8:57:11 PM 梅子(1126859953)
谢谢！

2017-02-12 11:22:10 PM 郎量(47445613)
@潘雄 @梅子建立的新的测试项目，可以任意修改下载和上传文件。   git@git.optixera.com:llang/TestProject.git

2017-02-12 11:24:55 PM 梅子(1126859953)
好的

2017-02-12 11:36:46 PM 潘雄(1357211280)
嗯，看到了

2017-02-13 6:00:57 PM 梅子(1126859953)
邓博士，您好！我安装过程中，出现以下界面时，需要密钥文件或者密码，我想请教一下，这两者指的是？

2017-02-13 6:01:00 PM 梅子(1126859953)
[图片]

2017-02-13 6:01:07 PM 梅子(1126859953)
@华丽联 

2017-02-13 6:14:13 PM 梅子(1126859953)
[图片]

2017-02-13 6:14:15 PM 梅子(1126859953)
[图片]

2017-02-13 6:17:44 PM 梅子(1126859953)
[图片]

2017-02-13 6:33:34 PM 郎量(47445613)
@梅子 ，你应该是输入password

2017-02-13 6:36:40 PM 梅子(1126859953)
好的，老师，我试一试

2017-02-13 6:37:52 PM 郎量(47445613)
@梅子 ，你已经进入web方式了。点击左边的Files（8.7MHz),可以看到文件和下载

2017-02-13 6:38:36 PM 梅子(1126859953)
[图片]

2017-02-13 6:38:40 PM 梅子(1126859953)
点了之后

2017-02-13 6:38:56 PM 梅子(1126859953)
又回到这个界面

2017-02-13 6:39:06 PM 梅子(1126859953)
[图片]

2017-02-13 6:40:22 PM 郎量(47445613)
你关闭浏览器，重新登录尝试一下。有时间，我下午进去看一下你是否有权限。

2017-02-13 6:40:43 PM 梅子(1126859953)
@郎量 好的，老师，我昨天试了可以下载文件

2017-02-13 6:40:49 PM 梅子(1126859953)
好

2017-02-13 6:44:27 PM 梅子(1126859953)
老师，可以了

2017-02-13 6:44:43 PM 梅子(1126859953)
@郎量 @华丽联 

2017-02-13 6:44:46 PM 梅子(1126859953)
解决了

2017-02-13 6:45:02 PM 梅子(1126859953)
[图片]

2017-02-13 6:45:14 PM 梅子(1126859953)
这个是我把密码输入错了

2017-02-13 6:46:05 PM 梅子(1126859953)
用这个可以登进去[表情]

2017-02-13 7:28:52 PM 潘雄(1357211280)
邓博士，如果可能，够具体解释一下GDSII中STRANS的作用？谢谢@华丽联 

2017-02-13 10:22:52 PM 华丽🈴联(1816023692)
@潘雄 [图片] GDS_II_Stream_Format_Manual_6.0_Feb87.pdf (Page 4-10). 主要是设置图形的镜像（Reflection，或称Mirror， Flip），放大（Magnification)，和旋转角度（Rotation Angle 或称 Turn Angle)。

2017-02-13 10:26:32 PM 潘雄(1357211280)
好的，[表情]

2017-02-13 10:30:29 PM 华丽🈴联(1816023692)
@潘雄 @梅子 我上传GDSII的参考资料打包如上面文件。有问题我可以告诉你们在哪个文档的第几页查找。@梅子@潘雄  你们的代码可以下载成功么？你们可以安装一个XMind，打开这个文件
注意Notes。这个文件对程序的思路明确直观些。编程时候的变量和函数命名也可以参考这个文件。

2017-02-13 10:39:56 PM 华丽🈴联(1816023692)
GDSII的基本结构如XMind文件所画，[图片]。主要要明白SREF和AREF是单次引用和阵列引用的关系。引用可以嵌套。简单的比喻就可以用  房间内各个元素-->房间-->楼层-->大厦 这样来理解，就非常简单了。版图文件的构层（Layer）和构元（Cell， Structure）是基本组成部分，一定要理解这两个定义才可以往下走。

2017-02-13 11:47:40 PM 梅子(1126859953)
好的，可以从网上成功下载您更新的程序代码，在我的电脑上运行，有点点问题，没有显示相应的图标，可能是图标路径设置方面有点问题，

2017-02-13 11:47:49 PM 梅子(1126859953)
@华丽联 

2017-02-13 11:48:31 PM 梅子(1126859953)
我再看看您修改的，然后把我的代码嵌入进去

2017-02-14 7:04:02 PM 郎量(47445613)
@梅子 @潘雄 下午3-4点左右碰个头

2017-02-14 7:11:19 PM 梅子(1126859953)
好的，收到

2017-02-14 7:20:31 PM 潘雄(1357211280)
没问题

2017-02-14 9:50:16 PM 华丽🈴联(1816023692)
@梅子 是的，这个路径设置的问题，我和郎老师讨论过。相对路径实际是都是针对build directory来的，而不是当前代码所在的路径。所有如果把Qt的build directory设置在Optimask平行，那么我们就一致了。另外，我把原来的Optimask7的7去掉了，以后我们也不加版本数字。通过GitLab我们自然可以控制好版本。[图片]我在代码中写了这些//QtCreater中的“./”这个路径是bulid directory的路径。//Qt资源的相对路径：必须在工程的qrc文件中增加你需要的文件或者资源，引用方法是：":/路径/你的资源.png"#ifdef RELEASE    const QString rsrcPath = "./Icon/";     //指定图标目录    //const QString rsrcPath = ":/Icon/";     //指定图标目录#else    const QString rsrcPath = "../Optimask/Icon";     //指定图标目录    //const QString rsrcPath = QCoreApplication::applicationDirPath() + "/Icon";    //const QString rsrcPath = QDir::currentPath()+ "/Icon";#endif其实是希望设置一个 RELEASE的变量，平时我们通过Qt编译时，RELEASE=0，如果=1表示正式发布独立运行。你可以试验一下。

2017-02-14 10:49:08 PM 华丽🈴联(1816023692)
【软件开发代码规范】2017-02-14良好的软件开发习惯和代码规范可以：便于团体协作开发，有效提高软件开发效率，增强软件代码质量，增强软件运行速度，提高软件的通用性可移植性，降低代码出错机率，去除冗余代码，减少软件维护时间和成本，等等。所以，这里大概总结几条代码规范建议，希望可以使我们的团队代码开发更有效率。1.	分类目录：软件代码按功能分类和分子目录，相同或相似功能的子程序文件放在同一目录下。单个程序文件尽量只包含相同目标的子函数。2.	注释说明：每个文件头，每个子程序头，每个函数头应该有简短的功能目的的说明注释。子函数内的关键部分（结构、算法、界面、变量等等）要有简短的描述。注释不需要长，而是应该言简意赅、简明扼要。3.	层次格式：代码希望层次分明、缩进整齐、格式统一，以便调试检错和扩展。4.	命名规范：变量和函数的命名尽量规范化。尽量使用有涵义的简短命名。规范、简短、有涵义、不重复、易区分、易查找、格式统一、尽量归类。同一类型的变量和函数使用类似的变量名字，命名可以加简短相同前缀（比如file****，layer****，cell****），以便于管理和查找。5.	精简扼要：冗余代码即刻删除！所有过时代码，如果希望今后继续参考，可以专门归总在某个目录或某个文件中。但是过时和冗余代码一定不要留在最终代码中。6.	速度效率：代码和算法尽量有效率，注意计算速度。能够用向量和矩阵处尽量用，能够用循环尽量用，减少单个变量和单个操作。任何低效的代码，一经循环调用，对程序的速度影响可以是毁灭性的。7.	用户体验：用户体验至上！降低软件使用所需要的学习时间，减少软件操作所需要的操作次数。比如设定目标“天下没有难做的版图！”，让入门门槛尽量降低。如果你自己都觉得怎样用不方便，那么用户更加会觉得不方便。有人说过，软件代码设计增加一次click会减少10%的用户。8.	检查优化：写完的程序代码一定要检查和优化，你会经常发现原来你可以做得更好，代码可以更规范更有效。尽量把程序当作文章来写，而不是散漫的代码，那么你就自然会该写的写，不该写的不写，该花功夫的地方花功夫，不该花功夫的地方不浪费。统一思路，我们一定可以做到最好！

2017-02-14 10:53:34 PM 华丽🈴联(1816023692)
以上是我的一些建议。大家有任何建议，我们可以一起改进。我们尽量统一一下思路，一定可以做到最好！[表情][表情][表情][表情]

2017-02-15 10:50:53 PM 华丽🈴联(1816023692)
软件需求介绍进阶。以后每周需要做的工作，我会加入该文档更新，然后说明第几点第几条是当前需要做的。目前的工作是：第一，    文档第 1a(i)（1～3），GDSII读入；第二，    3. 构层面板（Layer Panel）和构层配置（Layer Palette）可以每人负责一条分头进行。

2017-02-17 1:27:15 AM 梅子(1126859953)
[图片]

2017-02-17 1:27:44 AM 梅子(1126859953)
push的时候出现以上问题@郎量 @华丽联 

2017-02-17 9:34:57 PM 华丽🈴联(1816023692)
[图片]

2017-02-17 9:39:40 PM 华丽🈴联(1816023692)
@梅子 因为是同步合作，所以我们每个开发者建立各自的分支（Branch），进行上传下载。这样可以保证Master主干不会被误操作。请看SmartGIT使用笔记.doc •	第二部分SmartGit高级操作（项目分支管理） 起始第21页。

2017-02-17 9:41:06 PM 华丽🈴联(1816023692)
Master是主干。Developer只需保持在自己的Branch工作，定期发送Merge Reguest。Merge的工作可以由单个管理员来操作，以免混淆。11.	当对分支的代码满意后，或者定期，可以Merge（合并）该Branch（分支）的代码至Master（主干）上。

2017-02-17 9:49:19 PM 华丽🈴联(1816023692)
你点击SmartGit的“Log"图标动作，可以看到分支和主干是怎么样分合的。[图片]原来因为只有我一个人，所以主干和分支无所谓。现在多人合作，就需要各人工作在各自分支上。Master主干只是一个最后代码整合的步骤，会汇集各人代码，所以每个开发者不要commit和push到主干上。主干汇总的工作定期有管理员完成汇总。（你们熟悉了之后，也可以试验管理员的工作。）每个开发员的分支需要及时或定期与Master主干同步。

2017-02-17 11:51:35 PM 梅子(1126859953)
[图片]

2017-02-17 11:51:54 PM 梅子(1126859953)
@华丽联 我改成合并申请

2017-02-17 11:52:52 PM 梅子(1126859953)
也按照您写的操作文档建立了分支

2017-02-17 11:53:12 PM 梅子(1126859953)
这样可以看到申请吗？

2017-02-18 12:50:02 PM 华丽🈴联(1816023692)
@梅子 你的确认（Commit）选中是Local Branch（本地分支）的确认。是在你确认本地的修改后。此时远程对应的Remote Branch还暂时处于未更新的状态。此时你的Merge（合并）Request（申请）也是对你本地（Local）的分支（Branch）和主干（Master)的合并，之后你的主干（Local Master)会变得和你的分支（Local Branch)同步。但是远程(Remote)的分支(Branch)和主干(Master)还是处于未更新状态。如果在你确定本地(Local)的修改足够多（好）之后，希望提交到远程(Remote)，首先你需要有远程分支（你还需要建立远程的dev_meizi）。[图片]点击上图的New branch操作，建立[图片]我留给你自己去建立。之后你必须选中提交 推送（Push）。当对远程的Push完成之后，远程的个人分支（Remote Branch）会与你本地分支（Local Branch）同步，但是远程主干（Remote Master）还是处于未更新的状态。然后，当你觉得修改足够多（好）之后，希望进入远程主干（Remote Master）汇总，这时你需要在远程你自己的分支上点击”Merge Request)。下图显示的是我的个人分支，你需要按上面步骤先建立好个人分支之后，在自己的个人分支里面点击”Merge Request)。[图片]然后填入出来的表格，将 Assignee 分配给我（Henghua Deng），由我来比较汇总。Submit merge request即可。总结陈词：注意理解本地（Local）和远程（Remote），分支（Branch）和主干（Master）。所以一共有四个概念：Local Branch， Local Master，Remote Branch， Remote Master 。 通常每个人大部分时间工作在本地分支Local Branch，远程分支Remote Branch主要是个人备份用，最后的远程主干Remote Master是我们所有人的最终参考点。个人需要及时从Remote Master远程主干同步到本地主干Local Master，因为可能会有别人的代码定期进入Remote Master远程主干了，个人就必须需要与他人同步，此时本地分支Local Branch需要从本地主干Local Master同步。

2017-02-18 4:30:10 PM 华丽🈴联(1816023692)
我现在看到你们在测试，方向是对的。[图片]

2017-02-18 4:35:43 PM 华丽🈴联(1816023692)
建议你们将build的目录设置为跟Optimask目录平行！1. 首先，见图：我们不需要将Build的文件送入代码库。Build都是在每个人各自的电脑上，因为根据系统版本等可能都不相同。上传Build的文件没有什么意义。2. 其次，这样我们的代码关于目录的设置就是一样的。我们不需要每个人都来改动代码中指定的目录路径。[图片]

2017-02-18 4:45:45 PM 郎量(47445613)
@梅子 我按照邓博士的试了一下。已经把你的程序上传到我新建的分支了。 你自己再尝试上传一下。大致过程如下： 1）本地和远程都建一个相同名字的分支。2）把本地的自己的分支设置为活动状态 3）本地分支 commit  4) push    然后你在ｗｅｂ登陆上午查看一下，应该已经发生变化了。

2017-02-18 4:47:30 PM 郎量(47445613)
＠潘熊，你把ＧＤＳｉｉ的所有子结构都列出来，不清楚如何画或者理解的子结构，请邓博士写个说明。

2017-02-18 5:24:14 PM 潘雄(1357211280)
GDSII中的element有BOUNDARY, PATH, SREF,BOX,AREF,TEXT,NODE.不太理解 其中的BOUNDARY,AREF,NODE.同时其中的还有BOXTYPE,TEXTTYPE,NODETYPE，这些类型的不同数代表什么。

2017-02-18 5:24:25 PM 潘雄(1357211280)
@华丽联 

2017-02-18 5:26:47 PM 潘雄(1357211280)
[图片]比如说TEXTTYPE,这里只说了其值是0到63

2017-02-18 5:28:18 PM 潘雄(1357211280)
[图片]这里的NODE是什么？

2017-02-18 5:29:36 PM 潘雄(1357211280)
[图片]SREF还可以想象，但是这里的AREF想象不到是什么？

2017-02-18 6:12:43 PM 潘雄(1357211280)
[图片]这个解释的还是不太理解什么是plex

2017-02-18 6:30:34 PM 潘雄(1357211280)
[图片]这个是啥意思？

2017-02-18 7:04:40 PM 华丽🈴联(1816023692)
@潘雄 Boundary其实就是Polygon, AREF就是Array Reference（阵列引用）。Node我们很少用，主要是电子线路的节点，我们可以先不用管Node。

2017-02-18 7:05:52 PM 潘雄(1357211280)
什么叫阵列引用？

2017-02-18 7:12:21 PM 华丽🈴联(1816023692)
AREF就是Array Reference（阵列引用）：就是调用一个构元，但是它们是规则排列成N*M矩阵格式，那么只需要将坐标差值（dX,dY）和重复数目（Nx, Ny）说出来就可以。不需要单独使用N*M次单次引用。

2017-02-18 7:13:09 PM 华丽🈴联(1816023692)
AREF就是Array Reference（阵列引用）：就是调用一个构元，但是它们是规则排列成Nx*Ny矩阵格式，那么只需要将坐标差值（dX,dY）和重复数目（Nx, Ny）说出来就可以。不需要单独使用Nx*Ny次单次引用。

2017-02-18 7:15:25 PM 潘雄(1357211280)
懂了。

2017-02-18 7:18:22 PM 梅子(1126859953)
这样应该提交成功了吧@华丽联 @郎量 

2017-02-18 7:18:25 PM 梅子(1126859953)
[图片]

2017-02-18 7:19:19 PM 华丽🈴联(1816023692)
@潘雄 你现在不可能每个元素都懂，也不要到大部分时间在文件细节上，主要需要明白GDSII文件的基本框架和思路，能够从日本人或者Klayout等程序中抽取相应算法就可以。我们可以借用很多子程序，因为这些算法都是标准的。

2017-02-18 7:21:53 PM 潘雄(1357211280)
这个我也知道，看着看着就想弄懂

2017-02-18 7:23:09 PM 潘雄(1357211280)
有什么不看懂，完全就不知道程序做什么用

2017-02-18 7:26:23 PM 华丽🈴联(1816023692)
@梅子 [表情]很好，我应该是看到你的提交了。[图片]有问题我会问你。@潘雄  [表情]很好，这个态度是正确治学态度。我也经常这样。但是一定要注意时间和优先级的安排，如果做得太细但影响总体进度，那么可以适当调整一下。先从主体框架着手，从主干顺藤摸瓜，会最有效。请一定先看明白我的GDSII介绍Word文档和Xmind展示。

2017-02-18 7:29:01 PM 梅子(1126859953)
好的

2017-02-18 7:30:54 PM 潘雄(1357211280)
[图片]

2017-02-18 7:32:06 PM 华丽🈴联(1816023692)
@梅子 你继续在你的Local Branch上改进程序。我其实也需要时间来确保我们的同步是正确的，之前都是我自己一个人同步。@梅子 @潘雄 有问题我会继续问你。看来我也需要也表情包[表情]

2017-02-18 7:32:57 PM 梅子(1126859953)
[图片]

2017-02-20 9:46:50 PM 华丽🈴联(1816023692)
@梅子 你的新代码我在GitLab接受了Merge Request，并且已经同步到我的本地分支。正在查看，如果我有修改(应该只是小改动而已)，我会Push到远程主干，之后你可以再次与我同步。你可以继续扩展你的代码，我们的同步工作没有冲突（GitLab就是为了解决这个需求而做的）。目前你可以将整个程序画各种简单图形的代码嵌入，并且自己测试。希望每个图形的坐标数组（X,Y)n可以被存储和读取，先不用管存储的格式。这些子程序应该集中在/Draw/目录下。你可以参阅易发送的XMind文件[图片]先完成几个简单图形即可，复杂图形，我们慢慢添加。

2017-02-20 10:01:00 PM 华丽🈴联(1816023692)
另外，可否代码中统一一下：1. 缩进始终用4个空格，2. 函数后括号与函数不用空格: 即，用 function( ) , 不用function ( ) . 3. 函数类型不需单独一行？比如 void 不用单独占一行。当然这些不是什么问题，不过我这边搜索和检查的时候容易些。（现在已有的代码，你们也不需要去改，只是新代码从现在开始统一一下可能今后方便些。）还有， 4. 每个子函数开始前简短注释一下其主要功能和目的，我会更容易理解你们的思路。谢谢啦。。。

2017-02-20 10:44:28 PM 华丽🈴联(1816023692)
@梅子 我已经更新远程主干Remote Master，程序代码核心没有改动，稍微有些以上格式的变动。你试验一下，从更新的远程主干Remote Master去Pull（提取）更新的代码，[图片]这时应该是更新你本地主干Local Master，使之与远程主干Remote Master一致。然后再在SmartGit中同步到自己的本地分支Local Branch，在本地分支上继续开发。

2017-02-20 11:01:10 PM 华丽🈴联(1816023692)
@潘雄 GDSII读写有问题么？我看了日本人的代码，好像他主要在一个文件里面实现大部分基本功能。[图片]这个文件gdsView.cpp一共有八千多行代码。KLayout文件数目多些，是[图片]

2017-02-20 11:11:31 PM 潘雄(1357211280)
[图片]

2017-02-20 11:12:31 PM 潘雄(1357211280)
上面两个文件是读的基础，后面两个文件是画和显示

2017-02-20 11:14:24 PM 潘雄(1357211280)
对日本的这个思想已经有一点思路了，但是现在还在研究他的细节

2017-02-20 11:17:31 PM 潘雄(1357211280)
[图片]这个gdsView关于画的部分函数。

2017-02-21 12:14:08 AM 梅子(1126859953)
是不是这样就同步了@华丽联 [图片]

2017-02-21 2:10:44 AM 潘雄(1357211280)
邓博士，在GDSII中如果利用一个构元坐标点中的maxx ，minx，maxy +，miny得出下面一个点的坐标，有什么意义？[图片]

2017-02-21 7:33:00 PM 郎量(47445613)
@梅子 @潘雄 下午3点左右开个会

2017-02-21 7:34:08 PM 潘雄(1357211280)
[表情]

2017-02-21 7:38:32 PM 郎量(47445613)
@潘雄 通知一下梅子

2017-02-21 7:39:42 PM 潘雄(1357211280)
好的。

2017-02-21 9:38:55 PM 华丽🈴联(1816023692)
@梅子 [图片]注意你的显示 Master 1>  <2 origin，Master 1> 这里表示你的Local Master比你的Local Branch （dev_meizi）高一个版本（多一次提交Commit）；<2 origin 这里表示你的Local Master比Remote （Origin） Master要晚两个版本（少两次提交Commit）。你需要点击[图片]看到下面对话框[图片]然后“Merge to Working Tree”。来回试验几下。需要都是等于号，才表示所有的都同步[图片]。总结：本地的个人 Merge是在SmartGit里面，完全可以个人控制；而远程的Merge Request是在GitLab的远程Web内提交申请给管理员。同时注意多看[图片]。而且可以多看 文件差分对比。在远程Web里面也有自带的文件差分工具。

2017-02-21 9:47:58 PM 华丽🈴联(1816023692)
几个我常用的免费软件，很好用的。推荐给你们使用:1. PSpad文本编辑   http://www.pspad.com/en/，有二进制十进制十六进制编辑功能，有横排竖排（和分块拷贝）功能，以及很多超强功能。2. WinMerge文本文件比较差分工具   http://winmerge.org/  可以轻易检查出文件不同版本的修改3. FreeFileSync 文件和目录同步工具   http://www.freefilesync.org          很方便比较目录内所有文件是否有更新，并且可以实现同步。4. FreeCommander XE  文件操作工具 http://freecommander.com/   可以批量文件操作，比如批量改名，等等。我通常会用FreeFileSync比较你们和我的版本的区别，然后 用WinMerge比较具体代码修改，用PSPad进行代码编辑。如果你们使用这些工具，可能我们会更容易同步些。

2017-02-21 9:57:30 PM 华丽🈴联(1816023692)
@潘雄 对的，日本人的代码主要是两块，    1. gdsView.cpp应该是基本的GDSII图形和文件的操作。在我们的程序中，对应Import/Export-->GDSII, 以及Draw和Alter目录下大部分操作。    2. GDShcy.cpp 名字应该GDS Hierarchy的意思，即Cell Structure Tree，表示构元及其组成部分之间的引用和从属关系。在我们的程序中，这些功能需要在CellDock中操作实现，或者说Cell目录。

2017-02-21 10:07:06 PM 华丽🈴联(1816023692)
关于这个问题，“在GDSII中如果利用一个构元坐标点中的maxx ，minx，maxy +，miny得出下面一个点的坐标，有什么意义？”[图片]一个构元（复杂或简单。有引用或者无引用）可能有很多元素和图形，在进行很多布尔、变形、转换等等运算的时候，往往需要先找到该构元整体的边界和中心（或者基本点），先通过其框架的坐标与其他构元的框架进行运算，然后可以确定参与运算的构元之间的位置关系。可以减少很多不必要的运算。包括在调用构元是也必须指定其引用所需的位置。所以在构元中，边框（Frame， Outline）和基准点（Origin）都是基本的重要参数。

2017-02-21 10:18:15 PM 华丽🈴联(1816023692)
@潘雄 @梅子 你们在学习和开发的过程中，如果能够及时简明扼要地把发现、心得、理解、分析等记录到电子文档中，可以更好地和团队进行沟通和交流，并且可以帮助团队其他成员更好的理解和进步。并且也可以防止日久月长自己忘记掉。（你们可以拷屏分享到\optixera\optimask\doc目录）比如我给你们送过的一些文档，GDSII格式研究.docx， SmartGIT使用笔记.doc， VS2010和Qt笔记.docx，等等，我自己都是需要常常回来参考。培养良好的笔记和文档记录也是科研开发很重要的技能之一。我曾经跟一些很聪明的研究者合作开发产品，因为他们的文档和沟通问题，导致研发成本大幅上升，结果他们自己脑袋里的好思想和设计没有办法最后变成团队可以顺利开发的物美价廉的好产品，公司最后不得不挥泪斩马谡砍掉他们的项目。

2017-02-22 12:08:43 AM 潘雄(1357211280)
[图片]

2017-02-22 12:08:48 AM 潘雄(1357211280)
这个是7种需要画的

2017-02-22 12:09:44 AM 潘雄(1357211280)
这个是需要借鉴的四个文件

2017-02-22 12:09:46 AM 系统消息(10000)
[图片] 潘雄 分享文件 16:09:45
"gds (2).rar" 下载

2017-02-22 5:39:03 PM 郎量(47445613)
@梅子 ，给你发了邮件。

2017-02-22 5:39:38 PM 梅子(1126859953)
好的，已收到。

2017-02-22 5:43:07 PM 郎量(47445613)
@华丽联 ，Boundary，path, SREF，AREF，text, Node 这六种结构更详细的介绍文档吗？

2017-02-22 9:23:02 PM 华丽🈴联(1816023692)
@郎量 @潘雄 1. Boundary 实际就是任何Polygon，多边形。将是我们最常见的元素。2. Path实际上是有线宽的线。3. Box就是正常矩形。通常定义只需对角两顶点，所以各边跟坐标轴平行。（有旋转的矩形，需要用Polygon来表示）。4. SREF就是Structure Reference，对某个Structure（或者叫Cell）的单独引用。5. AREF就是对某个Structure（或者叫Cell）的阵列引用。AREF就是Array Reference（阵列引用）：就是调用一个构元，但是它们是规则排列成Nx*Ny矩阵格式，那么只需要将坐标差值（dX,dY）和重复数目（Nx, Ny）说出来就可以。不需要单独使用Nx*Ny次单次引用。6. Text，顾名思义，就是文字。实际上，由于文字字体甚多，GDSII并没有对字体的定义；所以往往光子学版图时，大多数还是通过Polygon来展示。7. Node节点，Node我们很少用，主要是电子线路的节点（焊点），我们在光子学版图里面可以先不用管Node。[图片]

2017-02-22 9:24:52 PM 华丽🈴联(1816023692)
参见“Klaas_Holwerda_Ch1_GDSII_format.pdf”[图片]基本元素。[图片]AREF被旋转。

2017-02-22 9:26:52 PM 华丽🈴联(1816023692)
@梅子 这个GUI界面设计的经验不错 
，可以看看。

2017-02-22 9:27:54 PM 华丽🈴联(1816023692)
上次发送的   \参考资料\   目录 压缩包，里面有很多好文档。建议有空看看。

2017-02-22 9:35:14 PM 华丽🈴联(1816023692)
此外，建议常查看我的 “Optimask_File_Format.xmind”文件，其中有很多针对每一个变量或者动作的注释（Notes）。

2017-02-22 9:47:24 PM 华丽🈴联(1816023692)
@潘雄 [图片] 这是Optimask_File_Format.xmind里面对GDSII格式的框架理解。

2017-02-22 9:54:46 PM 华丽🈴联(1816023692)
@潘雄 @郎量 我们可否 只 编写接口使用程序，来直接调用[图片]里面的子程序？这样我们可以先不用写GDSII文件操作的代码，而只需先将上面的代码复制到我们的\File\目录下，我们只需使用即可。等我们以后版本再重写或者优化，以避免版权问题。

2017-02-23 9:42:28 PM 郎量(47445613)
@华丽联 学生反映有难度。实现不了。

2017-02-23 9:42:59 PM 郎量(47445613)
@梅子 @潘雄 下午开会。时间可能会晚一点开始，到时候我通知大家

2017-02-23 10:17:45 PM 潘雄(1357211280)
上面两个文件，我已经用qt改的差不多了，只是有些函数的意义还没弄清楚。

2017-02-23 10:18:02 PM 潘雄(1357211280)
好的

2017-02-23 10:18:06 PM 潘雄(1357211280)
@郎量 

2017-02-23 10:19:44 PM 梅子(1126859953)
好的

2017-02-23 10:41:58 PM 潘雄(1357211280)
[图片]邓博士，你从这两个函数的名字可以看出这两个函数是在做什么吗？

2017-02-23 11:16:10 PM 华丽🈴联(1816023692)
@潘雄 感觉 BOOL CGDShcy::CalculateDimension() 就是计算Structure (Cell， 构元）的 尺寸，或者是引用/嵌套/调用（Reference， Instance）的深度？void CGDShcy::CalcDimensionRecurse是不断自循环查询 结构树的各层次的 各个结构 的尺寸 ？需要再仔细看看。

2017-02-23 11:19:52 PM 华丽🈴联(1816023692)
@潘雄 日本人的代码可能去除了注释。在你理解的情况下，可以尽量加入功能注释。我们一起完善，同时让程序可维护性更好。

2017-02-23 11:20:56 PM 潘雄(1357211280)
好，这个我会的。

2017-02-23 11:21:22 PM 华丽🈴联(1816023692)
[表情]

2017-02-23 11:22:24 PM 潘雄(1357211280)
CGDShcy::CalcDimensionRecurse(),当element是SREF,AREF是会递归调用CalcDimensionRecurse函数

2017-02-23 11:26:30 PM 华丽🈴联(1816023692)
对，Recurse应该翻译为递归。我都记不起来了[表情]CGDShcy类下的所有函数应该都是对 Structure (Cell， 构元）的操作。如果有SREF,AREF，经常需要进入这些子元里面去深入计算。

2017-02-24 1:40:30 AM 郎量(47445613)
@潘雄 @梅子 过来开会

2017-02-24 6:48:31 AM 潘雄(1357211280)
[图片]邓博士，这里的名字box,text在整个文件中是不是独一无二的？

2017-02-24 8:49:03 PM 华丽🈴联(1816023692)
@潘雄 是的，每个构元（Cell，Structure）有且只有一个独自的名字，不同构元之间是不可以用同一个名字的，整个GDSII文件一定不会有重名的构元（Cell，Structure）。上例因为只有两个构元，所以就简单方便的用其类型命名了。

2017-02-24 8:52:26 PM 华丽🈴联(1816023692)
有些软件甚至限制了构元（Cell，Structure）命名的最长字符数，即不超过32个字符。

2017-02-24 9:05:54 PM 华丽🈴联(1816023692)
@梅子 @潘雄 有没有新的Commit，我明天可以全天工作。

2017-02-24 9:07:54 PM 潘雄(1357211280)
明天可以commit一个。

2017-02-24 9:09:16 PM 华丽🈴联(1816023692)
好的，谢谢。不要怕同步出错，我们都有备份的。而且只有出错我们才能学习进步，真正理解。

2017-02-24 9:24:52 PM 华丽🈴联(1816023692)
远程比较，直接在GitLab网站内。[图片]本地比较，[图片][图片]

2017-02-24 9:37:57 PM 华丽🈴联(1816023692)
如果担心会出问题，可以本地做一备份。我通常在工作目录下，觉得没有问题才拷贝至本地Git目录，然后再通过SmartGit上传同步；反之亦然。

2017-02-24 10:19:44 PM 华丽🈴联(1816023692)
@梅子 好像你已经晚两个提交。我从网上试验发送给你合并申请。你比较一下，看是否可以接受同步。最好先备份你的代码更新，万一操作不成功不知道会不会将你本地的代码更新删除了。

2017-02-24 10:19:56 PM 华丽🈴联(1816023692)
[图片]

2017-02-25 5:26:59 PM 梅子(1126859953)
这个是我在本地试用这个软件的，写的代码还没有完成好，所以提交了但是没有申请合并[表情]@华丽联 

2017-02-25 5:32:57 PM 梅子(1126859953)
[图片]

2017-02-25 5:32:59 PM 梅子(1126859953)
[图片]

2017-02-25 5:33:37 PM 梅子(1126859953)
我想跟远程的同步，但是一直没有同步@华丽联 

2017-02-25 5:38:24 PM 梅子(1126859953)
当我在上面文件夹修改我的程序之后，我再执行pull和sync两个操作，发现我修改的地方还在，并没有被覆盖，是不是表示本地和远程没有同步成功

2017-02-25 6:48:26 PM 郎量(47445613)
@梅子，你的dev_meizi=origin, master1><2 origin,  是否说明本地的dev_meizi已经和github已经同步了。 但是本地的master并没有和远程的Master同步。我想应该是在smartgit下面切换到本地master（图片显示dev_meizi激活状态)，再Pull或者Syn? 试一下。   

2017-02-25 6:50:48 PM 梅子(1126859953)
[图片]

2017-02-25 6:51:16 PM 梅子(1126859953)
[图片]

2017-02-25 6:52:27 PM 梅子(1126859953)
我切换了，pull和sync出现问题，可能就是这个问题导致的@郎量 

2017-02-25 7:15:24 PM 系统消息(10000)
[图片] 潘雄 分享文件 11:15:25
"Optimask7_Add_Color_S_20170106.rar" 下载

2017-02-25 7:17:12 PM 潘雄(1357211280)
这个是我在老版本上做的实验，可以画出一个里面的test_file.sf文件，不过还有一些其它的问题

2017-02-25 7:20:46 PM 潘雄(1357211280)
@华丽联 @郎量 你们可以先看看这个

2017-02-25 7:41:18 PM 潘雄(1357211280)
数据的存储问题，我已经解决，接下来，我把代码的注释写上去，以及研究日本程序中是如何来画的。

2017-02-25 8:12:02 PM 华丽🈴联(1816023692)
@潘雄 好的，谢谢。我研究一下再反馈过来。@梅子  我们研究一下再给你反馈。

2017-02-25 10:23:06 PM 华丽🈴联(1816023692)
@梅子 你不要将Master目录设置成工作树（Working Tree)（黑体字状态）。否则你的修改就直接是修改了Master。如果同时其他开发者修改了Master，那么就有冲突了。所以通常是将个人的本地分支设置为工作树（Working Tree)。郎老师可以当面给你们解释一下。开发人员（你们）=======================================主分支master，只做pull操作在自己的开发分支 dev_xyz1. 将 master 分支上的修改 merge 到 dev_xyz 上2. 将本地修改 commit 到 dev_xyz 上3. 将本地 dev_xyz 分支 push 到 server上4. 合适的时候发送Merge Request。=======================================master管理员（和开发人员是反向的）（你们不用管下面这些操作）=======================================在开发分支 dev_xyz，只做pull操作在master分支1. 将 dev_xyz 分支上的修改 merge 到本地 master 分支上2. 将本地 master 分支 push 到 server上=======================================

2017-02-27 5:45:06 PM 潘雄(1357211280)
邓博士，两个问题第一：在SREF中的坐标指的是什么？第二：被引用的structure到指定的位置的偏移坐标是如何计算的？

2017-02-27 6:10:31 PM 郎量(47445613)
@华丽联 ，     Cell Structure 和 GDS文档中的 structure有和区别？ GDS文件中哪里有cell structure信息？

2017-02-27 6:12:35 PM 潘雄(1357211280)
同时邓博士您能提供一个含有有path,和不是box的boundary的.gds文件给我吗？

2017-02-27 8:29:50 PM 华丽🈴联(1816023692)
@潘雄 

 这是Path的例子。

2017-02-27 9:03:51 PM 华丽🈴联(1816023692)
@潘雄 可参考文档“GDSII格式研究.docx”第17页：[图片]其中的{box}和{text}是被引用的两个不同的基本构元（Cell，Structure）。它们自己的坐标数组此时是已经确定了的（[Xi, Yi],i=0,....,N-1）。不管怎么样，如果展现在二维坐标上，此二维坐标一定有一个确定的原点（0，0）。后面的【XY】就是引用时的位置偏移的位置，即引用时将被引用的构元的原点放置在此[X,Y]处，那么其他所有的点就实际上是同时都加这个偏移量。比如，一个Box的两个顶点为 [1,1] 和 [5,5]，那么它的坐标转化为Polygon（Boundary）即为 ([1,1], [1,5],[5,5],[5,1],[1,1])。如果Cell_Example 引用该Box时，将其【XY】定为【10，10】， 那么在Cell_Example中就会产生一个顶点的绝对坐标为[11,11] 和 [15,15]的Box，坐标转化为Polygon（Boundary）即为 ([11,11], [11,15],[15,15],[15,11],[11,11])。

2017-02-27 9:27:59 PM 华丽🈴联(1816023692)
@郎量 很多不同的软件对于GDSII定义的基本变量使用其他的名字。其实有很多名字是一一对应的关系。我在XMind和Word文件里，以及添加的代码注释行内，尽量将它们一起列出来。Cell = Structure （我们翻译为： 构元）Structure Tree = Cell HIERARCHY （结构树 = 构元组织 = 构元从属结构关系）Boundary = Polygon 多边形（但是GDSII有200点的限制，有些软件去除了这个限制）Path = Wire （有宽度）= LINE (AutoCAD: PLINE; ICED: WIRE) （有宽度）Instance = Reference （引用，调用）SREF = Cell Instance = Structure ReferenceAREF = Cell Array-Instance = Structure Array-Reference在显示和选取时：SHOW / HIDE = (in ICED software: UNBLANK / BLANK)PROTect / UNPROTect (ICED & L-Edit) = ( _SELectable / _UNSELectable )在做变换时：MOVE (=TRANSLATION, =SLIDE)ROTate (=TURN)MIRror (=FLIP, =REFLECT)SCALing (GROW / SHRINK) (=RESIZE, =DILATION)(A NOT B) = (Subtract: A-B)(B NOT A) = (Subtract: B-A)

2017-02-27 10:08:10 PM 潘雄(1357211280)
解释的好细，一看就懂了@华丽联 

2017-02-28 11:05:31 PM 潘雄(1357211280)
邓博士，请上传一个SREF,AREF的.gds文件我，做测试用。最好像上次的path.gds文件一样。简单明了。

2017-03-01 12:43:12 AM 刘昕(2389021593)
@CMD 请和 @华丽联 一起整理一个测试用gds文件列表吧，另外这些测试用文件如果方便的话也请提交在代码库里，方便将来使用

2017-03-01 1:27:18 AM 潘雄(1357211280)
好的，刘博士

2017-03-01 9:47:53 PM 华丽🈴联(1816023692)
@潘雄 


可以用L-Edit和KLayout分别打开参考。@梅子 同时该图显示多工作窗口的情况。[图片]

2017-03-02 7:19:28 AM 潘雄(1357211280)
[图片]邓博士，你给我的二进制文件里面只有5个box,[图片]而在文本文档里面里面不只有5个box感觉两个对不上

2017-03-02 7:25:41 AM 潘雄(1357211280)
[图片][图片]两者不匹配，这是怎么一回事

2017-03-02 6:06:09 PM 华丽🈴联(1816023692)
这个实际是对Instance=Reference（引用，调用）的理解问题。在此例中，1）。 box作为单独的构元，只有两个分别在不同层上（Layer #1，#2）的矩形元素，没有引用任何其他构元，让我们称其为基本构元（Basic Structure = Basic Cell）（这种定义在其他文献里面并没有，是我的理解和定义，方便理解和区分）。2）。 所有的SREF，AREF都是至少引用一个（经常会是多个）基本构元，所以让我们称其为复合构元（Complex/Compound/Composite Structure/Cell）。当SREF，AREF引用构成组件，比如box基本构元时，实际上SREF和AREF该复合构元里面不需要存储所有最后图形的所有点的坐标，而只需要记录引用的 基本构元名称（box），以及在哪些点放置该基本构元。你可以想象该Instance=Reference（引用，调用）为指针，或者说链接，文件存储只需要记录链接到哪。但是在图形显示的时候，需要分别计算所有坐标点来显示。

2017-03-02 6:08:35 PM 华丽🈴联(1816023692)
此外，注意看我昨天的图片。构元结构树，以及每个构元工作窗口的右上角的构元名称。你可以用L-Edit打开来加深理解。

2017-03-02 6:17:07 PM 华丽🈴联(1816023692)
参见我的文档“GDSII格式研究.docx”第17页来理解结构关系。

2017-03-02 6:19:05 PM 华丽🈴联(1816023692)
Instance.txt 第53至99行是AREF_Rotate结构，文件6x6引用被存储成了 四个3x3引用了。 可能是因为数组长度的原因。

2017-03-02 10:08:21 PM 华丽🈴联(1816023692)
Instance.tdb是用L-Edit设计的文件，然后Export为GDSII文件 Instance.gds 。但是L-Edit只能够有二进制GDSII格式输出。所以我又用KLayout打开该GDSII二进制文件，然后转存为GDSII文本格式 Instance.txt 。看来K-Layout的读取转化虽然没错，但是不是非常有效（比如将6x6阵列引用被存储成了 四个3x3阵列引用，虽然 6x6=4*(3x3) )。所以我又安装LinkCAD来转化 Instance.gds为 Instance.gds_txt，这个结果看起来好很多。


2017-03-02 10:17:05 PM 华丽🈴联(1816023692)
需要注意的是，GDSII二进制文档是有明确的行业格式标准的，所以所有软件一定支持GDSII二进制文件的读写。但是，GDSII文本格式，各个软件可能有不同的定义方法，比如KLayout、LinkCAD各自定义的GDSII文本格式，以及Klaas_Holwerda_Polygon_Boolean_Operations.pdf里面自己定义的KEY files (own made extended GDSII in ascii format)。所有的GDSII文本格式，方便辅助理解，但是没有通用的行业标准。这点在我的 “GDSII格式研究.docx”文档里面有简短说明：Part ３	GDSII KEY File（GDSII文本格式）有些软件版本支持所谓的KEY File，其实也是自定义文本解释格式。可能具体根据软件内部解释各有稍许不同，比如•	【Klaas_Holwerda_Polygon_Boolean_Operations.pdf 】KEY files (own made extended GDSII in ascii format)，但是无法被KLayout打开；•	LinkCAD写出的GDSII文本格式可以与KLayout通用；（实际上刚才测试互相都不通用）•	L-Edit只导入二进制GDSII格式，而不支持GDSII文本格式导入。

2017-03-02 10:19:51 PM 华丽🈴联(1816023692)
这是LinkCAD5软件，可以转化多种格式。以后可能会经常用到。建议安装后来使用体会（解压即可，无需安装）。

2017-03-02 10:46:13 PM 郎量(47445613)
@下午3:30左右开会

2017-03-02 10:46:47 PM 潘雄(1357211280)
好的。

2017-03-02 10:47:21 PM 梅子(1126859953)
好的

2017-03-04 5:39:02 AM 郎量(47445613)
@潘雄 我再远程代码库服务器帮你建立了dev_panxiong分支，你在本地建立一个dev_panxiong分支（branch)，然后可以把程序push 上去(到远程的dev_panxiong分支上去

2017-03-04 6:09:12 AM 潘雄(1357211280)


2017-03-04 2:39:50 PM 华丽🈴联(1816023692)
GitLib的Merge Conflict冲突应该可以解决了。平时请工作在个人分支上。等我全部理顺（以及同步）之后，会或者更新文档，或者通知大家。[表情]

2017-03-04 3:53:29 PM 华丽🈴联(1816023692)
@潘雄 可否将个人分支改名为dev_panxiong？网上和我这边读取目前都显示为panxiong。最好我们都格式统一一下。[表情]

2017-03-04 5:45:38 PM 梅子(1126859953)
好的[表情]

2017-03-04 10:14:30 PM 梅子(1126859953)
[图片]

2017-03-04 10:14:38 PM 梅子(1126859953)
[图片]

2017-03-04 10:18:19 PM 梅子(1126859953)
@郎量 @华丽联 如果郎老师和邓博士把我把远程远程代码库服务器分支dev_meizi改成dev_Meizi，我应该可以正常发送合并申请[表情]

2017-03-04 10:18:49 PM 梅子(1126859953)
我在以前分支上，会出现上面的错误

2017-03-04 10:41:31 PM 梅子(1126859953)
[图片]

2017-03-04 10:42:31 PM 梅子(1126859953)
已经解决了，并申请合并@华丽联 @郎量 

2017-03-04 10:42:54 PM 梅子(1126859953)
[图片]

2017-03-05 5:13:14 AM 郎量(47445613)
@潘雄 @梅子 明天上午碰个头，把这周任务明确一下

2017-03-05 5:14:22 AM 梅子(1126859953)
好的，收到！[表情]

2017-03-05 5:53:43 AM 潘雄(1357211280)
[图片]

2017-03-05 10:54:29 PM 华丽🈴联(1816023692)
@梅子 @潘雄 文档增加关于SmartGit合并Branch和Master的示例（Merge from Mater to dev_hdeng）。你们以后可参考。我明天查看比较你们的合并申请，然后将你们的分支合并到主干上。

2017-03-05 10:55:38 PM 华丽🈴联(1816023692)
第36页至41页：SmartGit合并Branch和Master的示例（Merge from Mater to dev_hdeng）。

2017-03-05 10:56:27 PM 梅子(1126859953)
[图片]

2017-03-06 12:01:32 AM 潘雄(1357211280)
好的

2017-03-06 9:18:03 PM 华丽🈴联(1816023692)
 这个快速入门手册不错。

2017-03-07 7:11:08 PM 潘雄(1357211280)
老师，上午您不在办公室？

2017-03-07 10:16:29 PM 华丽🈴联(1816023692)
@梅子 你的Merge Request没有可Merge的更新。[图片]如果  我的本地分支（已经与主干同步）的备份目录   ： 比较 ：    设置工作树为你的分支时本地目录的实际文件时，只有我本地的更新[图片][图片]  

2017-03-07 10:28:14 PM 华丽🈴联(1816023692)
@潘雄 你的Merge Request同样没有可Merge的更新。虽然你有517 changed files，是因为你是基于很老的版本修改。[图片]但是当我用FreeFileSyn来比较实在文件时，发现并没有新文件。所以你的更新应该已经在Master（主干）上了。[图片]

2017-03-07 10:42:04 PM 华丽🈴联(1816023692)
@梅子 @潘雄  请先（1）备份你的修改；（2）与Master（主干）同步；（3）Checkout你的个人分支；（4）工作在你的个人分支上，（5）进行相应修改和更新后，（6）重新提交Merge Request。关于怎么与Master（主干）同步（Merge from Mater to 你的个人分支），可以参考SmartGIT使用笔记.doc：SmartGit合并Branch和Master的示例（Merge from Mater to dev_hdeng），第36页至41页：SmartGit合并Branch和Master的示例（Merge from Mater to dev_hdeng）。昨天传的”SmartGit_quick-start-guide_2011.pdf“，第2章 Git-Concepts需要阅读和理解；因为版本比较老，第3章的一些Important Commands可以有些与现在版本不同。

2017-03-07 10:48:03 PM 华丽🈴联(1816023692)
@梅子 你的分支跟主干是同步的，所以只需要在你的本地分支上继续修改和更新就可以了。

2017-03-07 11:42:02 PM 梅子(1126859953)
[图片]

2017-03-07 11:42:09 PM 梅子(1126859953)
@华丽联 

2017-03-07 11:42:56 PM 梅子(1126859953)
邓博士，我按照您给的说明，已经重新合并申请了

2017-03-07 11:44:33 PM 梅子(1126859953)
只是这里面有合并冲突

2017-03-07 11:44:35 PM 梅子(1126859953)
[图片]

2017-03-07 11:44:51 PM 梅子(1126859953)
只是不是因为我上传了这些

2017-03-07 11:45:07 PM 梅子(1126859953)
[图片]

2017-03-08 9:19:02 PM 华丽🈴联(1816023692)
@梅子 我现在在看和解决冲突。但是，请将build-Optimask-Desktop_Qt_5_4_0_MinGW_32bit-Debug/ 目录 ignore （忽略），不要同步到GitLib，因为它们可能依赖于机器和软件版本，没有什么用，文件又特别多。而且请将\build目录设置为与\Optimask主目录平行（我已如此设置，这样我们设置相同），这样任何时候都不会影响\Optimask\目录与远程同步，而且同步需要的文件少得多。此外，我们源代码内的路径设置也便可一模一样，不需修改。[图片]

2017-03-08 9:20:42 PM 华丽🈴联(1816023692)
[图片]

2017-03-08 10:17:21 PM 华丽🈴联(1816023692)
这是冲突的地方[图片][图片]

2017-03-08 10:20:20 PM 系统消息(10000)
你撤回了一条消息

2017-03-08 10:22:47 PM 华丽🈴联(1816023692)
以后请将 “Optimask.pro.user” 文件也 ignore （忽略），不需要上传 .user 文件。否则因为我们机器和版本不一样，总会产生冲突。总而言之，只需要同步源代码，所有机器产生的文件都不需要上传。

2017-03-08 10:28:27 PM 华丽🈴联(1816023692)
此外，你将代码格式做得很整齐了，谢谢[表情]我在菜单命令缩进时，有意将从菜单代码缩进了，这样可以比较清楚看到菜单之间的从属关系，所以我的写法虽然违规了[表情]，但是还是特例保留这样吧。[图片]

2017-03-08 11:07:12 PM 潘雄(1357211280)
调整代码的格式，可以选中相应的代码，按下ctrl+i，这会自动帮你调整代码之间的距离

2017-03-08 11:14:21 PM 华丽🈴联(1816023692)
@潘雄 是的。我们都统一格式，交流合作也方便些。我用WinMerge也可方便解决。我等一下会提供今天的冲突解决笔记，你也可看看。@梅子 我已经解决合并冲突，已经合并成功了。我稍加改动（同时验证，往前走一个Commit。你再演习一下从Master同步到你的个人分支上去。

2017-03-08 11:25:55 PM 华丽🈴联(1816023692)
修改后再次上传，不要上传机器产生的文档！[图片]

2017-03-08 11:30:45 PM 华丽🈴联(1816023692)
第五部分  冲突解决实例 起始第42页。
SmartGIT使用笔记.doc逐渐扩充，结构有点乱了[表情] 。不过还是可以参考的。今天的解决过程从第42页开始。不过现在SmartGit已经同步工作基本没有问题了[表情]

2017-03-08 11:32:05 PM 华丽🈴联(1816023692)
@梅子 @潘雄  我已经解决合并冲突，已经合并成功了。我稍加改动编译通过（Master主干往前走一个Commit）。你再演习一下从Master同步到你的个人分支上去。

2017-03-08 11:39:59 PM 华丽🈴联(1816023692)
第五部分  冲突解决实例 起始第42页。文件有更新。现在应该完整了。

2017-03-08 11:49:12 PM 梅子(1126859953)
[ok]邓博士，辛苦了！我现在在编写代码，等我备份后，再从Master同步到我的个人分支上去@华丽联 

2017-03-09 5:08:12 PM 潘雄(1357211280)
邓博士，请问在gds中16.0用real4的如何来编码？

2017-03-09 5:15:11 PM 潘雄(1357211280)
或者说gds文件中，如何编码real4数据的。还有其指数部分的最大值是多少？正负63？

2017-03-09 6:56:18 PM 潘雄(1357211280)
16.0用real4形式编码是不是0x41000000？

2017-03-09 10:11:54 PM 郎量(47445613)
@梅子 @潘雄 ，今天开会稍微晚一点，4点半左右我来通知

2017-03-09 10:12:14 PM 潘雄(1357211280)
[图片]

2017-03-09 10:12:18 PM 梅子(1126859953)
好的，收到！

2017-03-09 10:23:29 PM 华丽🈴联(1816023692)
@潘雄 real4虽然很少用，但是几篇主要文档都有提到。1）. GDS_II_Stream_Format_Manual_6.0_Feb87.pdf 第三章 3-3页2）. Klaas_Holwerda_Ch1_GDSII_format.pdf 第4页，section 5.3）. Buchanan1996_GDSII_Stream_Format.pdfThe fifth data type is the "Four-Byte Real". The code is 0x04. This is the one that seems to have never been used, so I'll describe the eight byte real in a bit more detail.Basically though, the first bit is the sign (1 = negative), the next 7 bits are the exponent, you have to subtract 64 from this number to get the real value. The next three bytes are the mantissa, divide by 2^24 to get the denominator.value = (mantissa/(2^24)) * (16^(exponent-64))4byte real:SEEEEEEE MMMMMMMM MMMMMMMM MMMMMMMMS = Sign = 符号位，表示正负数。0为正数，1为负数。E = exponent=指数位，值为 * 16^｛EEEEEEE的二进制值要减去64｝mantissa=尾数，共24位，值为｛MMMMMMMM MMMMMMMM MMMMMMMM的二进制值｝/ 2^24实例：01000001 00011000 00000000 00000000 = 1.5  具体过程是这样计算的0 = 正数(1000001)二进制 = (65)十进制(00011000 00000000 00000000) 二进制 = (1572864) 十进制所以，代入计算公式为： (1572864/2^24)*16^(65-64) = 1.5http://www.binaryhexconverter.com/binary-to-decimal-converter 可以online转化二进制值。所以指数部分最大值为：(1111111)二进制 = (127)十进制，所以 *16^(127-64) = * 7.2370e+075尾数最大值为： (1111 1111 1111 1111 1111 1111)二进制 = (16777215)十进制，所以16777215 / 2^24 = 1所以16.0看来最好的表达方法为 + 1 * 16^(1) = +1 * 16^(65-64)，因此用4byte real表示为0(1000001) (1111 1111 1111 1111 1111 1111) = 16.0不过你应该可以直接调用日本人或者KLayout的代码吧，不需要直接去写计算代码吧，否则会很费时间啊。当你找到代码，复制过来后，可以将上面我们的实例作为注释（Comment）加到代码前面。

2017-03-09 10:27:37 PM 潘雄(1357211280)
日本人没有将浮点数转化成二进制的代码。我自己写的代码也快写好了这个函数的代码了

2017-03-09 10:29:07 PM 潘雄(1357211280)
因为16的整数倍的浮点数表示有点奇怪，所以要问问16的表示

2017-03-09 10:29:38 PM 潘雄(1357211280)
现在已经清楚了

2017-03-09 10:29:48 PM 潘雄(1357211280)
thanks@华丽联 

2017-03-09 10:36:48 PM 华丽🈴联(1816023692)
@潘雄 很好[表情] 那你看看你的代码计算是否结果与上同。同时注释加入这些计算过程，否则时间一长就忘了。不过还是尽量不要自己编这些基本算法的代码，应该大部分是有的，而且确实会很费时间。

2017-03-09 10:51:54 PM 潘雄(1357211280)
0(1000001) (1111 1111 1111 1111 1111 1111) = 16.0这应该不是精确的16.0吧

2017-03-09 11:28:20 PM 华丽🈴联(1816023692)
16 * 16777215 / 2^24  = 15.999999046325684

2017-03-09 11:29:29 PM 潘雄(1357211280)
没有16精确的表示法？

2017-03-09 11:30:27 PM 华丽🈴联(1816023692)
看来可以参照IEEE-754 Floating Point Conversionhttps://en.wikipedia.org/wiki/Single-precision_floating-point_format http://help.cognex.com/Content/KB_Topics/In-Sight/IONetwork/1791.htm 

2017-03-09 11:31:41 PM 潘雄(1357211280)
这个不能参照IEEE-754转换，因为这个是gds文件的特有的编码，与IEEE-754不同

2017-03-09 11:33:07 PM 华丽🈴联(1816023692)
应该是可以精确表示的。与IEEE-754同理 Integers in{\displaystyle [-16777216,16777216]}can be exactly represented。 只是指数位长度不一样。我们再找找方法。

2017-03-09 11:34:08 PM 潘雄(1357211280)
[图片]所以我在想这个1是不是既表示指数，也表示1.0，即1.0*16的1次方

2017-03-09 11:35:55 PM 潘雄(1357211280)
所以我猜想，在gds中16的表示方法是[图片]

2017-03-09 11:36:34 PM 潘雄(1357211280)
您帮我证实一下

2017-03-09 11:36:46 PM 华丽🈴联(1816023692)
看来Buchanan用的是近似方法。但是GDS_II_Stream_Format_Manual_6.0_Feb87.pdf 第三章 3-3页就比较复杂了。

2017-03-09 11:40:56 PM 华丽🈴联(1816023692)
[图片]

2017-03-09 11:41:51 PM 潘雄(1357211280)
这个好像也没有说明什么

2017-03-09 11:42:04 PM 潘雄(1357211280)
这里我也看过好几遍了，

2017-03-09 11:44:12 PM 潘雄(1357211280)
程序我先写着，忽略这个点，您证实了16的二进制表示 方法，我再去修改

2017-03-09 11:47:30 PM 华丽🈴联(1816023692)
这个表示尾数位是按照 1/2, 1/4, 1/8, 1/16 排的。那么我们应该可以这样算16.0 ： + 1 * 16^(2)  * 1/16= +1 * 16^(66-64) *1/16，因此用4byte real表示为0(1000010) (0001 0000 0000 0000 0000 0000) = 16.0其中 (0001 0000 0000 0000 0000 0000) 的1 在1/16位上。用Matlab计算验证 16^2 * 1048576/2^24 = 16 EXACT. DONE![表情]

2017-03-09 11:51:47 PM 潘雄(1357211280)
是的，

2017-03-09 11:52:43 PM 潘雄(1357211280)
(0001 0000 0000 0000 0000 0000) 左移8位就是16

2017-03-10 8:08:23 PM 华丽🈴联(1816023692)
@潘雄  Buchanan1996_GDSII_Stream_Format.pdf的公式    value = (mantissa/(2^24)) * (16^(exponent-64))如果通过移位算法，那么是对的。严格数学计算实际应该为  (mantissa/(2^24-1))  ，其中 -1是因为 1+2+4+8+....+2^(N-1) = 2^N - 1。不过，因为计算机是实际通过比特的移位来实现计算，所以本身就存在 -1/2^N 的误差。用Matlab验证为：当(1111 1111 1111 1111 1111 1111)二进制 = (16777215)十进制，16777215/(2^24-1) = 1 而 16777215/(2^24) = 0.999999940395355(0001 0000 0000 0000 0000 0000) 二进制 = (1048576)十进制，1048576/(2^24-1) = 0.0625000037252911048576/(2^24) = 0.062500000000000 = 1/16所以配合计算机移位算法，就用Buchanan这个公式value = (mantissa/(2^24)) * (16^(exponent-64))就可以了。你可以在代码里面注释上计算过程。此外，在代码里面，如果能够用移位算法，计算速度会快很多。建议考虑。当然，不希望花太多时间在细节运算上，先把程序框架搭起来更重要。先盖好房子，再去做装修。

2017-03-10 8:25:38 PM 潘雄(1357211280)
好的，这个转换函数已经写好，框架也有。就是在往里面填东西

2017-03-10 10:47:30 PM 华丽🈴联(1816023692)
@梅子  我将你的远程分支和Master又同步了。@梅子  @潘雄  我将远程的所有build目录的文件删除了。同时整理了一下，文件目录的统一，否则我们会需要修改本地资源的目录，非常不方便。请阅读下面文件第二页和第三页。关于更多工作安排，文档还在更新，之后会上传。


2017-03-10 10:52:07 PM 华丽🈴联(1816023692)
对于本地的备份，也可采取同样的目录路径设置。

2017-03-11 2:01:01 AM 郎量(47445613)
@梅子 , 周五开会忘记交代了，把周五的代码上传到服务器上去。  怕上传失败，我也会发一份给邓博士。

2017-03-11 2:05:09 AM 梅子(1126859953)
[图片]

2017-03-11 11:55:51 AM 华丽🈴联(1816023692)
@梅子 @潘雄 @郎量 郎老师发送的ZIP文档optimask-20170310m-Cell.zip，我已经同步在我的个人分支，然后合并在Master主干上。GDSII的读取，试了一个Instance.gds，看起来还不错。[表情][表情][表情][图片]

2017-03-11 11:59:26 AM 华丽🈴联(1816023692)
越来越发现Gitlib同步更有效，所以我们以后尽量减少zip文件传送。SmartGit传送（以及zip打包），请忽略（Ignore）所有的Build目录下的文件，以及所有机器自动产生的文件。且统一目录设置。具体请参考昨天传送的Optixera版图软件开发进阶.docx第2-3页。

2017-03-11 12:11:18 PM 华丽🈴联(1816023692)
@梅子 顺便将Master同步到你的dev_meizi了。如果有问题，你总是可以Reset到原来版本的，所以无须担心。[图片]关于Check-Out， Revert， and Reset，可参阅https://www.atlassian.com/git/tutorials/resetting-checking-out-and-reverting 

2017-03-11 4:11:14 PM 华丽🈴联(1816023692)
@潘雄 打开\optixera\optimask\src\File\GDSII_Test_File\410.gds有问题，可能是旋转移位等还不对。[图片]

2017-03-11 4:15:10 PM 华丽🈴联(1816023692)
@梅子 Optixera版图软件开发进阶.docx ， 3.	构层面板（Layer Panel）和构层配置（Layer Palette），Section3a中                                                   i.    构层组群(Layer Group)或类别(Category)或排序(Order)。这个可以方便用户对多层组织，比如上图的群A有Chip和Mark两层。当然用户可以不组群，此时用户也可以通过这一栏设定特定的值来进行排序。这里举个K-Layout参考示例，[图片]。对层群的操作需要传递到其从属的所有构层。这个功能，你用tablemodel是否可以实现？可能稍有难度，但是这个功能还是很有用的。

2017-03-11 4:26:40 PM 华丽🈴联(1816023692)
此外，我们短期需要做的工作还有：a。 完成所有工具条（图标可参考\optimask\src\Icon\actions，如果不够，可以利用Icon_Download_Sites.docx）
b。画图时自由移动鼠标自由绘图。c。 Undo/Redod。版图主视图区（需要允许多窗口）e。GDSII文件的存储。

2017-03-11 4:26:41 PM 梅子(1126859953)
[图片]

2017-03-11 4:26:50 PM 梅子(1126859953)
好的，通过您刚刚描述，我还不是很清楚具体要实现什么样的效果，我先看看klayout对应的功能，如果不懂，再问您@华丽联 

2017-03-11 4:30:18 PM 华丽🈴联(1816023692)
1. [图片]2. [图片]3. [图片]

2017-03-11 4:31:47 PM 华丽🈴联(1816023692)
@梅子 好的，有问题再问我。不确定是否与你的ｔａｂｌｅｍｏｄｅｌ兼容。但是希望能够ｃｏｍｂｉｎｅ这些功能。

2017-03-11 4:32:23 PM 梅子(1126859953)
好的[表情]

2017-03-11 4:34:07 PM 华丽🈴联(1816023692)
[表情]辛苦了。现在开始越来越多挑战性的工作了，这样我们才能提高[表情]。

2017-03-11 4:35:21 PM 华丽🈴联(1816023692)
我有事情先离开。祝你们周末愉快！

2017-03-11 10:41:24 PM 潘雄(1357211280)
好好学习

2017-03-12 6:19:32 PM 潘雄(1357211280)
邓博士，您把您那个实验的文件传上来，我修改一下程序

2017-03-12 6:38:44 PM 华丽🈴联(1816023692)
@潘雄 所有GDSII测试文件在\optimask\src\File\GDSII_Test_File 

2017-03-12 6:47:46 PM 潘雄(1357211280)
好的

2017-03-12 6:58:29 PM 华丽🈴联(1816023692)
估计你读取时可能没有注意旋转移位等等。

2017-03-12 10:31:03 PM 华丽🈴联(1816023692)
@郎量 请拉日本刘总入群[表情]

2017-03-12 11:00:41 PM 系统消息(10000)
[图片] 郎量 分享文件 14:00:41
"20170313-0413任务安排.docx" 下载

2017-03-12 11:00:59 PM 郎量(47445613)
@梅子 @潘雄 3月份任务分工见群文件

2017-03-12 11:01:48 PM 郎量(47445613)
@华丽联 ，已经邀请

2017-03-12 11:03:21 PM 系统消息(10000)
郎量邀请刘朝洪加入了本群

2017-03-12 11:08:25 PM 华丽🈴联(1816023692)
@郎量 基本可以。请每周更新Gitlab代码分支，我可及时反馈。

2017-03-12 11:09:43 PM 华丽🈴联(1816023692)
我稍微修改上传。谢谢。有问题请随时问[表情]。

2017-03-12 11:11:24 PM 华丽🈴联(1816023692)
[图片]

2017-03-12 11:14:23 PM 华丽🈴联(1816023692)
热烈欢迎刘朝洪先生，资深程序员暨软件开发项目经理。十几年编程经验，熟悉近十种编程语言。

2017-03-12 11:16:01 PM 潘雄(1357211280)
[图片]

2017-03-12 11:19:59 PM 系统消息(10000)
你撤回了一条消息

2017-03-12 11:20:42 PM 华丽🈴联(1816023692)
曾任软件开发公司系统开发程序员，框架师，经理，总监等要职，有丰富的电子，半导体，通讯，芯片等相关经验，现在日本大型证券公司开发平台骨干。大家有问题尽管咨询。[表情]

2017-03-12 11:22:48 PM 华丽🈴联(1816023692)
@吴竹 拜托多多指导，让我们更快更好更高地共同进步！

2017-03-12 11:25:05 PM 梅子(1126859953)
[图片]

2017-03-12 11:25:51 PM 梅子(1126859953)
欢迎欢迎[表情]

2017-03-12 11:28:37 PM 刘朝洪(99213820)
邓恒华，你这是给我打广告？

2017-03-12 11:29:07 PM 郎量(47445613)
@吴竹 ，群里应该如何称呼你？

2017-03-12 11:29:23 PM 刘朝洪(99213820)
吴竹就可以

2017-03-12 11:30:08 PM 刘朝洪(99213820)
反正这里面没有几个人，都知道谁是谁

2017-03-12 11:31:13 PM 郎量(47445613)
建议也称 刘导如何？ 吴竹不好记

2017-03-12 11:31:49 PM 华丽🈴联(1816023692)
刘导听起来不错[表情]

2017-03-12 11:32:18 PM 刘朝洪(99213820)
刘导，一听别人以为我是革命导师呢

2017-03-12 11:32:33 PM 刘朝洪(99213820)
岂不是跟马克思一个级别

2017-03-12 11:32:50 PM 潘雄(1357211280)
刘哥听起来也不错

2017-03-12 11:32:53 PM 潘雄(1357211280)
[图片]

2017-03-12 11:34:01 PM 刘朝洪(99213820)
刘哥听起来不错，我自己都感觉我年轻了

2017-03-12 11:34:20 PM 华丽🈴联(1816023692)
正式聘任刘导为我们的革命导师[表情]我先入梦去了。随时更新啊。[表情]

2017-03-12 11:34:26 PM 刘朝洪(99213820)
多叫几声都可以穿开裆裤了

2017-03-12 11:35:03 PM 潘雄(1357211280)
是吧，年轻活跃啊

2017-03-12 11:35:34 PM 潘雄(1357211280)
[表情]@华丽联 

2017-03-13 9:14:55 PM 华丽🈴联(1816023692)
需要加上标尺和测量功能。

2017-03-13 10:58:35 PM 华丽🈴联(1816023692)
@梅子 @潘雄 在刘导的帮助下，成功通过MSVC2015下的64位Qt编译。需要暂时改动一行代码。    在Optimask.cpp第1066行： return(1); // return Optimask::eventFilter(watched,event);所以再次更新主干（Master)，保证MSVC2015和MinGW，32位和64位都没有问题通过编译。以后我不再碰你们的个人分支，请定期自行与主干同步。[表情]

2017-03-13 11:03:09 PM 华丽🈴联(1816023692)
[图片]

2017-03-13 11:13:08 PM 梅子(1126859953)
好的[表情]@华丽联 

2017-03-14 10:04:35 PM 华丽🈴联(1816023692)
@潘雄 在阅读你的GDS2reader.h 和 GDS2reader.cpp。大致理解你的思路。总体感觉不错[表情]，希望继续完善[表情]有几点建议，主要是提高程序的可读性和可维护性（更多请参考【软件开发代码规范】）：1. 请简短在每个Class（类）或者子函数的前面加上基本功能注释。2. 每个Class（类）或者子函数的内部，如果顾名思义，或者一目了然，可以省略注释。但是比较复杂的功能，还请加上简短注释。3. 如果某个Class（类）或者子函数是从其他地方复制而来，请标记上出处（方便以后版权检查、质量提高、或代码重写）。（比如，在class CCoord ｛｝前面加上注释 //源自 K.Yuda \gds159\GDShcy.cpp然后在修改或者扩充的地方标注上你的名字X.Pan或者注释)

2017-03-14 10:10:42 PM 华丽🈴联(1816023692)
K.Yuda \gds159\GDShcy.cpp 代码中定义CCoord类时，使用很多inline 函数；在你的gdsreader.cpp (.h)中，你全部去掉inline。对于这些简短且大量调用的函数，好像是inline效率更高些。是不是还是用inline比较好，因为我们的程序计算速度非常重要。

2017-03-14 10:10:56 PM 华丽🈴联(1816023692)
[图片]

2017-03-14 10:53:35 PM 潘雄(1357211280)
在类体写的函数是默认为inline的不需要加inline

2017-03-14 10:54:23 PM 潘雄(1357211280)
当然加也是没有问题的。

2017-03-14 11:13:13 PM 华丽🈴联(1816023692)
好的，那么OK。好像这个CCoord和CiCoord类里面目前没有旋转(Rotate, Turn)的功能，需要考虑加上。用复数表示的点 P= ( x+j*y)  旋转确定的angle后的复数点为 ( x+j*y) *exp(j*angle)。其中exp（）为指数函数，j为虚数单位。

2017-03-14 11:16:04 PM 华丽🈴联(1816023692)
( x+j*y) *exp(j*angle)其中的angle单位为弧度，而非角度。

2017-03-14 11:18:55 PM 华丽🈴联(1816023692)
这个公式看起来简单，其实很重要。有些软件不知道使用该公式，所以一碰到旋转就不行了或者晕了。

2017-03-14 11:31:54 PM 潘雄(1357211280)
转转在其他的函数里面

2017-03-14 11:32:36 PM 潘雄(1357211280)
在画的函数里面，这两个文件仅仅只是提取数据

2017-03-15 12:07:39 AM 刘朝洪(99213820)
inline用不用关系不大，这个关键字只是暗示，现在编译器比较明智，就算你加了，如果代码比较多，也不会采用inline

2017-03-15 12:09:53 AM 刘朝洪(99213820)
恒华，我怎么感觉你的旋转比较复杂，怎么还需要用指数

2017-03-15 12:16:22 AM 刘朝洪(99213820)
不过我不了解版图里面的旋转跟三维或者二维图形的选择是否不同

2017-03-15 8:38:33 AM 华丽🈴联(1816023692)
指数用欧拉公式就简单对应为 exp(j*ang)=cos(ang)+j*sin(ang)，然后简单的两个复数乘积 ( x+j*y) *exp(j*ang)=( x+j*y) *[cos(ang)+j*sin(ang)] = [x*cos(ang)-y*sin(ang)]+j*[x*sin(ang)+y*cos(ang)]就简单对应为[X,Y]坐标值。我们用Matlab的版图编辑这个指数公式是最基本的，Matlab有exp( )运算。所以在C/C++编程下，我们可以选择编程自定义指数公式，或者用对应上述[X,Y]坐标变换。加一个指数函数的自定义比较好，以后写运算的时候非常直观。

2017-03-15 4:38:58 PM 刘朝洪(99213820)
复数的指数还具有这样的计算方式，有些像像四元数。最后那步我是很明白的，以前针对三维/二维图形旋转都采用矩阵，采用旋转矩阵转换欧拉角后就是最后一步

2017-03-15 4:45:44 PM 刘朝洪(99213820)
我回头看了一下四元数，你的那个指数的扩展方式就是四元数的二维版本

2017-03-15 5:57:02 PM 潘雄(1357211280)
几个我常用的免费软件，很好用的。推荐给你们使用:1. PSpad文本编辑   http://www.pspad.com/en/，有二进制十进制十六进制编辑功能，有横排竖排（和分块拷贝）功能，以及很多超强功能。2. WinMerge文本文件比较差分工具   http://winmerge.org/  可以轻易检查出文件不同版本的修改3. FreeFileSync 文件和目录同步工具   http://www.freefilesync.org          很方便比较目录内所有文件是否有更新，并且可以实现同步。4. FreeCommander XE  文件操作工具 http://freecommander.com/   可以批量文件操作，比如批量改名，等等。我通常会用FreeFileSync比较你们和我的版本的区别，然后 用WinMerge比较具体代码修改，用PSPad进行代码编辑。如果你们使用这些工具，可能我们会更容易同步些。

2017-03-15 5:59:37 PM 潘雄(1357211280)
邓博士，有没有能够比较两个二进制文件的软件

2017-03-15 6:01:48 PM 华丽🈴联(1816023692)
@吴竹 你的四元数更高级了，主要是三维图形的旋转。我们目前二维版图不需要，以后的三维计算建模一定会需要。四元數大量用於電腦繪圖（及相關的圖像分析）上表示三維物件的旋轉及方位。四元數亦見於控制論、信號處理、姿态控制、物理、軌道力學和生物信息学，[1][2] 都是用來表示旋轉和方位。相對於另兩種旋轉表示法（矩陣和歐拉角），四元數具有某些方面的優勢，如速度更快、提供平滑插值、有效避免萬向鎖問題、存儲空間較小等等 [3]。

2017-03-15 6:04:09 PM 华丽🈴联(1816023692)
@潘雄 WinMerge是可以比较二进制文件的。PSPad 本身也有文件比较功能。

2017-03-15 6:04:51 PM 潘雄(1357211280)
好，我看看

2017-03-15 6:09:22 PM 华丽🈴联(1816023692)
你提供两个比较相近的文件，我可试试看。如果文件相差太远，那么二进制比较可能意义不大。

2017-03-15 6:10:06 PM 系统消息(10000)
[图片] 潘雄 分享文件 09:10:05
"1.png.gds" 下载

2017-03-15 6:10:06 PM 系统消息(10000)
[图片] 潘雄 分享文件 09:10:06
"410.gds" 下载

2017-03-15 6:12:31 PM 华丽🈴联(1816023692)
[图片] WinMerge是可以的。

2017-03-15 6:13:35 PM 潘雄(1357211280)
好

2017-03-15 6:13:47 PM 潘雄(1357211280)
刚刚也下了WinMerge 

2017-03-15 11:17:05 PM 华丽🈴联(1816023692)
@潘雄 @吴竹 好像C++自带exp函数。 是否可以直接使用？std::exp(std::complex)http://en.cppreference.com/w/cpp/numeric/complex/exp 或者直接用CIS函数也行。https://en.wikipedia.org/wiki/Cis_(mathematics)cis is a less commonly used mathematical notation defined by cis(x) = cos(x) +isin(x), where cos is the cosine function, i is the imaginary unit and sin is thesine. The notation is less commonly used than Euler's formula， exp（i*x)， which offers an even shorter and more general notation for cos(x) + i sin(x). In information technology, the function sees dedicated support in various high-performance math libraries including C, C++。定义点为 P0=X+j*Y，那么旋转为P1=P0*exp(j*ang)，如果P0 和 P1都可以是复数矩阵（或者向量），那么我们后续的代码会简单有效得多。问题是，C++支持不定长度的复数矩阵（或者向量）怎么样？

2017-03-15 11:36:48 PM 华丽🈴联(1816023692)
刚刚查到，一定要用。http://en.cppreference.com/w/cpp/numeric/valarray/exp #include <iostream>#include <complex>#include <valarray>std::valarray is the class for representing and manipulating arrays of values. It supports element-wise mathematical operations and various forms of generalized subscript operators, slicing and indirect access.为什么需要这点？因为我们以后的版图代码会基于很多Matlab文件（自制，基于不定长度的复数矩阵），可以实现很多高级功能，来超越现有软件功能。

2017-03-15 11:52:20 PM 刘朝洪(99213820)
C++自带的都是可以使用的

2017-03-15 11:52:36 PM 刘朝洪(99213820)
exp不管是C还是C++都支持的

2017-03-15 11:56:36 PM 潘雄(1357211280)
是的，只要包含库就行。需要在坐标类中加上旋转点吗？@华丽联 

2017-03-16 1:23:22 AM 刘朝洪(99213820)
坐标类增加旋转的函数比较合适

2017-03-16 6:47:12 AM 潘雄(1357211280)
好，我按你们说的公式，把旋转加进去

2017-03-16 6:49:06 AM 潘雄(1357211280)
@华丽联 邓博士，在UNITS中，如果坐标是(100000,0)那他的真实坐标是什么？也就是说这个坐标该乘以哪个单位？

2017-03-16 6:49:54 AM 潘雄(1357211280)
Database Unit Or User Unit

2017-03-16 5:49:27 PM 郎量(47445613)
@潘雄 @梅子 下午2:30半开会

2017-03-16 5:50:28 PM 梅子(1126859953)
好的

2017-03-16 11:03:58 PM 华丽🈴联(1816023692)
@潘雄 
这个在我的文档“GDSII格式研究.docx”里面有详细说明。第6页和第12页。

2017-03-16 11:05:27 PM 华丽🈴联(1816023692)
[图片]

2017-03-16 11:07:32 PM 华丽🈴联(1816023692)
以上在第12页【XY】Record。至于【Units】在第6页：[图片]建议常参考此文档。

2017-03-16 11:11:02 PM 潘雄(1357211280)
看到了，时间太久，不太记得这里了。谢谢邓博士

2017-03-16 11:18:57 PM 华丽🈴联(1816023692)
还好，我自己还没有忘记，也差一点忘了[表情]。好的文档习惯可以避免很多重复劳动，提高效率啊。所以我几次强调程序文档和代码注释啊，好记性不如烂笔头[表情] 团队合作尽量考虑减少队员的重复劳动。程序的可读性，可移植性，可维护性也很重要。

2017-03-16 11:29:30 PM 华丽🈴联(1816023692)
@潘雄 @梅子 如果可以尽量每周六或之前更新一下你们的远程个人分支，我这里周六（夏令时滞后15小时）可以多花些时间整合，并且确保大体方向正确，或者提出建议反馈。可能整体效率会更好些。不过希望不影响你们正常周末的生活[表情]

2017-03-17 12:48:53 AM 梅子(1126859953)
@华丽联 好的，邓博士，我刚刚已经更新了远程分支，您查看一下[图片]

2017-03-17 12:51:34 AM 梅子(1126859953)
@华丽联 另外经过上次您和郎老师的讲解，我选择了我改动的文件上传，只是刚刚我不小心把一个不需要的文件也push上去了，可能有个冲突，麻烦您注意一下[表情]

2017-03-17 2:23:43 AM 潘雄(1357211280)
WinMerge比较二进制的文件好像不是很方便，比较二进制文件我用的UltraEdit软件 

2017-03-17 2:23:49 AM 潘雄(1357211280)
@华丽联 

2017-03-17 2:34:40 AM 潘雄(1357211280)
刘导，作为编程大哥，有没有什么好书给我们看看。

2017-03-17 2:34:45 AM 潘雄(1357211280)
@吴竹 

2017-03-17 2:34:51 AM 潘雄(1357211280)
[表情]

2017-03-17 5:38:08 AM 郎量(47445613)
@吴竹 ，  朝洪，如何实现标尺的显示？（标尺一直固定在左下角位置），它可以不随版图移动，但是会变化长度。

2017-03-17 5:38:19 AM 郎量(47445613)
[图片]

2017-03-17 5:44:53 AM 郎量(47445613)
@吴竹 ，可能你需要用klayout打开任意一个GDS版图文件体会一下。

2017-03-17 9:06:36 PM 华丽🈴联(1816023692)
@郎量 朝洪父亲需要就医，可能这两天需要照顾家事。我们稍等些许时间。@梅子 你的SmartGit使用基本没有问题。你合并请求已经通过，我稍后查看细节。如我有更新，你可再与Master同步。@潘雄 我看到你的合并申请有老版本Optimask7目录，新版本目录正在查看。可能需要比较确认一下。有空与梅子讨论一下Git的使用。

2017-03-17 9:21:01 PM 潘雄(1357211280)
我也看到了，可是删了，还是会出现，已经和梅子交流过，梅子也处理不了

2017-03-17 9:31:48 PM 华丽🈴联(1816023692)
我已经帮你解决，删除Optimask7目录。你需要： checkout你的本地目录-->PULL from remote-->delete the folder under your working tree (本地目录不需要的目录和文件，用资源管理器删除) -->在SmartGit下选中该删除的目录--> 然后点击SmartGit的Discard ， Delete ，Remove等菜单-->当Files栏目下所以该删除的目录的文件都显示为Removed的时候，全部选中，然后Commit-->Commit成功后进行PUSH（提交）至你个人本地目录。太多，我就不贴图了。

2017-03-17 9:36:30 PM 潘雄(1357211280)
[图片]

2017-03-17 9:40:26 PM 潘雄(1357211280)
邓博士，先不要合并我的，今天上午我优化了一下代码，将坐标类写成了模版类，减少了一定的代码量。

2017-03-17 9:41:13 PM 潘雄(1357211280)
以免邓博士做重复的工作

2017-03-17 9:41:24 PM 华丽🈴联(1816023692)
好的，正好你的分支比较难合并。好像有点问题。

2017-03-17 9:44:33 PM 华丽🈴联(1816023692)
你试着close你的合并申请，删除所以认为不需要的文件。更新新代码，然后重新申请合并。我的笔记有更新，还是看第三四五部分，虽然很乱[表情]

2017-03-17 9:45:46 PM 华丽🈴联(1816023692)
与Master先同步，然后加入你的更新，之后再申请合并。

2017-03-17 10:06:52 PM 华丽🈴联(1816023692)
@梅子 你的菜单工具条版本看着不错[表情] 不过应该还没有写全。从Alter开始之后的菜单还需要写，注意有些菜单下面有分菜单，它们的动作图标也需要加进工具条。

2017-03-17 10:09:55 PM 华丽🈴联(1816023692)
@梅子 @潘雄 当先后打开两个不同的文件时，Cell Structure是不可以混在一起的。每个CellDock对应唯一的一个GDS文件。如果需要区分，可以在每个CellDock的标题写上该GDS文件名字来区分。

2017-03-17 10:09:59 PM 梅子(1126859953)
好的，邓博士，只是有些菜单下面的分菜单功能不是很清楚，不知道加什么样的图标@华丽联 

2017-03-17 10:11:16 PM 华丽🈴联(1816023692)
没关系，你先按你的理解加，如果需要修改我会告诉你。 总体你理解得还不错[表情]

2017-03-17 10:13:43 PM 梅子(1126859953)
好的，那我先修改着，到时候您再看一下，如果有什么不对，您再指出来

2017-03-17 10:20:17 PM 华丽🈴联(1816023692)
没问题[表情] 至于打开不同文件时，意见如下图[图片]周末愉快啊[表情]

2017-03-17 10:24:27 PM 梅子(1126859953)
好的，那我再修改一下，也祝邓博士周末愉快！[表情]

2017-03-17 10:25:54 PM 华丽🈴联(1816023692)
1. Cell Structure的标题加上对应的文件名字，以便区分不同文件。2. 激活的Cell Structure对应激活的工作窗口。3. 最左上角的Optimask之后的位置，对应激活的工作窗口，总是加上显示该GDSII文件的完整目录和文件名字。当激活的工作窗口切换时，相对应的显示目录和文件名字必须同时对应切换。

2017-03-17 10:33:17 PM 梅子(1126859953)
好的[表情]@华丽联 

2017-03-18 10:14:40 AM 华丽🈴联(1816023692)
@潘雄 UltraEdit软件没有找到免费的，所以首选就是PSPad了，但是PSPad的TextDiff好像不太工作。你有UltraEdit的版本和密钥？

2017-03-18 10:33:08 AM 华丽🈴联(1816023692)
@梅子，你的Debug目录还是传上去了。[图片]请一定忽略（Ignore）该目录。http://www.syntevo.com/doc/display/SU/Ignore忽略之后你的Optimask目录下会有一个 .gitignore 文件，可以PSPad打开看。

2017-03-18 12:42:52 PM 华丽🈴联(1816023692)
@梅子 请先与Master同步。对optimask.h和optimask.cpp做了一些微小改动，如有疑虑可用WinMerge比较。比如，1. documentTabs 全部重命名为workTabs，以对应多窗口WorkSpace Windows。同理，接下来需要做的Cell Struture 和 LayerPanel的多窗口，可以命名为cellTabs和LayerTabs。关于Layer面板，只有Layer Panel需要多窗口，而Layer Color Palette 不需要多窗口，因为只是调色使用。2. class Optimask : public QMainWindow下的204行 int i 我改成 iTab。int iTab; //不建议类体或全局 int i， j (以免复数符号i,j混淆)。本地函数可用，全局使用建议指明特定用途，比如 iTab(多窗口)，搜索维护也容易些。代码中尽量使用独特的易搜索的变量名，已提高可搜索维护性。3. Window菜单和动作全部重命名为wndwMenu等，仅仅因为看起来与其它命名一致性。你可忽略。4. 空格和注释调整。你可忽略。在WinMerge中，可以Edit-->Options-->Compare-->General-->Ignore Spaces 这样比较时可以忽略空格修改。总体来说，你的代码质量不错[表情]

2017-03-18 1:38:42 PM 华丽🈴联(1816023692)
此外，这些工具条需要添加    QToolBar *cellToolBar;             //【构元(Cell)】工具条    QToolBar *LayerToolBar;            //【构层(Layer)】工具条    QToolBar *codeToolBar;             //【编程(Script), 代码(Code)】工具条    QToolBar *cnfgToolBar;             //【配置(Config)】, 设置(Setup)】工具条    QToolBar *toolToolBar;             //【工具(Tool)】工具条    QToolBar *wndwToolBar;             //【窗口(Window)】工具条    QToolBar *helpToolBar;             //【帮助(Help)】工具条

2017-03-18 7:24:32 PM 梅子(1126859953)
邓博士，好的[表情]@华丽联 

2017-03-19 6:55:19 PM 潘雄(1357211280)
邓博士，ultraedit我用的是30天的试用版！

2017-03-20 7:37:42 PM 潘雄(1357211280)
邓博士,需要了解AREF的三个坐标分别代表什么意思？我看一下这个，也没明白是什么意思，[图片]

2017-03-20 7:38:58 PM 潘雄(1357211280)
[图片]对照这个图，感觉也column Spacing的计算也有问题

2017-03-20 7:41:28 PM 潘雄(1357211280)
[图片]可以对着这个例子讲解三个坐标的关系 

2017-03-20 7:42:19 PM 潘雄(1357211280)
@华丽联 

2017-03-20 7:47:29 PM 潘雄(1357211280)
[图片]还是对着这个讲吧

2017-03-20 11:14:02 PM 华丽🈴联(1816023692)
@潘雄 应该是(Origin, dX, dY)。

2017-03-20 11:26:28 PM 华丽🈴联(1816023692)
@潘雄 抱歉需要外出开一天会，详细计算只有等回来后了。不过你可以使用L-Edit打开我发的Instance.tdb，然后在AREF_Rotate的构元下检查。Ctrl-E可以弹出对话坐标框检查具体坐标。Ctrl-Q可以用来测量相对/绝对位置。测量一下就知道了。你说的问题可能就是需要dX, dY， 或者 乘以或者 除以， sin(ang)或者 cos(ang)的关系。

2017-03-20 11:35:35 PM 华丽🈴联(1816023692)
[图片]

2017-03-20 11:55:22 PM 潘雄(1357211280)
好，我先做别的，您先忙自己的事

2017-03-22 10:39:43 PM 华丽🈴联(1816023692)
@潘雄 之前已经说过，GDS的文本格式其实都是自定义的。只有二进制是标准的。[图片]回顾历史记录，KLayout的存储有点问题（虽然没错）[图片]再回到Instance.gds(.txt)对应 这 “Instance.txt 第53至99行是AREF_Rotate结构，文件6x6引用被存储成了 四个3x3引用了”[图片]对比第一个3x3 AREF来计算[图片]你可以使用其它更特殊的情况来验证。（行列间距不等，行列重复数目不等，旋转非45度角）。我附上该Matlab函数如下。


2017-03-22 10:41:31 PM 华丽🈴联(1816023692)
@潘雄 请一定注意程序效率和通用性。请代码将此Intance.gds真正存为 6x6 而非Klayout的 4个3x3。

2017-03-22 10:44:24 PM 华丽🈴联(1816023692)
@潘雄 请一定注意程序效率和通用性。请代码将此Intance.gds真正存为 6x6 而非Klayout的 4个3x3。

2017-03-22 10:51:59 PM 华丽🈴联(1816023692)
@潘雄 你的例子来自“Klaas_Holwerda_Ch1_GDSII_format.pdf”，我认为他的描述并不准确。注意在阅读文档时要自己有辨别力，经常很多人理解有误或者有偏差的。准确的描述请见“GDS_II_Stream_Format_Manual_6.0_Feb87.pdf”第19页，[图片]

2017-03-22 10:56:11 PM 华丽🈴联(1816023692)
总结：问题确实是 需要dX, dY， 或者 乘以或者 除以， sin(ang)或者 cos(ang)的关系。见上面Matlab代码和欧拉格式的解释。

2017-03-22 11:19:06 PM 潘雄(1357211280)
好的，谢谢邓博士，我大概知道了！

2017-03-23 6:20:00 PM 郎量(47445613)
@梅子 @潘雄 下午2点半开会

2017-03-23 6:21:56 PM 潘雄(1357211280)
[表情]

2017-03-23 6:25:23 PM 梅子(1126859953)
[表情]

2017-03-24 1:26:38 AM 潘雄(1357211280)
邓博士，请给我一个阵列引用中的阵开引用的例子

2017-03-24 1:54:10 AM 梅子(1126859953)
[图片]@郎量 @华丽联  邓博士，我已经上传了这周工作进展，请查收。

2017-03-24 9:24:45 PM 华丽🈴联(1816023692)
@潘雄 Instance.gds就有阵列引用，构元AREF_Rotate就是阵列引用box后旋转的。我的说明和计算也是基于这个示例。

2017-03-24 9:26:34 PM 潘雄(1357211280)
您误解我的意思了，我是要引用的引用，您给的那个只是引用的

2017-03-24 9:26:40 PM 华丽🈴联(1816023692)
@梅子 好的，辛苦了。我查看完后给你反馈。谢谢了。

2017-03-24 9:27:53 PM 潘雄(1357211280)
梅子，你和我写的代码有冲突，只能运行，打开后，程序就崩溃了，不知道哪里出问题了@梅子 

2017-03-24 9:40:58 PM 华丽🈴联(1816023692)
@潘雄 新的测试样本[图片]

2017-03-24 9:42:06 PM 潘雄(1357211280)
对，就是这个意思

2017-03-24 9:52:25 PM 华丽🈴联(1816023692)
KLayout存储也还有问题，请在代码中更正。比如用L-Edit来import文件“Instance_AREF_AREF.gds”时，所有构元都显示在Design Navigator 上（也就是我们的Cell Structure)。但是用 KLayout打开时，有两个“AREF”和“AREF_Rotate"在Cells面板（也就是我们的Cell Structure)下的主树干是丢失了。

2017-03-24 9:53:59 PM 华丽🈴联(1816023692)
[图片]

2017-03-24 9:55:25 PM 潘雄(1357211280)
好，我知道了

2017-03-24 9:58:18 PM 华丽🈴联(1816023692)
@潘雄 @梅子 你们可以共同看一下这个问题。另外，请使用L-Edit进行简单的版图编辑和文件操作。你们会经常需要利用L-Edit建立简单测试文件来进行调试的。

2017-03-24 10:00:53 PM 系统消息(10000)
你撤回了一条消息

2017-03-24 10:01:27 PM 华丽🈴联(1816023692)
@潘雄 你现在SmartGit同步和上传还有问题么？如果你的文件和梅子有冲突，可以只将你的代码更新至你的远程个人分支，然后给我发送Merge Request。我可以看看冲突在哪，怎么解决。当然你和梅子可以解决冲突最好。

2017-03-24 10:11:15 PM 潘雄(1357211280)
同步，上传没有问题了，

2017-03-24 10:12:35 PM 潘雄(1357211280)
我先跟梅子讨论一下，在上传上去

2017-03-25 5:07:11 AM 潘雄(1357211280)
邓博士，最新的版本已经上传，已经融合了目前所有的代码。同时在坐标类中根据您提供的公式，也写了坐标的旋转函数。

2017-03-25 5:31:41 AM 潘雄(1357211280)
邓博士，文件的保存并没有发现问题，我用UtralEdit比较了，除了上面记录的时间数据不一样以外，其它的都一样，时间数据不一样我用固定的时间代替的，因为还不知道如何获取计算机的时间，同时因为时间这个数据不影响画图，所以用时间数据代替了。还有一点不一样就是，原文件的后面数据会补零。而我写的另存为功能没有补零。

2017-03-25 5:31:49 AM 潘雄(1357211280)
@华丽联 

2017-03-25 5:32:43 AM 潘雄(1357211280)
[图片]红色的是时间信息不同而已，其它的数据都一样

2017-03-25 5:33:53 AM 潘雄(1357211280)
[图片]

2017-03-25 3:10:01 PM 华丽🈴联(1816023692)
@梅子 @潘雄 我依次接受你们的合并申请了。这次看来不错，同步比较直接。[表情]我晚点仔细看一下更新，同时我本地也加了些文件，到时一起同步到远程主干上去。你们每周一再次工作之前，记得先与远程主干同步，即：先从远程主干（Remote Master， Origin）提取（Pull)，再Merge到你们各自的个人分支。基本合并流程是：（1）每周末我分别合并你们的分支至Master，（2）我检查并相应修改更新（对应并同步我的个人分支），然后同步至Master，（3）你们每周开始重新工作之前，需要与Master同步。（以确保我的反馈被考虑）如此循环。（你们也经常需要使用到那几个常用比较和同步软件。）现在看起来效率比原来提高不少了。谢谢！[表情]

2017-03-25 6:52:30 PM 梅子(1126859953)
好的，收到[表情]

2017-03-25 11:14:06 PM 华丽🈴联(1816023692)
1)      To Do 从3/11/2017开始一个月的工作安排a.      完成所有工具条（图标可参考\optimask\src\Icon\actions，如果不够，可以利用Icon_Download_Sites.docx）--> Half Doneb.      basic shapes and coordinates; 画图时自由移动鼠标自由绘图。--> Need to Do.c.      标尺，缩放。--> 有挑战。（刘朝洪确定方案。）d.      GDSII文件的正确读写和存储。--> 基本可读写，但是需要避免KLayout和日本人的代码错误。e.      Cell Structure的正确显示（层次结构，以及双击打开工作窗口）--> 完成。f.       版图主视图区（需要允许多窗口）--> WorkDock & CellDock OK。Layer Dock需要添加。g.      layer的正确读取，显示和操作。构层面板的排序和组合（Group）。-->排序OK 。但需要树形结构和TableModel的嵌套。（刘朝洪确定方案。）h.      Undo/Redo功能的实现 --> 还没有实现。有挑战。必须用堆栈(或List?)实现，多层(2^N, N=?)。可以参考KLayout和日本人的代码。（刘朝洪确定方案。）

2017-03-25 11:16:11 PM 华丽🈴联(1816023692)
@梅子 @潘雄 上面是郎老师的总结进展。我还没有来得及仔细研究你们的代码，明天再做。你们先愉快地过周日吧[表情]

2017-03-26 6:11:31 PM 华丽🈴联(1816023692)
@梅子 @潘雄 Master已经更新，请与Master同步。改动记录或意见：1. AREF嵌套的文档上传；2. saveFile( )重新命名为 fileSaveGDSII。所以optimask.h第544行：          void fileSaveGDSII(QString filename); //GDSII格式文件存储。     必须这样区分，因为我们以后会有多种文件格式的存储。3. optimask.h第538行        double ang;这里你想要的角度是什么单位？ 请一直定义angle为角度单位，ang 为弧度单位。我们以后的角度弧度变换会经常用。如果不能这样确定单位，以后会比较麻烦。”Let's ALWAYS define ANGLE in degree, and ANG in radian. “4.  注释说明：每个文件头，每个子程序头，每个类体/函数头应该有简短的功能目的的说明注释。类体/子函数内的关键部分（结构、算法、界面、变量等等）要有简短的描述。注释不需要长，而是应该言简意赅、简明扼要。

2017-03-26 10:47:41 PM 华丽🈴联(1816023692)
@潘雄 打开GDSII文档速度太慢，AWGOUTLINE.GDS才3M，打开已经用了10几分钟了，还没有打开。看看怎么提高速度？

2017-03-26 11:23:28 PM 潘雄(1357211280)
@华丽联 [图片]1.  这里您修改了romote master后，不应该是大于local master 吗？2.   double ang;  指的是角度 。3.   我看看awgoutline.gds打开文档，看了给您回复

2017-03-26 11:36:08 PM 潘雄(1357211280)
第一个问题，我已经知道了。

2017-03-26 11:50:44 PM 潘雄(1357211280)
awgoutline.gds文档的打开应该是有问题的，不应该是速度的问题，不过暂时还不了解是哪里有问题

2017-03-27 8:17:19 PM 华丽🈴联(1816023692)
@潘雄 1. 必须先 Check-Out Master， PULL 之后才能够将远程的更新提取到本地。PULL很重要，经常容易忘记。同理，如果你Commit本地修改后，只是在本地，必须”PUSH“才能够让远程同时更新。不要忘记”PUSH“和”PULL"。2. 请将所有代码里面以角度为单位的角度变量重新命名为angle，或者angleXXXX等。将所有以弧度为单位的角度变量重新命名为ang，或者angXXXX等。我们以后要经常弧度和角度转换的。请牢记这点，统一此命名方案，会避免以后的很多混淆。3. 那么可能是你还有些基本元素没有考虑到。可能是读取时进入死循环了，或者无限等待了。否则文件总会读到结尾的啊。我看你的同时在print out读取记录，可以帮助你debug。但是以后调试好后，不需要读取时显示读取记录，不显示速度肯定会快很多。

2017-03-27 8:24:57 PM 潘雄(1357211280)
[表情]

2017-03-27 9:25:52 PM 潘雄(1357211280)
这个是？

2017-03-27 9:26:38 PM 系统消息(10000)
你撤回了一条消息

2017-03-27 9:27:39 PM 华丽🈴联(1816023692)
@潘雄 @梅子 我现在新建\optixera\optimask\src\com目录，下面添加上面这些文件。这些文件是我多年前慢慢写的，有很多定义请直接使用。还有更多代码，以后逐步传上。1. 常量，请不要单独再定义，请使用 comcnst.h 直接调用里面的常量。2. 接下来马上要做的数据类型，参照comdefn.h继续往下扩展。3. 很多数学几何公式，请使用commath.h。其中大部分函数进行验证优化过。4. 几何图形公式，统计，判断，运算等，请使用comgeom.h，可以继续扩展。5. 多边形的定义和运算，compoly.c并没有写完。先搁置，我们很快需要扩展。

2017-03-27 9:28:46 PM 潘雄(1357211280)
分类啊

2017-03-27 9:34:27 PM 华丽🈴联(1816023692)
这些会是公用的一些代码，所以全部放在com目录下了。请尽量使用这些代码。直接#include就行。比如你的PAI就不需要定义了，直接用comcnst.h下的PI（第194行）就可以。当时对PI*N和PI/N也做了定义，因为之后的公式中经常有含PI和其他数的乘除，直接定义会使计算次数减少很多，从而让计算速度达到极致。

2017-03-27 9:36:24 PM 华丽🈴联(1816023692)
等到我们进行复杂版图运算的时候，我还有更多代码上传。

2017-03-27 9:42:39 PM 华丽🈴联(1816023692)
比如在comcnst.h中#define I _Imaginary_I#define J _Imaginary_I#define _x_ 0#define _y_ 1#define _z_ 2对以后的数值运算很有用。其它指数e，ln， PI， sqrt(PI)等常用变量及变形，DEG(degree)和RAD(radian)的互换运算，等等，都有定义。以后你会发现，这些定义让写程序计算比较接近于自然描述语言，从而非常易懂，高效，好维护。

2017-03-27 9:56:39 PM 华丽🈴联(1816023692)
我以后再开个目录，存储一些很好的参考文档。



2017-03-29 12:56:20 AM 郎量(47445613)
@吴竹  有下面几个问题，可能需要你提供思路。1）如何实现Klayout中的group和ungroup功能？我们现在是用talbemodel,能把树结构和talbemodel结合起来吗？2）Klayout中的标尺，如何实现版图缩放的时候都保持不动？3）redo和undo是用堆栈还是list实现？（Klayout中如何实现？）

2017-03-29 6:20:06 PM 刘朝洪(99213820)
这几天有些忙，所以上次开会的功能我还没有去考虑。对于三个问题，我的回答如下：第一个问题实现肯定可以，因为我记得控件里面可以添加控件，但是在Qt下我没有测试过，我还得验证一下。第二个问题比较简单，只需要画图时标尺采取屏幕坐标，第三个的实现原理是堆栈，必须是堆栈原理。至于内部的实现采用C++的list还是stack类这个都没有问题，因为C++的stack类底层也是采用list

2017-03-29 6:20:56 PM 刘朝洪(99213820)
第一个问题我还得研究测试一下，有时候控件选取错误，会耗费很多的工作量,后面两个比较简单

2017-03-29 6:23:12 PM 刘朝洪(99213820)
等一会我说一下后面两个的思路

2017-03-29 6:23:21 PM 刘朝洪(99213820)
有时间我会整理成一个文档

2017-03-29 6:41:59 PM 刘朝洪(99213820)
画标尺时，采用屏幕坐标，那不管如果缩放以及旋转，位置和大小都不会变动。有API从屏幕坐标转换为客户区坐标的函数。不过我觉得，位置还是需要改变的，只是要求标尺的相对位置不变。这样不管采用全屏还是任意拖动窗口改变大小以及位置，标尺的位置相对于UI位置都是相对固定的。比例尺的大小就可以采用屏幕坐标来确定，这样不管窗口多大，比例尺大小都不变

2017-03-29 6:42:26 PM 刘朝洪(99213820)
可以把画标尺的功能作为一个单独的函数实现

2017-03-29 6:43:06 PM 系统消息(10000)
郎量撤回了一条消息

2017-03-29 6:43:27 PM 刘朝洪(99213820)
redo 和undo 的功能简单描述一下

2017-03-29 6:44:18 PM 郎量(47445613)
@吴竹 谢谢！

2017-03-29 6:45:51 PM 刘朝洪(99213820)
undo和redo是相关的，见两个堆栈，一个是undo堆栈，一个是redo堆栈，他们都是保存客户的所有操作

2017-03-29 6:46:58 PM 刘朝洪(99213820)
客户操作分为两类，一类针对元素，一类针对区域。

2017-03-29 6:48:13 PM 刘朝洪(99213820)
针对元素包括画线，点，文本等元素，针对区域的主要是旋转，缩放，平移等操作

2017-03-29 6:57:44 PM 刘朝洪(99213820)
步骤如下：1、客户如果做一些元素操作，如画线，圆弧，写入文本等。则把这些写入的对象保存到undo堆栈中，对象属性是添加。如果实现复制粘贴剪切，则粘贴也属于新增对象2、客户如果做一些删除操作，则把删除的元素保存到undo堆栈中，对象属性是删除。如果实现复制粘贴剪切，则剪切也属于删除对象3，客户做undo时，从undo堆栈中弹出对象，并对这个对象做相反的操作。同时把弹出的对象压入redo堆栈中4，客户做redo时，从redo堆栈中弹出对象，并对这个对象做相应的操作。同时把弹出的对象压入undo堆栈中5，客户做正常的操作时，如果redo堆栈不为空，则必须清空redo堆栈，因为redo只有undo动作后才有的

2017-03-29 7:00:25 PM 刘朝洪(99213820)
我不知道你们目前画图时采用笔的方式如何，以前我采用的是抑或方式(GDI下)，这样不管是删除还是新增只需要做同样动作

2017-03-29 7:01:27 PM 潘雄(1357211280)
也就不同的属性的事件，要建立不同的堆栈

2017-03-29 7:01:45 PM 刘朝洪(99213820)
不需要不同的堆栈，总共两个堆栈

2017-03-29 7:01:54 PM 刘朝洪(99213820)
undo和redo

2017-03-29 7:02:24 PM 刘朝洪(99213820)
堆栈保存的对象包括这个对象的属性以及操作方式

2017-03-29 7:03:15 PM 刘朝洪(99213820)
假如是直线，则保存了直线的坐标以及颜色等对象属性还有新增或者删除的操作方式

2017-03-29 7:04:17 PM 刘朝洪(99213820)
这两个可以做成单独的函数，在每次正常操作时都需要调用undo

2017-03-29 7:05:07 PM 刘朝洪(99213820)
调用undo功能压入操作的元素或者方式

2017-03-29 7:08:31 PM 潘雄(1357211280)
如果，我先画了一条直线，进栈的是什么对象，再画一个矩形，进栈的又是什么对象

2017-03-29 7:09:54 PM 刘朝洪(99213820)
你画完一条直线，就把这条直线压入到undo堆栈，直线的坐标也要保存进去，方式是新增。接着你画一个矩形，就把矩形的数据压入到堆栈

2017-03-29 7:10:43 PM 刘朝洪(99213820)
但是如果矩形你是通过四条直线拼成的，你需要压栈四次

2017-03-29 7:11:39 PM 刘朝洪(99213820)
如果象CAD一样直接有画矩形或者多边形的命令，画完后整体压入

2017-03-29 7:13:15 PM 刘朝洪(99213820)
在你画图的时候我想你所有的图形都会封装成类吧，这样可以有一个共同的虚函数drawing

2017-03-29 7:14:06 PM 刘朝洪(99213820)
这样弹出堆栈，你只需要操作基类的drawing函数，就能完成正确的画图

2017-03-29 7:19:11 PM 潘雄(1357211280)
这个逻辑听清楚了，但是有个疑问，进栈的东西不是应该有相同的属性么，就像list<int>一样，加一个元素的时候，元素的共同属性是int类型，如果是别的类型，会出错或者是警告。如果上面的两个事件，一个是画线，一个是粘贴，如果是只有唯一的一个堆栈，我又如何能找到这两个事件对象的共同属性来进入同一个栈呢？

2017-03-29 7:21:25 PM 刘朝洪(99213820)
你说的对，压栈的东西是要有相同的属性，但是压栈的对象是你自己定义的

2017-03-29 7:22:42 PM 刘朝洪(99213820)
例如基础对象定义为  class CGeoBase{}    直线对象定义为 class CGeoLine : public CGeoBase{}  这样你栈里面只需要保存的是基类的指针或者引用

2017-03-29 7:24:17 PM 潘雄(1357211280)
是的，这点明白了，谢谢刘哥了

2017-03-29 7:24:48 PM 刘朝洪(99213820)
我发一个文件给你，然后在这里写一点实例代码

2017-03-29 7:25:16 PM 潘雄(1357211280)
[图片]

2017-03-29 7:25:23 PM 刘朝洪(99213820)
class CGeoBase : public Referenced{}  class CGeoLine : public CGeoBase{}

2017-03-29 7:25:57 PM 刘朝洪(99213820)
std::list<ref_ptr<CGeoBase>>   m_list

2017-03-29 7:26:24 PM 刘朝洪(99213820)
这样这个list保存的就是基类的指针，还会自我释放

2017-03-29 7:27:26 PM 刘朝洪(99213820)
ref_prt你可以采用auto_ptr，这个是C++里面的，不过我们是自己写的

2017-03-29 7:27:33 PM 刘朝洪(99213820)
我把这个文件发给你

2017-03-29 7:27:52 PM 潘雄(1357211280)
好的

2017-03-29 7:29:12 PM 刘朝洪(99213820)
不能发文件，我放在群共享空间吧

2017-03-29 7:29:53 PM 潘雄(1357211280)
也一样的[表情]

2017-03-29 7:29:57 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 10:29:56
"Referenced.h" 下载

2017-03-29 7:31:43 PM 刘朝洪(99213820)
CGeoBase 定义一个绘图虚函数，每个子类都必须实现它，这样只需要通过基类指针调用绘图函数，你就做到正确的操作了

2017-03-29 7:32:12 PM 刘朝洪(99213820)
至于画笔，颜色，刷子等的设置，这个根据需要添加进去

2017-03-29 7:33:47 PM 潘雄(1357211280)
[图片]

2017-03-29 7:35:20 PM 刘朝洪(99213820)
至于实现你采用list还是stack，看你自己，C++里面有这两种类

2017-03-29 7:35:40 PM 刘朝洪(99213820)
我先下了，有问题留言

2017-03-29 7:36:16 PM 潘雄(1357211280)
[表情][表情]

2017-03-29 10:15:09 PM 华丽🈴联(1816023692)
@吴竹 不错，谢谢。有了你的指导，我们如虎添翼[表情]@潘雄  @梅子 请尽量使用已有的程序。比如所有的常数，使用（或添加）在前天上传的comcnst.h。所有的数学计算函数，请参考我的commath.h。上次上传的那些com函数当时花了很多时间优化的，尽量使用。比如，你的graphicscene.cpp函数第413行/**********************角度的调整函数上边界************************************///修正angle使其在(-360，360)void PaintingWidget::fmod360(double& angle){    if(angle >= 360.0)        angle -= 360.0;    else if(angle <= -360.0)        angle += 360.0;}/**********************角度的调整函数下边界************************************/实际是有问题的，因为对于超过720度和小于-720度的角度都没有正确计算出来。实际上，在我的commath.h里面第292行开始，非常仔细地考虑了取模运算的通用情况和特殊情况：/* ========================================================================== *//* modulo (operators & signs: http://en.wikipedia.org/wiki/Modulo_operation) *//* In c=a/b, a dividend(numerator), b divisor(denominator) and c quotient. *//* C (ISO 1999): c=a%b, c=fmod(a,b) has the same sign as dividend a; *//* Matlab: mod(a,b) same sign as divisor b, rem(a,b) same sign as dividend a; */#ifndef rem  #define rem(X,Y) fmod((X),(Y)) /* C99 math.h div,ldiv,lldiv,remainder,remquo */#endifdouble mod(double X, double Y){ /* (Matlab: mod.m): MOD(x,y) is x - n.*y where n = floor(x./y) if y ~= 0.     By convention: MOD(x,0) is x; MOD(x,x) is 0;         MOD(x,y), for x~=y and y~=0, has the same sign as y (divisor). */  /* C: fmod(730,360)/(-730,360)/(730,-360)/(-730,-360)=10/-10/10/-10;     Matlab: mod(730,360)/(-730,360)/(730,-360)/(-730,-360)=10/350/-350/-10; */    double X0;    if (Y==0.0) return(X); if (X==Y) return(0.0); /* mod(X,0)=X; mod(X,X)=0; */    X0=fmod(X,Y); /* quotient X/Y; X-numerator; Y-denominator; */    /* if (X0*Y<0) X0+=Y; /* if opposite sign, follow sign of Y (divisor); */    /* if ( ( (X0<0)&&(Y>0) ) || ( (X0>0)&&(Y<0)) ) X0+=Y; */    if isopsign(X0,Y) X0+=Y; /* X0=X0+Y; */    return(X0);}

2017-03-29 10:19:16 PM 华丽🈴联(1816023692)
同样，对于你的graphicscene.cpp函数第426行void PaintingWidget::RotatePoint(CCoord<double>* point, double& angle)同样是有问题的，即对于超过+/-360度的旋转角度都会出问题！这个如果用我的commath.h里面第360～425行里面的函数就不会出问题。

2017-03-29 10:26:32 PM 华丽🈴联(1816023692)
如果不考虑这些细节，程序很容易出错。我大概可以估计你的文件打开有问题跟这些旋转不正确有关。建议你们仔细读一下我的那些common函数，了解每个函数的用途。尽量不要自己去写这些数学函数，非常费时间的，且难保证100%准确。而且我已经替你们花过这些时间了，所以你们一定要尽量使用我的算法。以后等到高级曲线运算的时候，你们会知道，我这些程序是经受过很多极端情况的考验的。这也会是我们比其它程序好的一个原因。[表情][图片]

2017-03-29 10:35:54 PM 梅子(1126859953)
谢谢，好的，已经收到[表情]@华丽联 @吴竹 @郎量 

2017-03-29 11:25:50 PM 潘雄(1357211280)
[图片]

2017-03-29 11:25:56 PM 潘雄(1357211280)
@华丽联 

2017-03-30 6:11:09 AM 潘雄(1357211280)
邓博士，你说的这几个需要注意的问题，在下次传代码上去的时候改过来

2017-03-30 8:21:48 PM 华丽🈴联(1816023692)
@潘雄 @梅子 好的，谢谢。我们现在刚开始时好好定义，对以后的速度和效率都会有较大帮助。磨刀不误砍柴工。

2017-03-30 8:26:39 PM 华丽🈴联(1816023692)
@潘雄 关于你说的GDSII写入时的时间问题，可否看看comcnst.h第76～102行的函数是否可用？ char *timestamp() { 代码见comcnst.h文件 } 以及  void timeprint() { 代码见comcnst.h文件 }我曾经用matlab程序调用过这些时间写入函数的。 

2017-03-30 8:26:51 PM 华丽🈴联(1816023692)
[图片]

2017-03-30 8:28:43 PM 潘雄(1357211280)
好的。邓导有心啊，还记得这个问题

2017-03-30 8:40:53 PM 华丽🈴联(1816023692)
[表情] 我需要尽量读懂你们的思路，然后才能进一步优化。必须做得更好才能淘汰现有软件，否则就不可能的。细节也很关键，虽然目前的阶段是建立框架的时候（进度很重要）。一开始就要求更快更高更好，以后才会进入良性循环。

2017-03-30 8:50:23 PM 华丽🈴联(1816023692)
GDSII文档因为历史原因，还有两个特殊特点：1. polygon点数不超过200点。因为起点终点重合，所以实际最多199个不同的点。2. 文件是2048比特的整数倍，多余的空间补充齐为0》 When a file was written to a tape, it was written in 2048 byte physical blocks. The file was padded with NULL characters so that it was always a multiple of 2048 bytes.自定义文件格式可以去除这两个限制，但是GDSII格式必须遵循这两个限制。所以到时必须有格式转换的考虑。其实现在工业界一直想推OASIS格式来替代GDSII。因为历史原因，以及现在磁盘空间并不是主要限制，所以OASIS推了许多年还没有实现替代GDSII。不过现在的软件都是同时支持OASIS格式的。常用还有其它几个格式，CIF，Gerber，以及AutoCAD。现在你可能可以理解我为什么不是太建议你写太多这些代码，而是建议尽量使用。因为格式很多，而且很费时间。最重要的是，我们的主要价值不是在这里，而是在以后需要开发的曲线和计算功能。

2017-03-30 11:38:08 PM 郎量(47445613)
@梅子 @潘雄 现在能过来会议室吗

2017-03-30 11:38:25 PM 梅子(1126859953)
好的

2017-03-30 11:41:18 PM 潘雄(1357211280)
[图片]

2017-03-31 10:44:07 PM 华丽🈴联(1816023692)
@潘雄 你这次的Merge Request我很容易就合并了。谢谢。

2017-03-31 10:48:40 PM 华丽🈴联(1816023692)
@梅子 @潘雄 如果每次合并申请时稍微写几句（修改的文件名清单，主要改动的地方。FreeFileSync/WinMerge等的拷屏也可），我会更加容易些，缩短时间提高效率。[表情]周末愉快！

2017-04-01 5:18:17 AM 梅子(1126859953)
@华丽联 @郎量 邓博士，我已经将我和潘雄一起合并的程序上传到远程服务器了，郎老师，我也给您发了一份合并后版本的邮件，合并之后单个构元的显示还是有些问题，需要请教一下刘导@吴竹 

2017-04-01 5:19:39 AM 梅子(1126859953)
@吴竹 1.主窗口与cell窗口主窗口：多窗口（view1,view2,view3......），用worktables（QTabWidget）管理Cell窗口：多窗口（Cell1，Cell2,.......）用celltables（QTabWidget）管理2.打开多个文件：document1，document2 主窗口（view1,view2） Cell窗口（cell1.cell2）Document类封装了read，view，cell，画图元等功能（1）打开gds1，新建一个document1，读取gds1里面的数据保存为read1，在view1里面画出整幅图,将view1添加到worktables同时新建cell1显示构元目录（2）打开gds2，document2，读取gds2里面的数据保存为read2，用read2在view2里面画出整幅图,将view2添加到worktables，同时新建cell2显示构元目录，问题：1、怎样实现cell1与view1匹配，也就是当删除一个view1对应cell1同时删除2、当点击cell1窗口构元目录中某个子构元cell1-item1，cell1-item2，怎样在主窗口中显示cell1-item1

2017-04-01 5:20:39 AM 梅子(1126859953)
[图片]

2017-04-01 5:39:38 PM 华丽🈴联(1816023692)
@潘雄 @梅子 新的版本已经合并。记得下周开始工作前与Master同步（Checkout， Pull， 然后 Merge）。我明天会加些文件和修改。

2017-04-01 5:59:54 PM 华丽🈴联(1816023692)
@潘雄 1. 文件打开后window是不能缩放，是有意的吗（你的Merge Request是叫Fit Window）？ 但是我们需要窗口可以缩放的。2. AWGOUTLINE.GDS， 还是打开时死机。@吴竹 能不能也帮忙看看怎么回事？3. 当双击构元结构面板（Cell Structure）下面的子构元（Cell）的时候，出现新工作窗口时并没有读取显示该构元的内容。以 AWGPINWBCB.GDS为例，点击box_Auto_17_PD_20_30_Marker时，你的新窗口为空白。 [图片]4. 当工作面板切换到另外一个GDS文件时，相应的构元结构面板（Cell Structure）需要被激活。目前好像还没有这个切换功能。5. Layer面板的多窗口，以及切换还没有成功。6. 构元结构面板（Cell Structure）下面任何一个构元选中时，需要允许鼠标右键操作。进行打开，重新命名，删除，等操作。更详细可以参考L-Edit下图。你们现在可以只添加“打开”，“重新命名”，”删除“这三个操作。完成之后，我可以自己来添加其它必要子菜单。[图片]7. 同理，构层面板（Layer Panel）下面任何一个构层选中时，需要允许鼠标右键操作。你们现在可以只添加“打开”，“重新命名”，”删除“这三个操作。完成之后，我可以自己来添加其它必要子菜单。其它更多反馈我慢慢再提供。

2017-04-01 7:18:01 PM 潘雄(1357211280)
1:是有意的，因为窗口刚开始不是继承与Qgraphicaview 的，所以我没办法写resizeEvent这个虚拟函数来更新窗口的大小。  2:还没机会检查这个错误3:这个问题我跟梅子也讨论了很久，因为结构关系，所以导致这个功能暂时没办法实现。4:此问题和3是一起的。目前我只能反馈前4个

2017-04-01 7:22:04 PM 系统消息(10000)
潘雄撤回了一条消息

2017-04-02 7:21:07 AM 梅子(1126859953)
好的，邓博士，在实现多窗口的过程，的确出现了3和4的问题，也是我正要请教刘导的地方，我会尽快解决，至于后面几个问题，会尽快进行

2017-04-02 10:41:21 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 13:41:20
"编码规范.doc" 下载

2017-04-02 11:17:25 PM 华丽🈴联(1816023692)
@吴竹 这个编码规范文档非常好[表情] 谢谢了[表情]@潘雄 @梅子 请保存和打印这份编码规范。这个是公司实战文档，比我的外行文档更加详细有效。请提高标准，尽量遵从此编码规范。不但对团队开发合作、项目管理、软件维护扩展等都很有帮助，而且对你们个人能力提升很有好处。[表情]同时，请记住同步 http://git.optixera.com/hdeng/optixera下的所有文档。我添加了很多文件，关于研究文献和代码。下面框中的两个目录都是新的。请文件和代码仅供己用，不要外传，对你们会有帮助。郎老师会详细给你们解释。有问题可问我。[图片]

2017-04-02 11:34:47 PM 刘朝洪(99213820)
 这个文档是十多年前整理的，现在估计有些地方过时了，不过原则上应该没有问题的

2017-04-03 12:27:23 AM 刘朝洪(99213820)
@梅子 想要cell和view匹配，只需要在Document类中同时保存该文档对应的cell和view的引用，这样他们就对应起来。这个就是MFC的document-view-frame结构

2017-04-03 12:30:29 AM 刘朝洪(99213820)
当然，你在cell和view里面也需要保存相应的Document对象引用

2017-04-03 12:33:10 AM 刘朝洪(99213820)
关于你的第二个问题，点击cell1窗口构元目录中某个子构元cell1-item1，然后在主窗口中显示cell1-item1数据(新增一个view3)

2017-04-03 12:38:08 AM 刘朝洪(99213820)
我根据你的描述是这么理解的，不知道是否对。也就是说你不但需要一个cell可以对应应该view，还需要一个cell1-item也对应一个view。如果我的理解没有错的话。那么真正的对应关系应该是cell1-item对应一个view。但是一个cell包括其下的所有cell1-item对应着同一个文档

2017-04-03 12:42:57 AM 刘朝洪(99213820)
如果是这样的话，你只需要在Document对象里面建立cell-item与view的对应关系。关键字就是cell + item(如果没有选中任何item，则item为0)。这样根据当前的item就可以决定是激活已经打开的view还是创建新的view

2017-04-03 12:44:57 AM 刘朝洪(99213820)
每个view都有一个document对象的引用以及item的值

2017-04-03 7:05:14 AM 梅子(1126859953)
好的[表情]，收到@华丽联 

2017-04-03 7:07:12 AM 梅子(1126859953)
谢谢刘导，我得好好想想您说的@刘昕 

2017-04-04 12:15:34 AM 潘雄(1357211280)
[图片]

2017-04-04 12:16:12 AM 潘雄(1357211280)
为何我下载的编码规范是空的？@吴竹 

2017-04-04 12:17:44 AM 潘雄(1357211280)
有了

2017-04-04 1:08:16 AM 潘雄(1357211280)
[图片]@华丽联 

2017-04-04 1:12:03 AM 潘雄(1357211280)
@华丽联 

2017-04-04 1:12:08 AM 潘雄(1357211280)
[图片]

2017-04-04 9:49:58 PM 华丽🈴联(1816023692)
@潘雄 1. 代码规范可以打开的，应该是你下载或电脑启动速度的问题。2. 当你Checkout在某分支（Branch）或主干（Master）上时，该处变黑体，此时为工作树（Work Tree）。   2a. 如果远程被其他用户或者管理员更新过，但是还没有提取（PULL），那么它将小于远程（<Origin）;   2b. 如果从远程（Origin）提取（PULL），那么它将等于远程（=Origin）；   2c. 如果修改后再确认（Commit），那么它将大于远程（>Origin）；推送（PUSH）成功后等于远程（=Origin）；3. 当你需要将某分支（Branch）或主干（Master）合并到工作树（Work Tree），那么   3a. Checkou目标分支（Branch）或主干（Master）上。此时目标为黑体；   3b. 在执行合并（Merge）时，源被选中（Checkmark Selected）；目标为工作树（Work Tree），不选中（UnSelected）。   3c. 如果仅仅"Merge to Working Tree"，工作树（Work Tree）被修改，但是并没有确认（Commit）。   3d. Create Merge-Commit"相当于 "Merge to Working Tree" + "Commit"： 工作树（Work Tree）被修改，同时确认（Commit）。    3e. 此时依然全部是本地（Local）的更新。必须要推送（PUSH）后相应的远程才会被更新。

2017-04-04 9:57:31 PM 华丽🈴联(1816023692)
所以上图如果你想从远程Master合并至dev_panxiong，那么：1. Checkout Master2. PULL （如果需要保证本地Master = 远程Master）3. Checkout dev_panxiong4. Merge-->选中Master，但是dev_panxiong为黑体却并不选中5. "Merge to Working Tree" + "Commit" 或者直接 "Create Merge-Commit"6. PUSH（如果需要远程个人分支 = 更新的本地个人分支） 

2017-04-04 10:21:15 PM 系统消息(10000)
蓝色枫景加入本群

2017-04-04 10:39:06 PM 郎量(47445613)
@蓝色枫景 ，欢迎朱杏子同学

2017-04-04 10:42:20 PM 华丽🈴联(1816023692)
[图片]

2017-04-04 10:45:13 PM 郎量(47445613)
[图片]如果远程被其他用户或者管理员更新过，但是还没有提取（PULL），那么它将小于远程（<Origin）;    我本地上周没有从远程提取，应该master<origin, 但是本地显示 master=origin?

2017-04-04 10:47:24 PM 梅子(1126859953)
欢迎欢迎[表情]

2017-04-04 10:47:58 PM 梅子(1126859953)
我也有同样的问题，一直显示的是master=origin

2017-04-04 10:48:55 PM 郎量(47445613)
@梅子 @潘雄 ,下午临时有个会，如果我四点半不找你们的话，今天下午就不开会了。初步换成明天上午。

2017-04-04 10:49:24 PM 梅子(1126859953)
好的

2017-04-04 10:50:52 PM 郎量(47445613)
我百度了一下， master1>origin,这里的">"并不是大于符号，而是指向符号,意思是你还需要你本地的代码提交到网上选中 master1>origin,单击右键push,就是把你的代码提交到网上。

2017-04-04 10:52:40 PM 郎量(47445613)
感觉有人（管理员）催促你上传或者提取。 如果没有催你，估计没有大于或者小于

2017-04-04 11:01:24 PM 潘雄(1357211280)
欢迎小师妹@蓝色枫景 

2017-04-04 11:02:00 PM 梅子(1126859953)
[图片]

2017-04-04 11:02:36 PM 梅子(1126859953)
[图片]

2017-04-04 11:03:53 PM 梅子(1126859953)
之前上传我只上传部分，我有些自动生成的文件我没有提交，是不是我应该删除了，再

2017-04-04 11:03:58 PM 梅子(1126859953)
所以上图如果你想从远程Master合并至dev_panxiong，那么：1. Checkout Master2. PULL （如果需要保证本地Master = 远程Master）3. Checkout dev_panxiong4. Merge-->选中Master，但是dev_panxiong为黑体却并不选中5. "Merge to Working Tree" + "Commit" 或者直接 "Create Merge-Commit"6. PUSH（如果需要远程个人分支 = 更新的本地个人分支） 

2017-04-04 11:04:06 PM 华丽🈴联(1816023692)
上面的文字是我的理解思路。具体可能会用偏差[表情]。在我的电脑上，[图片]因为我的本地（Local）dev_lang一直没有更新，也没有从远程（Remote，Origin）提取PULL，也没有Push上去，现在的状态是本地有2次提交（Commit）没有推送（PUSH），且本地比远程少13次提交（Commit）。

2017-04-04 11:11:40 PM 华丽🈴联(1816023692)
@梅子 每次合并之前，确认自己的分支需要先Push么？远程需要被Pull下来么？注意本地，远程，工作树三个概念的区别。尤其是工作树，修改之后如果不Commit，那么工作树与本地Checkout的分支是不一致的；Commit之后才一致。

2017-04-04 11:20:57 PM 华丽🈴联(1816023692)
”Commit”（承认）只是承认对本地项目和文件目录的修改，暂时不影响远程Repository。如果需要提交到远程，需要“Push（提交）”到远程。初学者经常忽略Push，时间一长就乱了。[图片]

2017-04-04 11:22:32 PM 华丽🈴联(1816023692)
@梅子  如果需要删除远程可以用Remove，然后再Commit。Delete后Commit可以删除本地文件。

2017-04-04 11:23:35 PM 梅子(1126859953)
好的，邓博士，我知道问题出在哪儿了，我在写代码时，对里面的文件做了一些改动，所以有冲突

2017-04-04 11:23:39 PM 梅子(1126859953)
[表情]

2017-04-04 11:24:17 PM 华丽🈴联(1816023692)
如果我的理解不准确，那就只有请刘总 @刘昕 了。

2017-04-04 11:28:41 PM 梅子(1126859953)
按照您说的，可以正常把文件拉下来，我以前就是按照您说的做的，这次是因为我还没有拉下来，就改了里面的东西所以出现冲突[表情]

2017-04-04 11:30:31 PM 华丽🈴联(1816023692)
@所有人 开个玩笑轻松一下，我们现在梅子杏子都有了。”梅杏青青已著枝“，争取 媲美 苹果（Apple）和黑莓（BlackBerry）啊[表情]

2017-04-04 11:32:48 PM 梅子(1126859953)
[表情]看来我得加油啊

2017-04-04 11:40:50 PM 华丽🈴联(1816023692)
有志者，事竟成，破釜沉舟，百二秦关终属楚；苦心人，天不负，卧薪尝胆，三千越甲可吞吴。我且梦周公去也。若有问题，编程之外，诗词之内，也可找 @吴竹 大侠[表情]。

2017-04-04 11:43:22 PM 潘雄(1357211280)
[图片]这一条好像不太对，感觉郎老师的理解可能是正确的？@华丽联  

2017-04-04 11:47:04 PM 潘雄(1357211280)
看来邓导还是一位诗人啊

2017-04-05 4:57:00 AM 梅子(1126859953)
@吴竹 刘导，上次我的文字表述没有表达清楚，所以有很多地方没有准确传达给您，我的多窗口大概设计思想，这次我以图和文字的形式写在这个word文档里面，其中遇到的问题，我也写在里面，我不知道我的整体框架的思路是否存在问题，所以希望得到您的指点，如果有不清楚的地方，我再具体讲给您听

2017-04-05 4:57:27 AM 梅子(1126859953)
[图片]@吴竹 

2017-04-05 6:09:02 PM 系统消息(10000)
[图片] 梅子 分享文件 19:50:56
"整体框架.docx" 下载

2017-04-05 6:20:55 PM 华丽🈴联(1816023692)
@梅子 框架文档不错，很好的表现了你的解决问题的思维和能力。有信心你的能力提升将会很快。[表情]@潘雄 我使用SmartGit时间不比你们长多少，理解也未必完全正确。不过大家可以一起进步。抄诗不过鼓舞一下士气，刘导的诗词水平更高。

2017-04-05 6:40:43 PM 潘雄(1357211280)
邓导太谦虚了@华丽联     梅子能力提升的越来越快了@梅子 

2017-04-05 6:40:57 PM 潘雄(1357211280)
[图片]

2017-04-05 6:46:28 PM 梅子(1126859953)
谢谢鼓励，我会好好加油的！[表情]@华丽联 @潘雄 

2017-04-05 9:04:39 PM 郎量(47445613)
[图片]      我在github网页模式下给自己提交了 merge请求， 过了一段时间，smartgit 编程了左边的图。   master<15 origin .  应该是有15个文件有变化需要更新（ 15 commits behind )

2017-04-06 12:34:12 AM 刘朝洪(99213820)
@梅子  我看了你的整体框架方案，总体来说不错，我也做了一些修改，你看看，不明白的尽管问我

2017-04-06 12:35:15 AM 梅子(1126859953)
好的，谢谢刘导，我正在下载

2017-04-06 4:59:49 AM 梅子(1126859953)
@吴竹 感谢刘导的指点，您描述的已经很详细了，我知道该怎么着手做了，您提出的新架构，把文档数据与view分离我也觉得很好，也能解决我后面可能遇到的问题，以后应该多多向您请教

2017-04-06 9:52:13 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 15:32:49
"整体框架修订.docx" 下载

2017-04-06 10:21:15 PM 华丽🈴联(1816023692)
@吴竹 多谢刘导[表情] 谈笑间，强虏灰飞烟灭。@梅子 我们有幸有软件公司总监的亲自指导[表情]@梅子 @吴竹 看完文档，忽然发现，这个框图中需要加上LayerTab对应的操作。CellTab和LayerTab都是需要Multi-tab，同时需要对应当前激活的WorkTab。构层配色板（Layer Palette）却不需要有多份，因为它只是对选定的层进行配色和图案操作，对于所有的层是一样的。不过应该以此类推，原理是相似的，照理重复应该就好了。相对应的NaviDock其实也应该同理。不过NaviDock不需要Multi-Tab，只需要根据当前激活的WorkTab来显示其正确的局部与全局边框示意。

2017-04-06 11:05:06 PM 华丽🈴联(1816023692)
@潘雄 @梅子 @朱杏子  @郎量 @吴竹 @刘昕 我重新整合了网盘目录和文件，更加便于大家交流合作。同时删除了所有无用（过期）项目或文件。http://git.optixera.com/hdeng/optixera [图片]其中，绿色框为原有目录（之前最常使用）。红色框内为最近或今天添加目录，主要有开发文档，以及学术研究文献和代码。我们以后讨论时，如果需要用到某文件，使用相对目录和文件名字即可。请大家PULL提取所有新文件。

2017-04-06 11:06:22 PM 郎量(47445613)
@华丽联 OK

2017-04-06 11:11:21 PM 梅子(1126859953)
好的，收到!@华丽联 @郎量 

2017-04-06 11:13:51 PM 华丽🈴联(1816023692)
关于文档，有三个目录，具体分类如下：1.   \optixera\Docs --> 整个项目总体框架文档。不限于optimask子项目。2.   \optixera\optimask\dev --> optimask版图开发文档3.   \optixera\optimask\doc--> optimask软件手册我们日常开发过程中遇到的问题，准备的文档，计划等等，都放在optixera\optimask\dev的目录。所有的版图参考资料也复制过来了。你们开发过程中的文档都可以归类分入此dev目录，必要时创建子目录。平行的目录\optixera\optimask\doc，主要是以后正式文档（比如用户手册）等使用。

2017-04-06 11:16:54 PM 潘雄(1357211280)
[图片]

2017-04-06 11:16:59 PM 潘雄(1357211280)
@华丽联 

2017-04-06 11:22:13 PM 华丽🈴联(1816023692)
@郎量 @朱杏子 需要给杏子建立Gitlab账号。可以先熟悉SmartGit的使用，以及开始简单的界面（比如图标）编程。

2017-04-06 11:25:18 PM 郎量(47445613)
@华丽联 可以，我来建吧

2017-04-06 11:29:41 PM 潘雄(1357211280)
郎导，啥时候开会啊？@郎量 

2017-04-06 11:35:03 PM 华丽🈴联(1816023692)
@郎量 好的[表情]谢谢@潘雄 @梅子 @朱杏子  请尽量遵循刘导的编码规范 \optixera\Docs\编码规范.doc（以及缩减版基本原则 \optixera\optimask\dev\Optixera版图软件开发进阶.docx）\optixera\optimask\dev\整体框架修订.docx也传上去了。同时，如果学术研究目录有任何问题，也可开始讨论。我们现在渐入佳境，争取更上一层楼哦[表情][表情][表情][表情]

2017-04-06 11:35:17 PM 郎量(47445613)
3：00

2017-04-06 11:36:26 PM 郎量(47445613)
@华丽联 AWG从博士论文 Linwenhua看起， DEG也是先看这篇博士论文，还是有其他入门文档？

2017-04-06 11:53:34 PM 华丽🈴联(1816023692)
 分别都有入门综述文章。AWG建议此三个综述目录开始\optixera\Research\AWG_WGR_PHASAR\AWG_AppNote_Review\optixera\Research\AWG_WGR_PHASAR\AWG_CourseNote\optixera\Research\AWG_WGR_PHASAR\AWG_Thesis_Report比如文档：NTT_AWG.mpg， Okamoto2006_Ch9_AWG.pdf， Frank H. Peters_ucc.ie_Topic 11 - AWG.pdf，Phoenixbv_AWG_application_note.pdf等等。我同时刚才把我以前的几篇自己的文档也传上去了，在AWG_Thesis_Report\Deng下。Echelle Grating 从这个目录开始\optixera\Research\AWG_WGR_PHASAR\Echelle_Rowland\optixera\Research\AWG_WGR_PHASAR\CWDM_AWG_Echelle比如\Echelle_Rowland\Echelle， Koteles_Review_1999.pdf

2017-04-07 12:00:15 AM 华丽🈴联(1816023692)
AWG_Intro_Y_Gu.pdf和我自己的几篇文档比较简单入门。

2017-04-07 11:16:27 PM 华丽🈴联(1816023692)
@梅子 @潘雄 这周的代码有上传么？不一定需要全部完成，但是定期合并同步会有效很多。同时可以看是否有问题或困难，需要调整思路？

2017-04-08 8:20:03 AM 潘雄(1357211280)
还没上传，今天有点点事，明天上午去传

2017-04-08 9:33:47 PM 华丽🈴联(1816023692)
@郎量 请把L-Edit的包上传到文件文件夹，让朝洪装一下。@吴竹 请帮助研究KLayout和日本人Kudo的代码，看看怎样加快完成GDSII的读写。我查看了好些个GDSII Viewer的软件，实现功能几百K字节就可以了。

2017-04-08 10:06:26 PM 系统消息(10000)
你撤回了一条消息

2017-04-08 10:07:36 PM 华丽🈴联(1816023692)
从3/11/2017开始一个月的工作安排a.	完成所有工具条（图标可参考\optimask\src\Icon\actions，如果不够，可以利用Icon_Download_Sites.docx）-->Half Done；杏子开始接手这一块。请给杏子建立Gitlab账号，让其学习SmartGit，下载所有文件。开始工具条设计。b.	basic shapes and coordinates; 画图时自由移动鼠标自由绘图。--> Need to Do。c.	标尺，缩放。-->（刘朝洪确定方案。）d.	GDSII文件的正确读写和存储。--> 基本可读写，但是需要避免KLayout和日本人的代码错误。潘雄继续完成。e.	Cell Structure的正确显示（层次结构，以及双击打开工作窗口）--> 完成。f.	版图主视图区（需要允许多窗口） --> WorkDock, CellDock OK, Layer Dock需要添加。梅子进行整体框架新建（重建）。g.	layer的正确读取，显示和操作。构层面板的排序和组合（Group）。-->排序OK。但需要树形结构和TableModel的嵌套。（刘朝洪确定方案。梅子进行整体框架新建（重建））h.	Undo/Redo功能的实现 -->（刘朝洪已经确定方案。潘雄继续完成。）

2017-04-09 2:34:42 AM 郎量(47445613)
@朱杏子 @潘雄 @梅子 明天上午9点碰个头。大家早点来。

2017-04-09 2:36:39 AM 梅子(1126859953)
好的，收到[表情]@华丽联 @郎量 

2017-04-09 2:45:24 AM 梅子(1126859953)
@吴竹 ，刘导，您好！我这几天整理了您给的思路，写了代码的框架，总共四个头文件，分别是gdsdocument.h，treewidget.h，graphicsView.h，optimask.h（主程序），分别写了类中可能要用到的成员函数和成员变量，但是有几个问题我不知道怎么解决，写在了文档中，另外我命名也参照了您之前给的编码规范，我的知识量储备不够，所以很多时候会走错很多弯路，希望得到您的指点

2017-04-09 2:45:51 AM 梅子(1126859953)
[图片]@吴竹 

2017-04-09 2:55:26 AM 梅子(1126859953)
@华丽联  邓博士，我这周没有代码，刘导比较有经验，我想在刘导的指点下建立好一个稳定的框架，这样以后就不会再次大改，后面做的话对我来说应该相对容易点

2017-04-09 1:14:20 PM 华丽🈴联(1816023692)
@梅子 谢谢，知道了。框架文档总体不错[表情]。记住LayerPanel也需要和CellTab一样，需要多tab，随激活的worktab而激活。（但是Layer Palette调色板，不需要多tab）。还有树形模式和表格模式的嵌套问题，有没有思路或方案？有问题尽管提出来，大家一起解决。

2017-04-09 5:29:27 PM 梅子(1126859953)
好的[表情]@华丽联 

2017-04-09 5:30:59 PM 潘雄(1357211280)
刘导，请教一个问题：先画一个矩形，然后撤销，如何使这个出现在view窗口下的矩形消失以来实现撤销

2017-04-09 5:31:31 PM 潘雄(1357211280)
@刘昕 

2017-04-09 10:27:35 PM 华丽🈴联(1816023692)
@潘雄 这次你的合并提交很好，修改说明简单明了，合并一次成功，请再接再厉[表情]Undo/Redo需要与图形的坐标对应，目前Redo时重复图形的坐标还是随机的。层次也不够，三四次Redo就停止了。@吴竹 请帮忙看看怎么修改。谢谢。

2017-04-09 10:35:04 PM 华丽🈴联(1816023692)
@潘雄 @吴竹 Undo/Redo不只是对于画图的操作，也需要同时对其他的操作有效，比如构元和构层的操作。所以commands.h不应该是在\Draw\目录下，应该是在\Edit\目录下[图片]

2017-04-09 10:41:36 PM 系统消息(10000)
你撤回了一条消息

2017-04-09 10:42:42 PM 华丽🈴联(1816023692)
@梅子 @潘雄  \Draw\document.h的名字也太过通用（general），需要特定（specify)。此外，请看看一下老文件（比如line.h, rect.h, shape.h等）是否已过期不需要？请及时删除所有不需要的文件。可以将所有过期的文件全部移至\Obsolete\目录，即存档又不影响主体。谢谢。

2017-04-09 10:42:58 PM 潘雄(1357211280)
这个函数只完成了一半，所以是个半成品，本来是想弄好了在上传的！下次在传的时候可能会好点，到时候在把它弄到edit目录下。

2017-04-09 10:46:01 PM 华丽🈴联(1816023692)
@潘雄 没问题，我只是提供及时反馈意见供考虑。有信心一定会越来越好 [表情]

2017-04-09 10:49:28 PM 梅子(1126859953)
@华丽联 好的，gdsdocument.h，treewidget.h，graphicsView.h这几个文件的名字可以吗？

2017-04-09 10:54:57 PM 华丽🈴联(1816023692)
gdsdocument.h和graphicsView.h看起来还是比较确定的。treewidget.h需要看情况：如果对于LayerPanel，CellDock以及其它（今后）所用的tree结构同样，那么treewidget.h作为公用的头文件是可以的；但是如果对于不同的面板需要使用不同的头文件，那么就需要确定一点的名字，比如celltreewidget.h之类。请根据实际情况酌情决定。

2017-04-09 10:58:06 PM 梅子(1126859953)
 好的，谢谢！

2017-04-09 11:10:21 PM 华丽🈴联(1816023692)
没问题。其实主要是思路。初期的有效规范可以显著降低程序的维护成本，产品越到后面修改的代价越高。我个人认为，好的程序其实和写文章是有共通的，思路明确，结构清晰，文本易懂。可以假想你的读者完全是外行，怎么简明扼要地把你的意思明确表示出来。

2017-04-09 11:17:44 PM 梅子(1126859953)
@华丽联 好的，谢谢邓博士，学习了[表情]，以后我会注意这些问题

2017-04-10 4:40:53 AM 潘雄(1357211280)
@吴竹 刘导，在QGraphicsView中重写paintEvent()函数后，为何重新画的图不会显示？然我将paintEvent()函数去掉后，直接在View里面调用画的函数，是可以显示的？这是哪里出了问题 

2017-04-10 7:44:33 PM 刘朝洪(99213820)
这个我倒是不清楚。按理说该没有问题。要么没有调用你重写的函数，要么你重写的有问题。你首先看看你重写的函数是否是虚函函数，如果是，那肯定调用了。如果调用了还不显示，那就是你写的代码有些问题

2017-04-10 7:48:41 PM 潘雄(1357211280)
函数是虚函数。我在看看吧。谢谢刘导

2017-04-10 10:34:16 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 13:34:16
"整体框架修订（问题更新）_1.docx" 下载

2017-04-10 10:34:38 PM 刘朝洪(99213820)
@梅子 我对你的问题作了一些解答

2017-04-10 10:36:41 PM 梅子(1126859953)
好的，谢谢刘导！@吴竹 

2017-04-10 10:40:07 PM 华丽🈴联(1816023692)
@吴竹 [表情][表情][表情]

2017-04-10 10:40:25 PM 刘朝洪(99213820)
@潘雄 undo里面撤销一个图形最简单的办法就是update一下view，相当于重新绘制一下整个图形。我记得Qt采用的双缓冲换图，所以不会产生察觉的停顿现象。如果要优化倒是有其它的更多办法

2017-04-10 10:41:32 PM 刘朝洪(99213820)
例如在更新view是，你计算出你要撤销的包围盒，然后更新时传递进去，这样系统只更新一小部分

2017-04-10 10:49:50 PM 华丽🈴联(1816023692)
@梅子 [表情] 有两点请现在补充进该整体框架文档：1. 记住LayerPanel也需要和CellTab一样，需要多tab，随激活的worktab而激活。（但是Layer Palette调色板，不需要多tab）。2. 对于cell structure显示，请记住加入显示构元层级的选择，如下图红色框内显示。工作显示区域只显示指定的起始层级和终止层级。即引用超过指定层级的就不需要显示。这个对于很多层的构元结构选择性显示非常有用。[图片]

2017-04-10 10:51:16 PM 潘雄(1357211280)
现在的处境就是已经能够找到要更新的位置。update也是要重新写paintEvent函数，现在重新写了这个函数后，图就出不来。@吴竹 

2017-04-10 10:52:08 PM 刘朝洪(99213820)
原先的画图函数能画出来么

2017-04-10 10:52:30 PM 潘雄(1357211280)
能

2017-04-10 10:52:40 PM 刘朝洪(99213820)
你先就重绘制整个图层

2017-04-10 10:54:23 PM 刘朝洪(99213820)
如果没有问题，那可能计算出来的位置数据有误，或者说计算出来的位置传递进去对应的区域不是要要更新的，我查看了一下klayout感觉它就是重新绘制整个图形

2017-04-10 10:55:28 PM 潘雄(1357211280)
每一个undo都要绘制前面所有的图形？

2017-04-10 10:56:49 PM 刘朝洪(99213820)
嗯，但是你绘制整个图形不需要另外编写代码了，你只需要让整个客户去无效，系统就会自动绘制整个图形

2017-04-10 10:57:09 PM 刘朝洪(99213820)
就会调用你之前编写的绘制整个图形的函数

2017-04-10 10:59:00 PM 梅子(1126859953)
好的，第一点没有问题，第二点可以加入显示构元层级，只是“工作显示区域只显示指定的起始层级和终止层级”功能，现在完成不了，现在打开的gds或者画的图没有分层@华丽联 

2017-04-10 10:59:41 PM 潘雄(1357211280)
整个客户去无效，是啥意思？

2017-04-10 11:00:00 PM 华丽🈴联(1816023692)
@吴竹 每次undo/redo都重新绘制会不会对程序速度资源影响较大，尤其是当图形比较复制的时候（以后会是常态）。有没有更好的办法？

2017-04-10 11:00:02 PM 刘朝洪(99213820)
@华丽联 KLayout源码编译可以不需要rubby和python，以及stlport，在我这里编译时不添加这三个，编译运行没有问题

2017-04-10 11:03:26 PM 刘朝洪(99213820)
window绘制正常图形是的原理是这样。你在客户区绘制好图形后，如果客户发生最大/最小化/移动/以及其它界面覆盖后又恢复。则系统就会自动使客户区变成无效。一但客户去变成无效，系统就会给应用发送一个要求绘图的信息，然后应用程序就会重新绘制

2017-04-10 11:04:16 PM 刘朝洪(99213820)
还有一种情况就是应用程序自动使客户区无效，系统也会发送要求绘制的消息

2017-04-10 11:06:25 PM 潘雄(1357211280)
好的，这个明白了。

2017-04-10 11:06:55 PM 刘朝洪(99213820)
你也可以绕过系统对客户区有效无效的管理，直接在上面绘制图形，在绘制前擦出要绘制的区域，然后绘制

2017-04-10 11:07:23 PM 潘雄(1357211280)
我再仔细磨磨，有问题再问您，谢谢刘导@吴竹 

2017-04-10 11:07:24 PM 刘朝洪(99213820)
OpenGL和DX就采用最后一种方式

2017-04-10 11:09:03 PM 刘朝洪(99213820)
@华丽联 重新绘制整个图形不会耗费太大的资源和速度，因为采用双缓冲，绘制好了后，直接复制到屏幕缓冲区

2017-04-10 11:11:17 PM 华丽🈴联(1816023692)
@梅子 明白现在第二点暂时完成不了，但是程序框架需要先准备上。这个层级是GDSII文件版图的构元层级，引用一次就是一个层级。这个引用（Reference）层次（Level)是必定存在的。你可以用KLayout打开某GDSII文件测试，看显示怎么变。@吴竹 好吧，你决定。希望速度效率不会有很大影响。速度和效率对我们的程序很重要的，以后会有很多非常复杂的图形。希望尽量帮助我们考虑总体效率。@潘雄 @吴竹 看来后一种方式更加吸引人些。

2017-04-10 11:15:11 PM 梅子(1126859953)
[表情]@华丽联 

2017-04-10 11:15:59 PM 潘雄(1357211280)
现在唯一的想法是能实现这个功能[表情]@华丽联 

2017-04-10 11:16:43 PM 刘朝洪(99213820)
你就采用使整个客户区无效的绘制方式，我查一下，这个是调用什么函数

2017-04-10 11:17:27 PM 潘雄(1357211280)
其实您说的这个也跟paintEvent()函数有关

2017-04-10 11:18:23 PM 刘朝洪(99213820)
好像只要调用update()就可以了

2017-04-10 11:18:39 PM 华丽🈴联(1816023692)
@潘雄 是的，但是需要是用正确的方法实现功能，否则以后可能不得不返工。所以方案选定之前，多琢磨和比较，磨刀不误砍柴工[表情]

2017-04-10 11:19:00 PM 刘朝洪(99213820)
但是你不要在paintEvent调用update

2017-04-10 11:20:32 PM 潘雄(1357211280)
正事因为调用update后，会自动的调用paintEvent

2017-04-10 11:21:05 PM 刘朝洪(99213820)
嗯

2017-04-10 11:22:42 PM 潘雄(1357211280)
@华丽联 是的

2017-04-10 11:28:28 PM 刘朝洪(99213820)
@潘雄 你现在绘制有没有采用双缓冲？

2017-04-10 11:30:48 PM 刘朝洪(99213820)
如果没有采用的话，会有问题，图形多了就会有闪烁的效果

2017-04-10 11:31:14 PM 潘雄(1357211280)
还没呢，现在采用的思想是那种重画，已经能实现redo和undo。只是还有个小细节没有处理好

2017-04-10 11:31:24 PM 刘朝洪(99213820)
我刚才看了一下资料，Qt虽然是双缓冲，但是不会自动采用

2017-04-10 11:32:09 PM 潘雄(1357211280)
等下，我去看看双缓冲的例子

2017-04-10 11:32:59 PM 刘朝洪(99213820)
原理就是你先把图形绘制到位图上，然后把位图复制到屏幕缓冲区上

2017-04-10 11:38:16 PM 潘雄(1357211280)
好

2017-04-10 11:39:03 PM 刘朝洪(99213820)
我觉得先可以重新绘制整个图形，至于优化，后面慢慢来

2017-04-10 11:40:03 PM 潘雄(1357211280)
现在做的就是绘制整个图形

2017-04-10 11:42:42 PM 刘朝洪(99213820)
嗯，采用双缓冲绘制整个图形，绝对没有问题的。因为应用绘制过程比系统显示过程要快

2017-04-10 11:43:36 PM 潘雄(1357211280)
嗯，我把这个完成了，在去看双缓冲的

2017-04-10 11:44:17 PM 刘朝洪(99213820)
然后将来在优化显示，如果获取无效的区域，判断图形元素是否与无效区域有交集，如果有才绘制，然后把绘制的区域位图再复制过去，这样也缩减了绘制过程

2017-04-10 11:45:53 PM 潘雄(1357211280)
其实刚开始也是这样做的，结果那个paintEvent函数可能是这写的哪里有问题，一直没弄出来。所以就换了思路

2017-04-10 11:46:06 PM 刘朝洪(99213820)
不过我个人感觉不需要第二步的优化，除非要绘制的图元数量非常巨大

2017-04-10 11:48:11 PM 刘朝洪(99213820)
还有一些其他的优化，如果对于点线的绘图采用异或操作方式，在某些情况下都不需要擦出背景的操作

2017-04-10 11:48:48 PM 刘朝洪(99213820)
如果要把这些优化都考虑进去我觉得必要性不是太大，除非要去钻研技术细节

2017-04-10 11:49:54 PM 潘雄(1357211280)
嗯，那我就先实现一个。到后期如果需要的再来优化

2017-04-11 5:04:04 PM 郎量(47445613)
@梅子 @潘雄 @朱杏子 ， 上午我上课，下午2:30左右碰个头

2017-04-11 5:07:47 PM 潘雄(1357211280)
[图片]

2017-04-11 5:08:57 PM 梅子(1126859953)
好的

2017-04-11 5:14:09 PM 朱杏子(1398550113)
好

2017-04-13 8:24:00 PM 潘雄(1357211280)
@吴竹 在很多程序里面都看到过render这个单词，如何理解这个单词要表达的意思？如：The QGLWidget class is a widget for rendering OpenGL graphics，可以理解成绘图的意思么？

2017-04-13 11:22:52 PM 刘朝洪(99213820)
嗯

2017-04-13 11:23:00 PM 刘朝洪(99213820)
可以这么理解

2017-04-13 11:23:39 PM 刘朝洪(99213820)
这个词属于openGL或者DX里面的

2017-04-13 11:25:55 PM 刘朝洪(99213820)
中文的意思就是渲染

2017-04-14 2:16:12 AM 潘雄(1357211280)
@华丽联 邓导，undo和redo的代码已经上传，您注意查收

2017-04-14 12:28:05 PM 华丽🈴联(1816023692)
@潘雄 好的，谢谢[表情]。周末我有事需要出去一趟，如果我这边没有更新，请继续还没有完成的工作。下周开始我时间会多些。

2017-04-14 4:54:10 PM 潘雄(1357211280)
好的

2017-04-15 7:23:05 PM 朱杏子(1398550113)
[图片]

2017-04-15 7:24:53 PM 朱杏子(1398550113)
邓导，为什么点击project不能出现您建立的那个工程

2017-04-15 7:26:26 PM 朱杏子(1398550113)
[图片]

2017-04-15 7:26:38 PM 朱杏子(1398550113)
没有这个工程

2017-04-16 5:02:58 PM 潘雄(1357211280)
郎导，今天下午开会吧，上午一二节得上课。

2017-04-16 5:50:51 PM 郎量(47445613)
@朱杏子 @潘雄 @梅子 ,今天下午碰个头。     

2017-04-16 5:51:08 PM 郎量(47445613)
@朱杏子 ，我看到你有两个账号， zhuxingzi,  zhuxinzi (你用哪个）。我把你两个都加入project,  你再进去，应该可以看到project

2017-04-16 5:55:54 PM 梅子(1126859953)
收到[表情]

2017-04-16 6:19:42 PM 朱杏子(1398550113)
好的

2017-04-16 7:14:03 PM 朱杏子(1398550113)
我在账号里看见了这个project

2017-04-16 7:14:09 PM 朱杏子(1398550113)
[图片]

2017-04-16 7:14:39 PM 朱杏子(1398550113)
但是每次到这步，就建立不了链接

2017-04-16 7:24:53 PM 刘昕(2389021593)
你没有rsa秘钥应该用口令登录啊

2017-04-16 7:26:22 PM 朱杏子(1398550113)
我直接在password中输入我的账号密码也链接不了

2017-04-16 7:40:43 PM 刘昕(2389021593)
账号口令登录的话要用http
[图片]

2017-04-16 7:51:25 PM 朱杏子(1398550113)
可以了

2017-04-17 4:25:49 AM 郎量(47445613)
@吴竹 ，[表情]。  梅子和潘雄到群文件夹里下载一下 “缩放方案”

2017-04-17 4:41:37 AM 梅子(1126859953)
[表情]

2017-04-17 7:21:55 AM 潘雄(1357211280)
[好的]

2017-04-17 10:20:59 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 18:13:38
"缩放方案.docx" 下载

2017-04-17 10:56:01 PM 华丽🈴联(1816023692)
@吴竹 [表情] 辛苦了。@潘雄 @梅子  一点意见，我们需要可以显示时调节X/Y的比例（ratio）。请一定预留这个选项。菜单里面以及预留了Aspect Ratio (X:Y)的输入。[图片]@朱杏子 smartgit应该没有问题了吧？两个账号， zhuxingzi,  zhuxinzi (你用哪个）？两个容易混淆出错，最好只留一个，我可帮你删除不用的。远程有一些文档可助你加快理解整个项目。

2017-04-17 11:00:47 PM 华丽🈴联(1816023692)
@吴竹 @梅子 @潘雄 实际上菜单定义里面还加入了用户选择Rotation和Orientation的显示。比如平板电脑（手机），显示可以90度横版竖版切换。希望可以做到显示的选择切换（X和Y)，而不需要改变实际数据。

2017-04-17 11:02:07 PM 华丽🈴联(1816023692)
    viewOrientationAct = new QAction(tr("Orientation"),this);                          //取向(Orientation) (参见Windows Display Settings: Landscape, Portrait, Landscape Flipped, Portrait Flipped)    viewRotationAct = new QAction(tr("Rotation"),this);                                //旋转(Rotation) (Rotate View/Display/Screen)    viewMagnificationAct  = new QAction(tr("Magnification"),this);                     //放大(Magnification) (比如Reticle 1X, 4X, 5X)    viewAspectRatio = new QAction(tr("Aspect Ratio (X:Y)"),this);                      //宽高比(Aspect Ratio) = X:Y

2017-04-17 11:03:06 PM 华丽🈴联(1816023692)
上面是optimask.cpp现在第305行左右的代码。

2017-04-17 11:30:15 PM 华丽🈴联(1816023692)
还有图形的正负转换（类似胶片的正胶和反胶），以及镜像显示：    viewParityAct = new QAction(tr("Parity"),this);                                    //奇偶性(Parity) (是否镜像) (Right/Wrong-Reading以及Chrome-Up/Down)    viewToneAct = new QAction(tr("Digitized Tone"),this);                              //极性(Polarity) (数字色调 Digitized Tone) (Clear透明， Dark黑暗) (Display Polygon as Clear or Dark)@吴竹  @梅子  @潘雄 这个在KLayout的菜单里面也有示例[图片]请把这些情况考虑进软件结构。不需要立即全部实现，但是想加的时候要很容易扩展。

2017-04-17 11:31:42 PM 潘雄(1357211280)
好的，这些问题我先记录下来。

2017-04-17 11:38:42 PM 华丽🈴联(1816023692)
关于orientation，windows显示菜单有类似的简单定义[图片]但是我们写显示函数的时候，可否进一步扩展成function SetDisplay(Orientation, XYratio, RotationAngle, Mirror/Flip, Magnification)之类的通用函数。 然后不管用户需求怎么变，一个通用函数就可以处理了。@吴竹 @梅子 @潘雄 请仔细考虑以上需求。辛苦了[表情]

2017-04-18 12:28:30 AM 梅子(1126859953)
邓博士，好的，收到@华丽联 

2017-04-18 12:54:07 AM 朱杏子(1398550113)
我用zhuxinzi这个账号

2017-04-18 12:55:59 AM 朱杏子(1398550113)
zhuxingzi这个账号我登不进去

2017-04-18 7:45:51 PM 梅子(1126859953)
@吴竹 刘导，您好，以下是我实现的多窗口的打开，打开两个文件还好，打开第三个文件时，程序运行会很慢，有时候卡住半天也显示不出来，像这样的问题一般是不是跟内存有关，您觉得有哪些方面可以优化

2017-04-18 7:45:59 PM 梅子(1126859953)
[图片]

2017-04-18 7:54:21 PM 刘朝洪(99213820)
你可以查看一下任务管理器的内存，看看是否占用很多，如果占用不多，应该不是内存的问题。可能是显示的问题，如果频繁刷新图形显示，也会导致问题。

2017-04-18 7:56:59 PM 刘朝洪(99213820)
另外还要检查一下是否有内存泄漏。这么做，你打开任务管理器，打开两个然后关闭，持续几次，看看占用内存是否增加，一直增加，可能有内存泄漏的地方

2017-04-18 8:06:06 PM 梅子(1126859953)
[图片]

2017-04-18 8:06:14 PM 梅子(1126859953)
这是刚开始的情况

2017-04-18 8:06:41 PM 梅子(1126859953)
[图片]

2017-04-18 8:06:48 PM 梅子(1126859953)
打开一个文件

2017-04-18 8:07:17 PM 梅子(1126859953)
[图片]

2017-04-18 8:07:22 PM 梅子(1126859953)
打开两个文件

2017-04-18 8:07:48 PM 梅子(1126859953)
[图片]

2017-04-18 8:07:59 PM 梅子(1126859953)
第三个文件

2017-04-18 8:08:33 PM 梅子(1126859953)
内存感觉没有增加

2017-04-18 8:10:25 PM 梅子(1126859953)
占用内存一直在维持在这种情况[图片]

2017-04-18 8:16:31 PM 梅子(1126859953)
@吴竹 刘导，您说到内存泄露这块，我想请教一下，内存泄露，除了new，要delete，还有木有其他情况会引起同样的问题

2017-04-18 9:09:47 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 18:55:12
"标尺方案.docx" 下载

2017-04-18 9:25:13 PM 华丽🈴联(1816023692)
@梅子 @潘雄 看起来GDSII文件的读写准确性比原来好很多了[表情] 看起来每个文件的内存单独占用并不是很多。但是有没有可能你预留的内存空间预算不够，读到第三个时分配的内存出界了？可否增加初始内存预留malloc( )的大小试试？此外，及时释放 free( )无用内存也很重要。就像房子不定期打扫，那么时间一长就乱了。

2017-04-18 9:29:25 PM 华丽🈴联(1816023692)
每次读取新文件时，是否根据文件大小检查内存是否足够，不够时及时重新分配内存？此外GDSII的文件大小按严格标准是2048比特的整数倍，可以预先设置合适的N*2048比特。

2017-04-18 9:30:56 PM 华丽🈴联(1816023692)
@吴竹 程序调试时是否可以通过设置断点检查占用内存的变化情况？

2017-04-18 9:36:34 PM 华丽🈴联(1816023692)
@梅子 @潘雄 看看这些内存分配和释放的函数：malloc,  free,  calloc, realloc。http://www.cplusplus.com/reference/cstdlib/malloc/时刻记住分配的内存不用时立即释放掉（即free对应的malloc, calloc, realloc）。

2017-04-18 9:51:43 PM 华丽🈴联(1816023692)
@朱杏子 我看到你账号zhuxingzi（username：xzzhu）一个多星期登录，而昨天登录的账号username: zhuxinzi起的Name是zhuxingzi。既然zhuxinzi的拼音是错的，我就将不工作的账号删除，将拼音错误的username更正为zhuxingzi了。现在username: zhuxingzi对应Name也是zhuxingzi。请用zhuxingzi登录试试，用现有密码（或空白密码）。登录成功后，你自己应该可以修改密码。如果有问题，我再重新帮你设置。还是一开始都弄正确好些。

2017-04-18 9:59:45 PM 朱杏子(1398550113)
好的

2017-04-18 10:00:51 PM 梅子(1126859953)
好的，谢谢邓博士@华丽联 

2017-04-18 10:15:14 PM 华丽🈴联(1816023692)
@潘雄 抱歉才发现忘了合并你的合并申请了[表情] 。已经合并至master主干了。这次的合并申请的notes写得很好，请继续[表情]

2017-04-18 10:20:21 PM 刘朝洪(99213820)
@梅子 从你的截图来看，应该不是内存泄漏导致，而是里面某些循坏变成了死循环

2017-04-18 10:21:31 PM 刘朝洪(99213820)
那个92%的CPU是什么情况产生的

2017-04-18 10:21:34 PM 华丽🈴联(1816023692)
@吴竹 [表情]

2017-04-18 10:22:50 PM 刘朝洪(99213820)
要查看内存泄漏，不是查看总的内存，而是查看你的进程所占用的内存数目

2017-04-18 10:23:20 PM 刘朝洪(99213820)
[图片]

2017-04-18 10:24:38 PM 刘朝洪(99213820)
看你运行的进程的CPU还有内存，如果内存一直增加，或者说你关闭文件，接着打开，在关闭，连续好几次，内存一直在增加，这就能判断是内存泄漏

2017-04-18 10:25:12 PM 刘朝洪(99213820)
如果CPU一直很高，那可能有些循坏的判断出现错误，导致无限循环

2017-04-18 10:28:22 PM 刘朝洪(99213820)
另外你问的问题内存泄漏包括那些，除了我们常说的new/malloc分配的内存没有释放外，还有一些内核对象，GDI对象产生后没有关闭，不过我觉得你现在应该很少用到内核对象，如果用Qt封装的GDI对象，也应该不存在泄漏的问题

2017-04-18 10:35:16 PM 刘朝洪(99213820)
[图片]

2017-04-18 10:36:00 PM 刘朝洪(99213820)
我我用klayout打开5个文件，cup和内存占用都很少

2017-04-18 11:09:29 PM 梅子(1126859953)
[图片]

2017-04-18 11:09:41 PM 系统消息(10000)
梅子撤回了一条消息

2017-04-18 11:09:49 PM 梅子(1126859953)
[图片]

2017-04-18 11:10:06 PM 梅子(1126859953)
[图片]

2017-04-18 11:13:38 PM 梅子(1126859953)
那我检查一下又没有地方循环出现问题，现在打开几个文件，关闭文件，再打开几个文件，好像没有什么问题，可是像打开文件卡住的情况时不时会出现

2017-04-18 11:16:18 PM 梅子(1126859953)
92%的cpu是我打开的网页太多，可能电脑东西太多，电脑的确有点卡

2017-04-18 11:17:05 PM 刘朝洪(99213820)
你的程序跑起来后，名字是QtCreator?不太可能吧

2017-04-18 11:17:48 PM 刘朝洪(99213820)
QtCreator是Qt的编译器

2017-04-18 11:19:32 PM 梅子(1126859953)
额，我看错了

2017-04-18 11:22:33 PM 梅子(1126859953)
[图片]

2017-04-18 11:23:20 PM 梅子(1126859953)
卡在这儿了

2017-04-18 11:24:22 PM 梅子(1126859953)
我觉得可能是我内存泄露，或者某些循环判断都有问题，我再仔细查看一下我的代码

2017-04-18 11:24:31 PM 刘朝洪(99213820)
这个CPU有些高。

2017-04-18 11:25:09 PM 梅子(1126859953)
是的，这说明什么问题

2017-04-18 11:25:11 PM 梅子(1126859953)
？

2017-04-18 11:25:13 PM 刘朝洪(99213820)
卡在这个地方应该不太可能是内存泄漏的原因，感觉就是在画图那块

2017-04-18 11:25:45 PM 刘朝洪(99213820)
或者装载什么数据一直没有结束

2017-04-18 11:25:57 PM 刘昕(2389021593)
加一下日志吧

2017-04-18 11:26:17 PM 刘朝洪(99213820)
阻塞了

2017-04-18 11:27:04 PM 刘朝洪(99213820)
用日志的方式吧，或者用debug方式跟踪

2017-04-18 11:28:12 PM 梅子(1126859953)
我还没有用过日志，不知道您们说的日志是一种调试方式，还是指其他工具？

2017-04-18 11:29:33 PM 刘朝洪(99213820)
你自己在你怀疑的地方打印出日志

2017-04-18 11:30:26 PM 刘朝洪(99213820)
跟着程序的流程一直打印日志，你就知道运行在那块，以及那块的时间

2017-04-18 11:32:35 PM 梅子(1126859953)
好的，那我试试看能不能找到问题所在，谢谢！@吴竹 @刘昕 

2017-04-18 11:33:40 PM 刘昕(2389021593)
应该有封装好的专门的日志类，你搜一下

2017-04-18 11:34:29 PM 梅子(1126859953)
好的

2017-04-19 12:32:11 AM 刘朝洪(99213820)
@梅子 你用QtCreator还是用visual studio开发

2017-04-19 1:04:35 AM 梅子(1126859953)
@吴竹 我用的是QtCreator开发的

2017-04-19 1:16:22 AM 梅子(1126859953)
@华丽联 @郎量 @吴竹 @刘昕 刚刚开会的时候，郎老师和潘雄说，潘雄之前写的画图程序，暂时打不开某个GDS文件，所以导致我打开这个文件的时候，就会卡住，打开其他文件都没有问题，谢谢各位博士和导师![表情]

2017-04-19 1:16:25 AM 梅子(1126859953)
[图片]

2017-04-19 5:35:27 PM 郎量(47445613)
@潘雄 ，把鼠标画图过程中遇到的问题尽快写个文档，上传一下， 让刘朝洪给一些建议。

2017-04-19 6:44:11 PM 潘雄(1357211280)
@吴竹 
刘导，这是画图问题的文档，可能解释的不够明确，如您有疑问的地方，可注明。[表情]谢谢刘导@郎量 本来是想借此机会来学习学习vivso画框架图，我再慢慢调整，朝这个方向民展，图文并茂。多谢郎导提醒[表情]

2017-04-19 11:16:40 PM 华丽🈴联(1816023692)
@梅子 [表情] 整体结构进展顺利么？@朱杏子 登录是否成功？@潘雄 AWGOUTLINE.GDS打开死循环的问题需要解决。\optixera\optimask\src\File\GDSII_Test_File下的所有文档都需要可以被打开。可以找刘导帮忙看看怎么借鉴KLayout和Yuda的GDS2Viewer的GDSII读写的代码。

2017-04-19 11:18:35 PM 华丽🈴联(1816023692)
框架图也可以用XMind画。XMind做头脑风暴很方便的。

2017-04-19 11:20:58 PM 潘雄(1357211280)
这个读写打不开实在不知道要从何问起？不过等我把手头的画图工作完成了，再去好好的检查一边。头脑风暴？

2017-04-19 11:22:07 PM 华丽🈴联(1816023692)
此外，有空时开始看看光栅基本理论，开始了解研究的两个器件。其实原理明白了很简单的，但是可做的工作又是很多的。有问题尽管提出。@潘雄 brain·storm  头脑风暴 produce an idea or way of solving a problem by holding a spontaneous group discussion.

2017-04-19 11:24:52 PM 刘朝洪(99213820)
@潘雄 我看了你的文档，应该是你使用方法有些差异，你重载paintEvent()这个没有问题的

2017-04-19 11:25:56 PM 刘朝洪(99213820)
QGraphicsView::paintEvent()实现了绘制场景的基本功能，你如果只是重载，没有实现这些功能，那么你就没法画图

2017-04-19 11:26:43 PM 华丽🈴联(1816023692)
读写打不开可以将文件切断，看看在哪一段出问题。当然切断需要对GDSII格式非常熟悉。也可以用KLayout/LEdit打开后，删除部分后另存为GDSII后再打开看是否成功。可以按照某个规则去删除，比如移动区域，或者构元层级，或者二分法（每次检查一半），等等。

2017-04-19 11:26:53 PM 刘朝洪(99213820)
void MyGraphView::paintEvent(QPaintEvent *event){    QGraphicsView::paintEvent(event);    ...自己的代码}

2017-04-19 11:27:33 PM 刘朝洪(99213820)
你要在这个函数里面调用基类的painEvent()

2017-04-19 11:27:52 PM 刘朝洪(99213820)
要么你直接把基类的该函数的实现代码全部复制过来

2017-04-19 11:29:43 PM 潘雄(1357211280)
您先等等，我试试

2017-04-19 11:30:31 PM 华丽🈴联(1816023692)
@吴竹 [表情]辛苦了。程序写到目前阶段（界面基本完成），我在想我们是否应该逐步减少对Qt的依赖，而采用更多标准C的库，除非万不得已？

2017-04-19 11:30:32 PM 刘朝洪(99213820)
双缓冲绘图，就是先把图形绘制在位图上，然后把位图复制过去，因为图形绘制的速度比图形显示的速度高了几个数量级

2017-04-19 11:30:53 PM 刘朝洪(99213820)
标准C库没有GUI的

2017-04-19 11:32:00 PM 刘朝洪(99213820)
@潘雄 你用Qt4.8还是Qt5.8

2017-04-19 11:32:08 PM 华丽🈴联(1816023692)
好吧，总是觉得不要依赖Qt太多。

2017-04-19 11:32:49 PM 潘雄(1357211280)
Qt5.4

2017-04-19 11:32:59 PM 刘朝洪(99213820)
不过我举的界面这个东西，没有完全兼容的，因为不同的操作系统有不同的界面风格，Qt也做不到完全兼容

2017-04-19 11:37:03 PM 潘雄(1357211280)
是的，刘导您真的说到点了，这个问题足足困惑了我两个星期，谢谢[表情]，接下来我的画图工作也可以有进展 了。[表情]

2017-04-19 11:40:20 PM 潘雄(1357211280)
@华丽联 好的。您说的方法，我会试试的，到时候会有KLayout的相关问题会问您的。

2017-04-20 12:06:28 AM 梅子(1126859953)
@华丽联 暂时没有什么问题

2017-04-20 11:31:54 PM 郎量(47445613)
@潘雄 @朱杏子 @梅子 2:50开会

2017-04-20 11:32:13 PM 潘雄(1357211280)
好的

2017-04-20 11:37:35 PM 梅子(1126859953)
好的

2017-04-21 4:26:01 PM 潘雄(1357211280)
邓导，这周和梅子的程序合需要一点时间，现在还没合并好

2017-04-21 7:29:34 PM 潘雄(1357211280)
@吴竹  刘导，这里请教您一个关于坐标的问题

2017-04-21 9:11:04 PM 系统消息(10000)
[图片] 潘雄 分享文件 10:29:43
"实时显示画图区窗口坐标问题.docx" 下载

2017-04-21 9:29:56 PM 华丽🈴联(1816023692)
@潘雄 好的。合并还是定期好，间隔越长越难合并。杏子开始进入状态了么？

2017-04-21 9:58:07 PM 华丽🈴联(1816023692)
@潘雄 看到你的合并申请了，期待完全版。我在看是否可以解决你读取ＧＤＳＩＩ文件死循环的问题：即在读取的子程序Document::loadfile中加入屏幕输出（或者文件输出），输出读取过程中的文件字节内容，字节地址，和当前时间，查看该输出应该就可以定位出问题的位置了。

2017-04-21 10:24:02 PM 华丽🈴联(1816023692)
@潘雄 已经合并你的合并申请至Master主干。可能画图的工作区域设置需要检查。下图是我试画图的结果，画图区域限于表示的红色区域内，而实际上应该与整个tab的工作区域相同。[图片]

2017-04-21 11:09:22 PM 华丽🈴联(1816023692)
@吴竹 几个问题：1. 程序大了之后，怎么检查某个函数并没有被使用（冗余）？2. 怎么设置（或撤销）很多行（或整个区域）断点。（鼠标一一点击只适合于断点行比较少的情况）。

2017-04-21 11:21:45 PM 华丽🈴联(1816023692)
@潘雄 其实可以直接用断点调试程序debug，查找死循环的位置。见下图，打开AWGOUTLINE.GDS时，此文件比其它文件不一样处是，开始处有很大一块全0的区域。你的程序读完全0区域之后，马上出错了。在gds2reader.cpp的835行m_ucharBuf变量读出来的[176][177][178][179]四个字节之后一直死循环重复(见图右方观察窗内选中的四行）。对应的GDSII二进制文档打开之后却应该是  06 2202 0003 等等如选中所示。（在设置断点时，如果想查看某变量，就选中该变量，点击右键，选择“Add Expression Evaluator"即可添加查看）请用我上述方法设置断点，Debug-->Start Debugging来解决这个死循环问题）[图片]

2017-04-21 11:28:24 PM 华丽🈴联(1816023692)
还有，gds2reader.cpp的830行 while(1) ｛｝不建议使用永真的while(1)，如果break设置不好，可能就漏网之鱼变死循环了。建议使用读取    ”剩余的字节长度  ” 为循环条件，这样循环一定会抵达一个确定的结束条件。

2017-04-22 12:10:08 AM 潘雄(1357211280)
@华丽联 邓导，您说打不开程序是那个的0的原因么？为什么那个文件会有那么多的0.Qt里面的调试不怎么会用，我尝试用QDebug调试吧。您说的“剩余的字节长度”这个如何来判断？

2017-04-22 7:20:15 AM 潘雄(1357211280)
@华丽联 谢谢邓导，您说的调试方法，我明白了。

2017-04-22 8:21:21 AM 潘雄(1357211280)
@华丽联 杏子适应的很快。现在在熟悉qt编程，也开始参与了编程工作。

2017-04-22 10:15:00 AM 华丽🈴联(1816023692)
@潘雄 很好，找到问题的位置，知道调试方法，解决问题应该很快了。见 \optixera\optimask\dev\GDSII格式研究.docx 第5页，同理应用于AWGOUTLINE.GDS如下。选中的区域为【FONTS】 Record（字体）00B4 = 180个比特 （16进制00B4 = 10进制 180。所有字节如选中所示）；2006 = FONTS （此记录型号本身占掉2-byte Signed Integer）；接下来的174比特（180-2-2=174）（348个1-byte String）是Fonts信息；而该区域大部分字节为00。[图片]然后继续到下一个区域，应该是0006 2202 0003，如下。0006表示6个字节；2202查表发现是Generations，表示备份数（查GDS_II_Stream_Format_Manual_6.0_Feb87.pdf第4-14页）；0003是缺省值。[图片][图片]Generations这一段在GDSII格式研究.docx文档里面是没有的，可能你就是因为没有考虑这个条件，死循环在此了。之后的区段走入正常，下面是【UNITS】 Record（长度单位），见 \optixera\optimask\dev\GDSII格式研究.docx 第6页；[图片]之后是 【BGNSTR】 Record（Begin of Structure，结构起始）：001C0502006F000A00140015002F0000006F000A00140015002F00000008一切走入正常。。。 

2017-04-22 10:46:45 AM 华丽🈴联(1816023692)
关于   读取    ”剩余的字节长度  ” 为循环条件，以AWGOUTLINE.GDS为例，PSPad打开文件AWGOUTLINE.GDS可以看到文件结尾地址为  0x 3247 0E0F  = decimal 843517455，这个即为文件总字节数。你应该有办法在读取开始时查到（或者算到）这个总字节数，设置它为计数器（即循环条件）。之后每次读取一段之后（读取不成功处，可以报错后前行），该计数器减掉已读取的长度。当文件读到结尾时，计数器会变为0，此时循环中断即可。这样循环一定会抵达一个确定的结束条件。

2017-04-22 10:59:57 AM 华丽🈴联(1816023692)
关于 " Qt里面的调试不怎么会用，我尝试用QDebug调试吧。"其实我也是初次使用Qt Debug，觉得并不难。（我不知道QDebug，说不定比Qt Debug更复杂。）程序调试基本思路是一致的：即顺着代码流程走，在关键处设置断点，显示查看关键变量值及其变化。作为常识，我认为程序代码的可读性，可移植性，可维护性等非常重要。好的程序一定要让他人很容易理解，你去读别人的代码也希望很容易理解。希望写代码时一直有这个原则，代码才会高质量。上次说过，写代码和写文章是类似的--希望思路清楚，语句明确，言简意赅。

2017-04-22 12:00:37 PM 华丽🈴联(1816023692)
@潘雄 我之前的死循环位置并没有检测准确，才发现你的m_ucharBuf对每一区段是重新读取的。但是调试方法和原则依然是有效的。只要你能够显示输出读取过程中的文件字节内容，字节地址，和当前时间，查看该输出应该就可以定位出问题的位置了。仍然建议你显示当前字节的地址，以及使用读取    ”剩余的字节长度  ”计数器 为循环条件。

2017-04-22 1:11:17 PM 华丽🈴联(1816023692)
@潘雄 应该找到问题的位置了。GDSII文件AWGOUTLINE.GDS读取实际上是完成了的，但是从bool CGDS::ReadGDSPlain(QString filename) 进入 MakeCrossRef()  （第869行）后在双重循环开始时出错。[图片]AWGOUTLINE.GDS文件没有构元分级，只有一级（FLAT），这是要注意的。

2017-04-22 1:25:23 PM 华丽🈴联(1816023692)
@潘雄 @朱杏子 目前程序对于然后FLAT的构元结构都会出错。就是MakeCrossRef()没有处理好特殊情况。我随便同理类推测试AWGPINWBCB.GDS，果然也进入死循环。[图片]注意对于程序和算法，特殊情况和边界条件非常重要。请时刻注意。并不是很建议重写所有代码，要记住代码是要经历过很多次调试的（包括准确性和速度效率）。如果有现成的尽量先借鉴着，等我们框架好了之后再全部重新写。

2017-04-22 1:28:17 PM 华丽🈴联(1816023692)
程序对于任何FLAT（没有构元分级）的构元结构都会出错。就是MakeCrossRef()没有处理好特殊情况。

2017-04-22 6:52:11 PM 刘朝洪(99213820)
@潘雄 第一个是测试代码

2017-04-22 6:57:26 PM 刘朝洪(99213820)
@华丽联 断点全部取消在visual studio中调试/取消所有端点，QtCreator在调试中，打开断点窗口，右键就有删除全部断点。断点相关的功能应该都是在调试菜单里面

2017-04-22 6:59:25 PM 刘朝洪(99213820)
检查函数有没有冗余，这个属于性能分析了，方法倒是有，不过最好在写代码的时候注意

2017-04-22 7:06:34 PM 潘雄(1357211280)
@吴竹 好的，谢谢刘导了

2017-04-22 7:41:17 PM 潘雄(1357211280)
[图片]刘导，用了您的方法，确实可以实时显示了。不过好像坐标不是Tab1子窗口的坐标。

2017-04-22 7:49:45 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 09:51:49
"实时显示画图区窗口坐标问题_解答.docx" 下载

2017-04-22 7:58:33 PM 刘朝洪(99213820)
那你用我说的第二种方法，因为我提供的这种方法是客户区坐标，并不是地图坐标

2017-04-22 7:59:55 PM 潘雄(1357211280)
@吴竹 好的，谢谢刘导了

2017-04-22 8:00:09 PM 刘朝洪(99213820)
在TAB1里面的鼠标移动事件里面把坐标给状态栏，可以通过事件或者直接调用statusBar也是可以的

2017-04-22 8:21:06 PM 潘雄(1357211280)
直接怎么调用？

2017-04-22 8:23:25 PM 潘雄(1357211280)
[图片]这是Tab1窗口下的mouseMoveEvent(),我应该在里面做什么？

2017-04-22 9:20:55 PM 梅子(1126859953)
@华丽联 邓博士，您好！上周杏子完成的工具条还有我搭建的框架已经合并好，并上传了，和潘雄的程序合并还需要点时间，等我们合并好了，再上传给您。

2017-04-22 9:21:31 PM 华丽🈴联(1816023692)
@梅子 好的，谢谢！

2017-04-23 2:56:01 AM 刘朝洪(99213820)
@潘雄 Tab1里面的鼠标移动事件要求在状态栏里面显示，我觉得有两种方法，一种就是直接调用，Tab1获取父窗口的QMainWindow的引用，然后通过它得到状态栏的引用，然后写入坐标进入状态栏。第二种方法就是通过事件也就是信号，在ab1里面的鼠标移动事件获取坐标然后发送信号，而再QMainWindow针对这个信号建立信号槽，在QMainWindow的信号响应函数里面把数据写入状态栏。

2017-04-23 2:56:36 AM 刘朝洪(99213820)
这两个方法我没有做测试，你可以试一下，我觉得问题不大的，如果可能，尽量第一种方式，效率高

2017-04-23 4:41:42 AM 梅子(1126859953)
@华丽联 邓博士，刚刚和潘雄一起把程序合并好了，最新完整版本已经上传到远程服务器，请查收。

2017-04-23 5:18:10 AM 潘雄(1357211280)
好的，谢谢刘导，我会先试试第一种。@吴竹 

2017-04-23 6:53:51 AM 潘雄(1357211280)
@华丽联 邓导，您把这月的任务文档放在哪个文件里，我没有看到。

2017-04-23 7:51:00 AM 潘雄(1357211280)
@华丽联 文件找到了

2017-04-23 10:23:22 PM 华丽🈴联(1816023692)
@梅子 谢谢。合并有冲突，已解决。编译失败，调试中。

2017-04-23 10:25:04 PM 华丽🈴联(1816023692)
[图片]

2017-04-23 10:32:26 PM 梅子(1126859953)
好的，邓博士，这个可能是合并的时出了问题，不过昨天我们在自己电脑编译能成功，待会儿我跟潘雄一起看看再给您答复

2017-04-23 10:35:34 PM 华丽🈴联(1816023692)
好的，我也继续检查。潘雄close了你的合并申请，是有意还是误操作？

2017-04-23 10:40:42 PM 华丽🈴联(1816023692)
@梅子 我checkout以及Pull你的分支来编译，好像也有同样的问题。看看你的远程分支和本地是否一致？是否commit后忘了PUSH？

2017-04-23 10:46:43 PM 梅子(1126859953)
可能是误操作，不过昨天申请两次，第一次中午申请的是和杏子合并程序，第二次晚上申请的是和潘雄合并好的程序，好像不能同时申请两个，所以我们就把第一次的关闭了

2017-04-23 10:47:27 PM 华丽🈴联(1816023692)
但是最后一次的也被关闭了的。

2017-04-23 10:49:20 PM 梅子(1126859953)
那可能是不小心的，我现在在宿舍，过几分钟到实验室了再看看您刚刚说的问题

2017-04-23 10:51:06 PM 潘雄(1357211280)
哦，不小心关闭了，我以为是我以前的申请。

2017-04-23 10:51:13 PM 潘雄(1357211280)
[图片]

2017-04-23 10:51:42 PM 系统消息(10000)
潘雄撤回了一条消息

2017-04-23 10:52:09 PM 潘雄(1357211280)
不过为啥我能关闭梅子的申请

2017-04-23 10:54:01 PM 华丽🈴联(1816023692)
@梅子 好的，谢谢。就试试远程分支是否与本地一致，是否可编译。@潘雄 好像每个人都可以关闭其他队员的合并申请。

2017-04-23 10:55:52 PM 华丽🈴联(1816023692)
没问题，遇到问题解决问题才能更好提升。

2017-04-23 11:20:18 PM 郎量(47445613)
@梅子 @潘雄 @朱杏子 今天下午4点半开会

2017-04-23 11:21:00 PM 潘雄(1357211280)
我能两的好像都没有问题，邓导，您截一个完整的图，给我们看看

2017-04-23 11:21:20 PM 梅子(1126859953)
[图片]我们打开没有问题

2017-04-23 11:21:23 PM 潘雄(1357211280)
好的，郎导

2017-04-23 11:21:33 PM 梅子(1126859953)
好的@郎量 

2017-04-23 11:26:47 PM 朱杏子(1398550113)
好的

2017-04-24 6:21:17 PM 潘雄(1357211280)
@华丽联 [图片]

2017-04-24 6:24:41 PM 华丽🈴联(1816023692)
@潘雄 这段话是网上搜索复制的。我看看还能不能找到原文。关于qrchttp://www.reviversoft.com/zh-cn/file-extensions/qrc 

2017-04-24 6:26:00 PM 潘雄(1357211280)
好的

2017-04-24 6:26:07 PM 华丽🈴联(1816023692)
@潘雄 @梅子 还在调试，编译还是没有通过。我明白你们本机肯定可以通过，但是不知道你本地文件是否commit之后被PUSH上去远程。我再看看。

2017-04-24 6:26:59 PM 潘雄(1357211280)
您把程序截个完整的图给我们看看

2017-04-24 6:27:22 PM 潘雄(1357211280)
让我看看错误是什么

2017-04-24 6:28:22 PM 华丽🈴联(1816023692)
好的，等等。如果调试还是不成功，就需要你们用FreeFileSync比较一下本地和远程的文件。

2017-04-24 6:29:08 PM 华丽🈴联(1816023692)
找到原文了：Qt中的相对路径和绝对路径http://www.magicsite.cn/blog/mobile/QT/QT401693.html 

2017-04-24 6:30:36 PM 华丽🈴联(1816023692)
http://blog.csdn.net/dbzhang800/article/details/6363165总体原则是尽量用相对路径。容易确保不同机器，不同安装目录，都不要额外设置工作。

2017-04-24 6:37:56 PM 梅子(1126859953)
[图片]@华丽联 

2017-04-24 6:39:06 PM 梅子(1126859953)
邓博士，我的远程和本地是一样的

2017-04-24 6:49:52 PM 潘雄(1357211280)
[图片]邓导，您是不是这个错误

2017-04-24 6:58:24 PM 潘雄(1357211280)
我刚刚在网页上下载了梅子的程序，运行结果是这个样子的。原因是这个里面没有Edit这个文件，我看梅子已经上传了这个文件，状态为add。但是我下载下来的没有这个文件。原因不明。改正为：添加上梅子上传的Edit文件

2017-04-24 6:59:09 PM 潘雄(1357211280)
[图片]

2017-04-24 7:16:18 PM 潘雄(1357211280)
从梅子网页上下载的有Edit这个文件，只是在打开工程的时候，还没有添加到工程中，看下图将Edit文件添加到工程即可。[图片]

2017-04-24 7:16:44 PM 潘雄(1357211280)
@华丽联 

2017-04-24 8:09:23 PM 华丽🈴联(1816023692)
@潘雄 很好[表情]。原因是因为Optimask.pro文件没有上传，而我们需要在该文件中手动添加\Edit目录。我习惯用文本输入。应该没有问题了。

2017-04-24 8:23:34 PM 华丽🈴联(1816023692)
@梅子 Optimask.pro是可以上传的，它仍然属于源代码文件。其它编译产生的文件可以加入ignore清单。谢谢。

2017-04-24 8:24:52 PM 梅子(1126859953)
好的，邓博士，下次我会记得上传的。

2017-04-24 9:53:57 PM 华丽🈴联(1816023692)
@梅子 @潘雄 @朱杏子 新的版本终于调试出来了。总体进步显著[表情][表情]

2017-04-24 9:55:39 PM 郎量(47445613)
@华丽联 下个月的任务我调整了一下，上传到群文件了。 其中有些需求分析还不清楚，邓博士先补充一下，如果我还不清楚，我们可能需要微信上沟通一下。

2017-04-24 9:56:26 PM 系统消息(10000)
[图片] 郎量 分享文件 12:56:26
"20170423-0520任务安排v1.docx" 下载

2017-04-24 10:40:35 PM 华丽🈴联(1816023692)
有些问题需要继续修改，我也加在文档后面了。[图片]1. 

2017-04-24 10:47:40 PM 华丽🈴联(1816023692)
@郎量 加入了问题回答。有问题再详谈。上图显示需要的功能性修改目前还没有完成，请安排继续完成。谢谢。

2017-04-24 10:51:50 PM 华丽🈴联(1816023692)
@潘雄 1. 周末已帮你检测出读取GDSII文件死循环位置所在。请修改。这个应该很快可以改好的。程序对于任何FLAT（没有构元分级）的构元结构都会出错。就是MakeCrossRef()没有处理好特殊情况。AWGOUTLINE.GDS文件没有构元分级，只有一级（FLAT），这是要注意的。2. 你上图显示的GDSII文档 410.gds，可见图形显示（旋转）并没有完全正确。因为这是基本功能，所以请继续修改正确。[表情]

2017-04-24 10:54:00 PM 华丽🈴联(1816023692)
@吴竹 请继续帮助确定方案。构层面板的排序和组合（Group）à排序OK。但需要树形结构和TableModel的嵌套。谢谢。

2017-04-24 10:55:24 PM 华丽🈴联(1816023692)
@大家   远程 \optixera\optimask\dev  已经加入新的文档，请同步。

2017-04-24 11:00:32 PM 华丽🈴联(1816023692)
@梅子 @潘雄 @朱杏子 远程Master主干已经合并你们所有请求，请PULL同步一下。（文本修改了Optimask.pro，和你们的不一致。现在处理，免得日后冲突。）请参照“20170423-0520任务安排v2.docx”计划工作。谢谢。

2017-04-24 11:24:26 PM 潘雄(1357211280)
@华丽联 好的。

2017-04-24 11:29:56 PM 潘雄(1357211280)
@华丽联 FLAT是什么？ 我在Manual中没有找到

2017-04-24 11:30:31 PM 梅子(1126859953)
好的@华丽联 

2017-04-25 7:34:20 PM 华丽🈴联(1816023692)
flat就是指构元没有层次结构，全部由基本图形构成，没有引用任何其他构元。将有层次结构的构元变成flat的构元这个动作被称为flatten

2017-04-25 11:23:55 PM 潘雄(1357211280)
郎导，如果事不多，我们能四点开会？

2017-04-25 11:38:46 PM 郎量(47445613)
可以，四点开会

2017-04-25 11:39:14 PM 潘雄(1357211280)
好的[表情]

2017-04-26 2:14:15 AM 潘雄(1357211280)
@吴竹 有个关于选中绘制图形的问题。

2017-04-26 2:21:09 AM 刘昕(2389021593)
根据鼠标位置，挨个计算哪个图形在这个位置附近能被拾取到。这里需要@华丽联 定一下，多边形是通过边框拾取还是通过面积拾取

2017-04-26 2:29:28 AM 潘雄(1357211280)
@刘昕 刘博士，这个有点抽象，不是太懂您说的意思？选中是一个图形，去拖动。这个操作应该是什么样子的？

2017-04-26 2:33:22 AM 刘昕(2389021593)
拾取和拖动是两件事，拾取就是刚才说的计算坐标；拖动则是把选中图形在旧位置擦除，在新位置重新绘制

2017-04-26 2:34:49 AM 刘昕(2389021593)
这些qt应该有封装吧，你查查qt的文档

2017-04-26 2:36:28 AM 潘雄(1357211280)
好，我先搜索一下

2017-04-26 2:36:33 AM 潘雄(1357211280)
[图片]

2017-04-26 2:36:50 AM 刘昕(2389021593)
[图片]

2017-04-26 2:37:00 AM 刘昕(2389021593)
网上能搜到一堆例子

2017-04-26 2:37:30 AM 刘昕(2389021593)
http://stackoverflow.com/questions/28049471/move-qgraphicsitem-only-when-pressing-inside-the-shape-otherwise-drag-scene

2017-04-26 2:39:09 AM 潘雄(1357211280)
是的，这个看到过

2017-04-26 2:40:34 AM 潘雄(1357211280)
没想到是这样用的[表情]

2017-04-26 2:42:12 AM 刘昕(2389021593)
另外从交互角度，拾取到的图形最好换个绘制方法用户才能看到，这个不知道qt有没有封装，你查一下

2017-04-26 5:15:36 AM 郎量(47445613)
@华丽联 任务我修改了一下，有些任务需要你再说明详细一些。  上个月未完成的内容，例如：潘雄GDS文件的读取问题，梅子构层号码的问题，我让他们在这个月抽空补上代码。看看这个月能否顺利完成安排的任务。

2017-04-26 5:22:04 AM 郎量(47445613)
@吴竹 ， 梅子有两个问题，1是NaviDock视图导航区域，2是group和ungroup问题。 她也会发一个文档给你。其中，NaviDock视图导航区域请先考虑一下。

2017-04-26 5:44:14 PM 系统消息(10000)
[图片] 潘雄 分享文件 17:14:22
"选中策略问题潘雄.docx" 下载

2017-04-26 5:44:15 PM 系统消息(10000)
[图片] 郎量 分享文件 20:03:31
"20170423-0520任务安排v3.docx" 下载

2017-04-26 9:32:42 PM 华丽🈴联(1816023692)
@潘雄 关于拾取（Select），对应Edit 菜单。拾取有几种方案：[图片]Layers:  此时出现layer清单对话框。然后对应所有选中（Checked）的layer构层号，选取当前构元中所有这些构层上的图形。对于当前构元的子构元不需要操作。Cells： 此时出现Cell清单对话框。所有选中（Checked）的cell构层。In：  这个是刘博士说的面积拾取。Side：这个是刘博士说的边框拾取。Last：撤销当前的拾取，重复之前一次的拾取（如果有的话）。All：选择当前构元上所有的图形和所有子构元。

2017-04-26 9:43:36 PM 华丽🈴联(1816023692)
In：  面积拾取。选择所有鼠标框中区域（矩形）内的所有图形和所有子构元。Side：边框拾取。选择所有鼠标框中矩形边界碰到的所有图形和所有子构元。

2017-04-26 9:45:04 PM 华丽🈴联(1816023692)
至于Deselect（撤销拾取），完全是对应Select（拾取）反操作。

2017-04-26 10:54:44 PM 华丽🈴联(1816023692)
@郎量 任务文档问题回答完毕。竟然8页了。


2017-04-26 11:00:37 PM 华丽🈴联(1816023692)
这篇Qt文章可以看一下。http://m.2cto.com/kf/201609/545937.html 

2017-04-26 11:01:16 PM 郎量(47445613)
@华丽联 ，面积拾取和边框拾取（会选中多个图元），若只需要选中其中一个图像或者构元。这个有这种情况吗？如何处理

2017-04-26 11:02:10 PM 郎量(47445613)
@刘昕 ”另外从交互角度，拾取到的图形最好换个绘制方法用户才能看到“， 这句话是什么意思？

2017-04-26 11:04:15 PM 刘昕(2389021593)
就是拾取的图形要画得不一样，比如换个颜色或者加粗，这样用户才知道是选中了。点了没反应，用户就不知道是不是选中了

2017-04-26 11:05:01 PM 华丽🈴联(1816023692)
@郎量 1. 会有这个情况，这是可能用边框拾取比较合适些。2. 每个层或者Cell都是可以被Protect的，对于所有用户//构元保护(Protect the Cell)或//构层保护(Protect)的，就不能被选中。这个可能这个月没有时间做这个。但是以后一定要做的。

2017-04-26 11:13:16 PM 华丽🈴联(1816023692)
@梅子 可以先看看这篇文章 Qt model and view http://blog.sina.com.cn/s/blog_6cf921f301018hcj.html 

2017-04-26 11:19:40 PM 梅子(1126859953)
好的，谢谢邓博士，这两天一直在做缩放的工作，我之前初步的实现也是基于您给的这个框架，只是要加入group这个功能，可能还需要我仔细研究研究这个框架怎么和group这个功能结合

2017-04-26 11:22:17 PM 华丽🈴联(1816023692)
@刘昕 多谢指导 [表情]。@郎量 “拾取的图形要画得不一样，比如换个颜色或者加粗”，希望这个对比（颜色，亮度，粗细等）比较明显些。有些软件这个对比不明显，用户就很头疼了。

2017-04-27 6:35:24 PM 郎量(47445613)
@刘昕 @华丽联 清楚了

2017-04-27 11:10:54 PM 郎量(47445613)
@潘雄 估计三点半开会。我到时候通知大家

2017-04-27 11:25:25 PM 潘雄(1357211280)
好的

2017-04-28 12:18:27 AM 郎量(47445613)
@潘雄 很抱歉，有点事情，估计4:30开会。

2017-04-28 12:19:43 AM 潘雄(1357211280)
那就4：30吧

2017-04-28 9:05:07 PM 潘雄(1357211280)
程序已经合并好，我在clone,不过上传还需要一点时间.[图片]

2017-04-28 9:06:43 PM 华丽🈴联(1816023692)
@潘雄 辛苦了。五一假期愉快！

2017-04-28 9:08:26 PM 潘雄(1357211280)
同乐，同乐[图片]

2017-04-28 9:08:40 PM 华丽🈴联(1816023692)
[图片]

2017-04-28 9:09:09 PM 华丽🈴联(1816023692)
这个有喜感

2017-04-28 9:09:31 PM 潘雄(1357211280)
大图像

2017-04-28 9:11:25 PM 华丽🈴联(1816023692)
放假回家，旅游，还是在校？

2017-04-28 9:14:35 PM 潘雄(1357211280)
没事一般会在校。美国有五一么

2017-04-28 9:23:07 PM 华丽🈴联(1816023692)
美国加拿大的劳动节在9月第一个周一。美国加拿大不过国际劳动节，国际劳动节是无产阶级革资本家命的。

2017-04-28 9:54:12 PM 系统消息(10000)
潘雄撤回了一条消息

2017-04-28 9:54:28 PM 潘雄(1357211280)
@华丽联 程序 已经上传，如果有问题，可随时联系我

2017-04-28 10:09:56 PM 潘雄(1357211280)
@华丽联 涨知识了[表情]

2017-04-28 11:25:37 PM 华丽🈴联(1816023692)
我这里改了几个文件，冲突之后全乱了。还在处理。你们先忙自己的吧。假期愉快。

2017-04-28 11:26:53 PM 系统消息(10000)
[图片] 潘雄 分享文件 14:26:52
"optimask-20170428pmz.rar" 下载

2017-04-28 11:27:38 PM 潘雄(1357211280)
这里有一份我修改的完整程序，您可以对比着看

2017-04-28 11:30:40 PM 华丽🈴联(1816023692)
好的，这样我有个比较。

2017-04-28 11:32:26 PM 潘雄(1357211280)
好的，您有问题可以随时q我，她们的程序，我全看了，一般的问题，我都可以解决！

2017-04-28 11:35:36 PM 华丽🈴联(1816023692)
好的，现在目前不是程序代码问题。是在和SmartGit搏斗[表情]。SmartGit对于我这种喜欢严谨的人来说有点过于自由。不过我好像有让任何应用程序出错的传统[表情]。

2017-04-28 11:39:06 PM 系统消息(10000)
潘雄撤回了一条消息

2017-04-28 11:40:00 PM 潘雄(1357211280)
您总结的smartgit笔记，对我们新手来说确实比较有用，快速适应！

2017-04-28 11:41:25 PM 刘昕(2389021593)
以后规范一下版本管理吧，合并代码测试通过后打个tag

2017-04-28 11:43:05 PM 潘雄(1357211280)
[图片]

2017-04-28 11:46:28 PM 华丽🈴联(1816023692)
@潘雄 阅读笔记省下来的时间是大家的时间。你们可以有文档的地方也尽量做一下文档。@刘昕 是的，可能版本管理需要更好规范一下。有的分支如果没有及时定期和Master同步，说不定我这边合并时就有冲突了。可能需要你提一下版本管理规范。[表情]

2017-04-28 11:50:32 PM 华丽🈴联(1816023692)
@潘雄 合并通过了，但是编译又有错[图片]今天先这样，睡去了。明天我再对应你的ZIP包查询具体问题在哪。

2017-04-28 11:57:04 PM 潘雄(1357211280)
好的。后来我又commit和push一个文件叫graphicsview.h把这个文件替换掉就可以了。

2017-04-29 12:00:21 AM 潘雄(1357211280)
第一次commit的时候，忘记了这个文件。您把这个文件替换就应该可以了@华丽联 good night

2017-04-29 6:06:16 PM 华丽🈴联(1816023692)
@潘雄 你远程的graphicsview.h第二次commit后还是老版本。ZIP文档里的是新版本。[图片]

2017-04-29 6:22:34 PM 华丽🈴联(1816023692)
如上图比较，远程dev_panxiong下不管是通过web浏览还是本地checkout+Pull都没有新版本的第9行class QWheelEvent；但是ZIP压缩包下的graphicsview.h确实有很多扩展代码。所以应该是你并没有成功PUSH。或者commit后忘了Push，或者Push没有成功（可即时查看output下的状态）。此外，你个人分支应该是很久没有与Master主干同步。很多我之前传上的文件并没有在你的个人分支下。正确的操作方法是，1. 每周开始需要从远程master主干checkout2. PULL （远程master主干）3. checkout本地个人分支，4. Merge合并Master主干至个人分支5. 开始本地个人分支的一周修改工作，修改确认之后commit6. 每周末后将本地commit需要PUSH至远程对应的个人分支。7. 发送Merge Request合并申请，要求将个人分支合并到Master上。8. 我来处理同步和远程主干更新。9. 你们重复从第一步开始。必须工作之前先将远程Master同步到你们个人分支上。目前看来，你们每周有本地分支的commit和push工作（即5，6，7步），但是没有第1，2，3，4步（即第9步）。请一定记住每周开始时从远程Master同步过来个人分支。这很重要。不然时间一长问题就累计多了，不好处理了。

2017-04-29 6:31:11 PM 华丽🈴联(1816023692)
具体第四步，可以参看  ”SmartGIT使用笔记.doc“ 第38页的图文。[图片]

2017-04-29 7:08:08 PM 潘雄(1357211280)
[图片]

2017-04-29 7:08:51 PM 潘雄(1357211280)
您现在编译通过了吗？

2017-04-29 8:56:31 PM 华丽🈴联(1816023692)
在用FreeFileSyn比较，应该可以通过。

2017-04-29 9:05:06 PM 潘雄(1357211280)
好的，有需要我在去重新push

2017-04-29 9:13:07 PM 华丽🈴联(1816023692)
@潘雄 通过了。SmartGit使用，大家需要好好协调统一一下。我看看代码，有问题再问你们。假期愉快!

2017-04-29 9:41:12 PM 华丽🈴联(1816023692)
从合并申请的记录：@潘雄 潘雄：目前可以用鼠标绘制线，矩形，path,线和矩形可以实现undo和redo; --> 这个版本的Undo、Redo速度比上版明显减慢，每个操作需要很久才完成，请看看怎么回事？@梅子 梅子：打开一个gds文件，可以用鼠标实现图像的缩放;--> 同样存在响应时间过长的问题。请和潘雄一起检查一下。@朱杏子 杏子：在view菜单下实现工具栏的显示与隐藏。--> 看到菜单条下新添的可选项了，工作正常。但是在工具条浮动的时候，还需要添加一个可关闭的 X  ，点击时可以关闭该工具条。如下图红框中所示。假期愉快!

2017-04-29 9:53:25 PM 华丽🈴联(1816023692)
工具条浮动的时候，还需要添加一个可关闭的 X ，同时可以显示该工具条的名字，比如这样：[图片]

2017-04-29 10:28:38 PM 潘雄(1357211280)
邓导，您把您遇到的冲突也记录下来吧，我想看看，学习学习[表情]

2017-04-29 10:29:00 PM 潘雄(1357211280)
@华丽联 

2017-04-29 10:32:32 PM 华丽🈴联(1816023692)
\optixera\optimask\dev\Qt_SmartGit下面更新了 “ SmartGIT使用笔记.doc ” ，上面的步骤加入最后一页。本来就有冲突解决记录。[图片]边学边写的，虽然有点乱，但是每个部分还是自成一体的。

2017-04-29 10:42:35 PM 潘雄(1357211280)
好的，我帮你整理一下

2017-05-01 5:10:03 PM 郎量(47445613)
@潘雄 @朱杏子 @梅子 ，还是周三开会，上午9点左右。

2017-05-01 5:32:44 PM 梅子(1126859953)
好的

2017-05-01 6:40:51 PM 潘雄(1357211280)
[表情]

2017-05-01 8:43:37 PM 郎量(47445613)
上午会议室有人占用，下午2:00陈老师本科生毕设会用。如果3点半前空出来，我们可以下午碰个头

2017-05-01 8:53:49 PM 潘雄(1357211280)
[图片]

2017-05-01 9:20:49 PM 梅子(1126859953)
[表情]

2017-05-01 10:46:06 PM 朱杏子(1398550113)
好的

2017-05-01 11:44:15 PM 郎量(47445613)
@刘昕 从本地的master分支merge到本地的个人分支dev_lang，出现如下问题，如何解决？[图片]

2017-05-01 11:47:51 PM 刘昕(2389021593)
在工作目录下运行命令试试： git config merge.renameLimit 999999

2017-05-01 11:50:36 PM 潘雄(1357211280)
@刘昕 哪里可以输入命令，没有看到命令窗口。

2017-05-01 11:51:56 PM 刘昕(2389021593)
windows的命令窗口

2017-05-01 11:52:04 PM 刘昕(2389021593)
run cmd

2017-05-01 11:52:56 PM 郎量(47445613)
[图片]

2017-05-01 11:55:55 PM 郎量(47445613)
[图片]

2017-05-01 11:57:36 PM 郎量(47445613)
http://www.brettallred.com/blog/2012/02/18/you-may-want-to-set-your-merge-renamelimit-git

2017-05-01 11:57:38 PM 刘昕(2389021593)
哦，你们没安装命令行的git程序

2017-05-01 11:57:52 PM 郎量(47445613)
你来设置也一样

2017-05-01 11:58:17 PM 刘昕(2389021593)
在工作目录的.git目录下，编辑config文件

2017-05-01 11:58:36 PM 刘昕(2389021593)
增加这两行：

[merge]
        renameLimit = 999999

2017-05-02 7:30:51 AM 潘雄(1357211280)
SmartGIt使用笔记，我整理了一下。有建立你们再提，我再来修改@郎量 @刘昕 @朱杏子 @华丽联 @梅子 @吴竹 

2017-05-02 7:31:08 AM 潘雄(1357211280)
建议

2017-05-02 7:54:09 AM 刘昕(2389021593)
不错

2017-05-02 8:02:23 AM 梅子(1126859953)
好的[表情][表情][表情]@潘雄 

2017-05-02 8:05:21 AM 刘昕(2389021593)
每周的代码合并也规范一下：
1. 将主分支合并到开发分支，合并完成后push到远端
2. 找一个干净的环境，从远端拉取第1步的结果；验证拉取的代码（编译和测试）
3. 第2步的结果验证无误，打一个tag， tag编码规范 merge_20170502_x；x是从1开始的序号，用于区分同一天打的多个tag
4. 提交merge request时，提供需要merge的tag

2017-05-02 8:52:58 PM 系统消息(10000)
[图片] 潘雄 分享文件 22:29:22
"SmartGIT 使用笔记修改.docx" 下载

2017-05-02 9:14:16 PM 华丽🈴联(1816023692)
@潘雄 [表情][表情]很好，主观能动性和学习精神值得嘉奖[表情]同时希望大家遵循刘导的合并代码规范[表情]

2017-05-02 9:15:13 PM 华丽🈴联(1816023692)
大家工作任务方面有问题么？

2017-05-02 9:41:43 PM 郎量(47445613)
@华丽联 ，梅子可能会有一些疑问需要请教，等她整理出来再上传吧

2017-05-02 9:46:24 PM 华丽🈴联(1816023692)
@郎量 好的。 上次梅子说要问朝洪的问题好像也还没有上传文档？

2017-05-02 9:48:17 PM 郎量(47445613)
可能正在自己解决中[表情]

2017-05-02 9:49:23 PM 华丽🈴联(1816023692)
好的，表明大家自主解决问题的能力都提高了。[表情]

2017-05-02 10:59:35 PM 梅子(1126859953)
@华丽联 @郎量 现在没有什么问题，等有问题我再问[表情]

2017-05-03 7:45:40 AM 潘雄(1357211280)
@刘昕 刘博士，git程序有安装包吗？

2017-05-03 7:45:59 AM 刘昕(2389021593)
啥意思？

2017-05-03 7:46:48 AM 潘雄(1357211280)
您有这个程序 的安装包没？

2017-05-03 7:46:54 AM 潘雄(1357211280)
[图片]

2017-05-03 7:47:34 AM 潘雄(1357211280)
我去官网下的时候，总是下一半就卡着不动了

2017-05-03 7:47:52 AM 刘昕(2389021593)
没有，我也得下载

2017-05-03 7:48:58 AM 潘雄(1357211280)
那就不从官网上下了

2017-05-03 7:49:10 AM 刘昕(2389021593)
换迅雷下载试试

2017-05-03 7:57:13 AM 潘雄(1357211280)
也不行，不过我在网上随便下了一个

2017-05-03 7:57:26 AM 潘雄(1357211280)
[图片]

2017-05-03 7:57:58 AM 潘雄(1357211280)
这个要怎么和我们现在的smartgit联系起来？

2017-05-03 7:59:31 AM 刘昕(2389021593)
这个和smartgit没有本质区别，一个是GUI，一个是命令行

2017-05-03 8:00:45 AM 潘雄(1357211280)
嗯，懂了。

2017-05-03 5:57:48 PM 郎量(47445613)
@潘雄 @梅子 ， 看你们合并的时候是否遇到同样的问题。

2017-05-03 6:00:00 PM 潘雄(1357211280)
没有遇到过这样的问题

2017-05-03 6:01:15 PM 郎量(47445613)
估计我是程序更新的太慢，需要重新命名的文件太多了。

2017-05-03 6:06:43 PM 潘雄(1357211280)
[图片]

2017-05-03 6:07:23 PM 潘雄(1357211280)
表示远程的某些分支？

2017-05-03 6:07:48 PM 潘雄(1357211280)
@刘昕 @郎量 @华丽联 

2017-05-03 6:16:53 PM 梅子(1126859953)
好的，我没有遇到过这样的问题，不过config文件的作用是？@郎量 

2017-05-03 6:18:16 PM 梅子(1126859953)
老师合并成功后，还有木有最后您添加的，我看我的config文件没有[merge]这一项

2017-05-03 6:28:10 PM 潘雄(1357211280)
[图片]@郎量 @华丽联 在KLayout里面是怎么结束画图，我度过左右键，双击都没成功

2017-05-04 5:26:05 PM 郎量(47445613)
@潘雄 ，双击鼠标左键结束画path.

2017-05-04 5:48:54 PM 潘雄(1357211280)
好奇怪，昨天我用的时候怎么都结束不了，今天居然就好了[表情]

2017-05-04 6:20:17 PM 华丽🈴联(1816023692)
@潘雄 鼠标双击就可以结束KLayout的画图。如果不工作，是否是有Shift/Ctrl/Alt等某键是被按下的状态（可能是不小心按到）？

2017-05-04 6:23:05 PM 潘雄(1357211280)
好的，谢谢@郎量 @华丽联 

2017-05-04 6:25:06 PM 华丽🈴联(1816023692)
KLayout的画图功能不是很好用。我知道的大部分人只是用它做Viewer。画图的画还是其它工具，比如L-Edit好用些。但是目前的工具曲线功能都不太行。

2017-05-04 7:00:33 PM 郎量(47445613)
@潘雄 @梅子 @朱杏子 下午2:30分开会

2017-05-04 7:07:56 PM 朱杏子(1398550113)
[表情]

2017-05-04 7:10:14 PM 潘雄(1357211280)
[图片]

2017-05-04 8:04:08 PM 梅子(1126859953)
好的

2017-05-04 10:51:32 PM 华丽🈴联(1816023692)
 @梅子 @潘雄 你们有没有听说或者使用过LaTeX排版？

2017-05-04 10:52:07 PM 潘雄(1357211280)
没有，那是什么？

2017-05-04 10:54:48 PM 潘雄(1357211280)
[图片]

2017-05-04 10:56:38 PM 梅子(1126859953)
没有听过

2017-05-04 10:56:46 PM 潘雄(1357211280)
邓导有什么想法么？@华丽联 

2017-05-04 10:59:06 PM 华丽🈴联(1816023692)
很好的文档编辑系统。学会使用之后，可以只需专注于文档内容，不需操心复杂的排版设置。效果比Word好得多，熟练之后文档写得又快又漂亮。我在\optixera\optimask\doc下的样本文档Optimask.pdf就是用LaTeX写的。实在对Word写的文档不满意，比如那些笔记文档。想用LaTeX写，以便可以专注雨内容，而不是格式排版。现在唯一的问题是我只设置成功了英文系统(TexMaker+MikTeX)。编译中文文档总是有错，很郁闷。除非你们可以接受全部英文文档。研究生同学里面有用LaTeX写论文的么？

2017-05-04 11:03:02 PM 潘雄(1357211280)
这个不知道，一般都是用的word写。因为我word用的还可以，也有自己的模版！所以一直都在用word

2017-05-04 11:03:55 PM 系统消息(10000)
潘雄撤回了一条消息

2017-05-04 11:04:13 PM 潘雄(1357211280)
不过听您说，我还蛮期待用LaTex的

2017-05-04 11:04:17 PM 刘朝洪(99213820)
写文档是个很折腾的活

2017-05-04 11:05:09 PM 刘朝洪(99213820)
我最怕写文挡，我很羡慕那些商务人士，市场人士，文档一写，几十页

2017-05-04 11:05:14 PM 刘朝洪(99213820)
还很快

2017-05-04 11:09:35 PM 潘雄(1357211280)
是的，LaTex是个神奇的东西啊！还会自己排版

2017-05-04 11:10:35 PM 华丽🈴联(1816023692)
LaTeX就是给专业人士用的。中国大学里面用LaTeX写论文的研究生应该不少。你如果用过LaTeX估计再也不想用Word！用LaTeX写论文，开始之后（快的话两三天也就会了），你根本不用考虑排版，只需专注于内容，下笔如有神。我一直写的是英文文档，中文文档没有设置成功已经郁闷我几天了，主要是没有朋友帮忙解决一下。帮忙打听一下，高年级的同学或者博士生们有没有使用的。TexMaker+MikTeX。原来用WinEdt，可是不是免费，所以希望使用TexMaker（免费）。

2017-05-04 11:12:34 PM 潘雄(1357211280)
[图片]

2017-05-04 11:21:05 PM 潘雄(1357211280)
@华丽联 看了一下您的那个Optimask.pdf，里面没有内容，好像只有格式

2017-05-04 11:22:47 PM 潘雄(1357211280)
[图片]

2017-05-04 11:24:21 PM 华丽🈴联(1816023692)
我现在只是建立框架而已。内容只需要用文本格式填写在Optimask.tex内。我实际上早就在\optixera\optimask\dev\LaTeX下面存有一个简介和安装文档“LaTeX使用说明.docx”，你可体验一下。随便给篇文章你看看排版质量
。你们以后专业文章投稿给科技期刊（尤其是国外高质量期刊），都是（倾向于）接收LaTeX的。

2017-05-04 11:25:53 PM 华丽🈴联(1816023692)
这个List Of Table会自动生成的，不需要手动调。目前我没有加入图和表格而已。

2017-05-04 11:34:09 PM 华丽🈴联(1816023692)
所有的图表标题，索引，目录，公式编号，参考文献引用，等等这些Word里面费时费力的工作，LaTeX都是轻松完成，并且随时自动更新，保证无错。

2017-05-05 2:28:37 AM 潘雄(1357211280)
@华丽联   邓导，我的一些功能作了一些说明，写了一个文档。等梅子合并好程序了，您可以根据文档来演示相关的功能。


2017-05-05 4:38:11 AM 梅子(1126859953)
@华丽联 邓博士，潘雄和我的程序已经合并好并上传了，杏子还有些地方需要改动，所以她说下次再和我们一起合并，我这周的工作主要是画比例尺，实现了比例尺随着图形缩放而改变本身的大小以及对应比例值的改动，但还没有结合潘雄的双缓冲机制，所以会出现多个矩形导致效果并不是很好，这个问题我会尽快解决

2017-05-05 4:41:42 AM 梅子(1126859953)
 @吴竹 @刘昕 我下周任务是NaviDock视图导航区域，上周也考虑了一下，发现在网上找不到相关资料，我想请教一下刘博士和刘导，我不知道是不是我的搜索方式有问题还是关键字没有找对

2017-05-05 6:00:33 AM 系统消息(10000)
[图片] 潘雄 分享文件 17:28:39
"功能描述_20170505_Xiong.docx" 下载

2017-05-05 7:23:55 AM 华丽🈴联(1816023692)
@潘雄 很好，写代码的时候同时产生了描述文档，长远来看是会提升效率的。至于Logo，你就考虑插入任意图像就可以了。也可以暂时等于scan功能，L-Edit里面有这个功能，可以参考。

2017-05-05 7:29:56 AM 潘雄(1357211280)
@华丽联 这个是郎导建议的。[表情]

2017-05-05 7:32:10 AM 华丽🈴联(1816023692)
@梅子 很好，我测试后会提供反馈意见。关于NaviDock，如果找不到资料，可以在KLayout的代码里面找（它有此功能的）。其实NaviDock在很多绘图工具里面都有的，应该是比较常见。NaviDock的名字是我起的，所以网络搜索肯定搜不到。可以试着搜索不同关键字，比如：navigator，aerial view，第二示图窗口，等等，看看有没有结果。

2017-05-05 7:36:58 AM 华丽🈴联(1816023692)
@潘雄 @梅子 好的。如果你们能够帮我解决TexMaker中文编译，我们的文档绝对会又快又好。尽快帮我留意和解决。我准备开始写更多需求文档。这些文档以后可以轻易修改成发布的产品文档。

2017-05-05 7:36:58 AM 梅子(1126859953)
好的，谢谢邓博士！

2017-05-05 7:38:24 AM 梅子(1126859953)
好的，我会留意的。

2017-05-05 7:40:30 AM 潘雄(1357211280)
嗯，这个我也会问问的

2017-05-05 9:42:11 PM 华丽🈴联(1816023692)
@梅子 @潘雄 @朱杏子 新的版本有不少进步，测试反馈如下：1. @梅子  [表情][表情]多窗口工作切换一切正常：LayerPanel、CellDock以及WorkDock同时对应当前激活的图形。下面开始工作NaviDock及之后的窗口时请同样对应和切换即可。2. @梅子 [表情](a). layerPanel排序正常。   [表情](b). Layer的Group功能仍然需要实现。[图片]树形模式和表格模式的嵌套问题需要继续解决。   [表情](c). LayerPanel还需要读取当前版图文件所对应的真实构层# （Layer Number）。         (d). 见下图，当同时打开多窗口时，LayerPanel下的表格标题有时变为粗体。请统一字体，一律正常字体即可。[图片]3. @梅子  [表情]工作窗口缩放实现。简单图形绘制比原来感觉好。    [表情] 比例尺只需要在每个窗口的左下方，不需要每次画每个图形时分别出现。    [表情]图形的选取需要继续     [图片] 选取之后需要鼠标点击右键可以出现简单Property（属性）对话框，比如显示坐标数组。4. @潘雄  [图片]请继续解决死循环问题。见文档\optixera\optimask\dev\GDSII文件读取死循环调试201704.docxgds2reader.cpp:  GDSII文件AWGOUTLINE.GDS读取实际上是完成了的，但是从bool CGDS::ReadGDSPlain(QString filename) 进入 MakeCrossRef()  （第869行）后在双重循环开始时出错。5. @潘雄 当打开Flat的构元时，仍然需要在Cell Structure面板下显示该构元名字（即主构元）（没有从属构元）。不能为空。[图片]6. @潘雄 [图片]显示GDSII文件总共还是只有两级。需要继续深化显示所有级别。GDSII文档该构元有多少级，就需要显示多少级。[图片]7. @潘雄 [图片]GDSII文档的打开，很多地方旋转依然有问题。需要正确读取。[图片]8. @朱杏子 (a). 菜单条请先摆满每一行，再往下行走。    (b). 当主工作界面窗口缩放时，菜单条的布局需要对应移位和适应。    (c). 请检查去除重复的图标，比如“Fracture”的图标重复出现了两次。9. @朱杏子 工具条浮动的时候，还需要添加一个可关闭的 X ，同时可以显示该工具条的名字，比如这样：[图片]10. @朱杏子 Layer Panel 边上的Layer图标不见了，请链接至\optixera\optimask\src\Icon\layers.png。即如下：[图片]

2017-05-06 7:12:02 AM 梅子(1126859953)
好的，邓博士，收到@华丽联 

2017-05-06 7:26:57 PM 郎量(47445613)
@华丽联 ，以上的回馈我都仔细看过了， 关于：“Layer的Group功能仍然需要实现。[图片]树形模式和表格模式的嵌套问题需要继续解决。”  1）这个功能是结合klayout和L-edit.  关于这部分外观上的描述，主要是group和ungroup的界面你可能要再描述清楚一些，像Klayout里面group里面还能group，需要实现吗？.  2)这部分技术上的实现，朝洪能否先给个算法，因为学生没有接触过，自己弄时间上不可控。

2017-05-07 5:58:21 PM 郎量(47445613)
@潘雄 ，大家都来了没有？来了我们开个会

2017-05-07 6:01:55 PM 潘雄(1357211280)
我正在上课，10点才能到实验室

2017-05-07 6:02:42 PM 郎量(47445613)
行，那就10点半左右开会吧

2017-05-07 6:07:06 PM 郎量(47445613)
@潘雄 @梅子 @朱杏子 邓博士建议大家看看:优秀博士如何养成 http://mp.weixin.qq.com/s?__biz=MzIxMTM4NDQ0Ng==&mid=2247487300&idx=2&sn=ed89858e06be800be0c4d54f405e9393&chksm=97576e55a020e743140add62bc499ba1464bfaaf64ca92783dd4c7fc567668b3c79b7226744b&mpshare=1&scene=1&srcid=0430qD5WeNsBUo5IMlwwHTtD#rd

2017-05-09 4:54:12 AM 潘雄(1357211280)
[图片]

2017-05-09 4:55:34 AM 潘雄(1357211280)
@刘昕 @吴竹 刘博士，刘导，Qt中的坐标系统，上图的问题如何来理解 

2017-05-09 5:22:52 AM 刘昕(2389021593)
感觉是right() bottom()指右边和下边开始的左边，下面两个图里红圈的位置
[图片]

2017-05-09 5:23:26 AM 刘昕(2389021593)
不用管吧，要获得准确坐标应该用浮点类型 QRectF

2017-05-09 5:24:54 AM 潘雄(1357211280)
可以不用管，好奇问问[表情]

2017-05-09 7:48:56 AM 华丽🈴联(1816023692)
还是如之前说的，界面之外，能否尽量减少（最好摆脱）对Qt 的依赖？我们之后的绘图和计算希望就是建立在简单的图形数组之上。Rect就简单的自定义class，记录名字、标号、基本坐标和尺寸即可。程序越往后，我对Qt 的concern越大。这是我们程序的性质决定的（是计算型，而非界面型）。所以能够尽量避免Qt，请开始避免Qt。尽量用标准的简单的C函数。

2017-05-09 4:22:37 PM 潘雄(1357211280)
摆脱对qt的依赖，不是很理解？

2017-05-09 4:25:41 PM 华丽🈴联(1816023692)
即：Qt只完成界面相关的工作（菜单，面板，显示等）。具体到绘图和计算之后，尽量不要依赖于Qt 的绘图等。希望速度效率、兼容性、升级维护可以不受Qt 版本影响。

2017-05-09 4:35:00 PM 潘雄(1357211280)
如果不用qt来绘图，那怎么绘图，用c和c++如何绘图？在qt里数据和模型可以做到分离

2017-05-09 4:35:23 PM 华丽🈴联(1816023692)
尽量使用简单的C/C++子程序/类，减少调用过多复杂的Qt 包。

此外，上次郎导提了多边形面积计算的事。我的代码/com/目录下，是有锤炼过的相关子函数的。直接调用即可，无需再花时间重写。尽量使用已有成果。若不确定，可将相关问题在群里提出，先讨论一下，再具体实现，效率因此会提高些。

2017-05-09 4:37:29 PM 潘雄(1357211280)
好的，我等会上完课，回去看看

2017-05-09 4:42:08 PM 华丽🈴联(1816023692)
日本人的版图程序中，子函数比较简单高效些。他没有用Qt，应该有很多自定义函数/类。

总体原则：尽量简单，减少累赘。当然具体实现并不容易，不过keep in mind会有益处的。[表情]

2017-05-09 4:53:23 PM 潘雄(1357211280)
日本人用的是MFC来做界面的，最后的绘图应该也是与MFC有关

2017-05-09 4:57:35 PM 华丽🈴联(1816023692)
好的。去看看比较一下。总体原则，精简和效率。[表情]

2017-05-09 7:23:47 PM 系统消息(10000)
[图片] 梅子 分享文件 10:23:48
"Navigator窗口实现问题.docx" 下载

2017-05-09 7:27:35 PM 梅子(1126859953)
@刘昕 @吴竹刘博士和刘导，您们好， 至于Navigator窗口的实现，现在有点思路，但是不知道是否可行，是否是最好方案。希望刘博士和刘导可以给一些指导以及提供解决这个问题更好的方案。

2017-05-09 7:27:41 PM 梅子(1126859953)
[图片]

2017-05-09 10:42:43 PM 华丽🈴联(1816023692)
@梅子 刘导在考虑layer的group问题（树形与表格的嵌套），希望可以很快来处理这个Navigator问题。关于Navigator显示，功能1解决思路（怎样以合适窗口显示？），和功能2解决思路（如何确定整幅图的大小？），都需要读取GDSII文件的主构元（最高层）以及其属下调用的所有从构元的边框（Frame）。可以定义每个构元的Frame为所有坐标的（Xmin，Ymin）至（Xmax，Ymax）的Box（矩形框界）。注意搜索/计算每个构元的Frame时，一定有办法只用O(N)的计算量级的，千万不要用二阶的O(N^2)。即每个子构元算出Frame，母构元根据子构元的Frame和附加基本图形占用的坐标可以算出扩大的Frame（边框）。逐次上推。最上层的主构元的Frame即是合适窗口显示的尺寸，以及整幅图的大小。

2017-05-09 10:47:07 PM 华丽🈴联(1816023692)
这个Frame计算，可以定义一个子函数，同时可以加在自定义的类体里面做为记录。在我们以后的扩充文件格式里面，一定要把Frame加进去的。Frame同时对以后的Boolean运算也非常有用。

2017-05-09 10:49:36 PM 梅子(1126859953)
好的，谢谢邓博士，今天开会，郎老师和潘雄帮我提供了思路和解决方法，我先从基本的功能实现起，再完善

2017-05-09 10:53:52 PM 华丽🈴联(1816023692)
好的，一定要用定义Frame的方法去由下往上类推。当构元显示层级不够深的时候，超过层级的构元不用显示具体图形，但是需要显示该构元的Frame和Name。

2017-05-09 11:00:31 PM 梅子(1126859953)
好的，我现在还没有涉及到这一块，有些您说的，我不是太懂，GDSII这块我之前还没有接触到，我先问问潘雄，到时候我不懂的话再请教您

2017-05-09 11:01:25 PM 华丽🈴联(1816023692)
@梅子 @潘雄 @朱杏子 可以常回顾一下该文档：\optixera\Docs\Optimask_File_Format.xmind 需要下载免费Xmind打开。文件不大，我就再上传在此。温故而知新。对全局的理解更透彻之后，写程序的思路会更明确。
（里面已经定义了Frame（在View栏）。）

2017-05-11 8:10:37 PM 刘朝洪(99213820)
这几天我在整理公司的一个报告，没有关注QQ

2017-05-11 8:12:05 PM 刘朝洪(99213820)
我刚刚看了一下留言，我觉得邓说的对，我们要逐渐减少对Qt的依赖，除了界面外，其他的用纯c++

2017-05-11 8:12:49 PM 刘朝洪(99213820)
毕竟界面跟操作系统相关，就算Qt也做不到完全跨平台

2017-05-11 8:13:23 PM 刘朝洪(99213820)
除了菜单，工具栏，视图之外尽量不要用Qt相关的类

2017-05-11 8:13:59 PM 刘朝洪(99213820)
例如定义的数据字符串不要用QString，而采用string或者wstring

2017-05-11 8:14:59 PM 刘朝洪(99213820)
这样以后对于移植更方便

2017-05-11 8:18:44 PM 刘朝洪(99213820)
@梅子 @华丽联  Navigator窗口主要用用什么方面，事实不是仅仅为了图形导航？

2017-05-11 8:19:02 PM 刘朝洪(99213820)
我在看你的方案的时候我有些不解

2017-05-11 8:26:43 PM 刘朝洪(99213820)
我刚才看了一下klayout，明白了你的方案的意思

2017-05-11 8:28:22 PM 梅子(1126859953)
我在kLayout的功能的基础上去理解的，我的理解可能有偏差，方案可能不正确过于复杂，希望刘导可以帮忙指导一下[表情]

2017-05-11 8:30:57 PM 刘朝洪(99213820)
我看了klayout的导航功能，比我想象的要简单的些，没有画矩形框来圈定范围的功能。并且它的也不整体图，比你的方案还简单

2017-05-11 8:34:45 PM 梅子(1126859953)
恩恩，是的，上次也和郎老师讨论过，我的klayout版本显示的是有整体图的，但是老师的版本没有，在开会之后，最后决定简单点，画两个矩形框代替

2017-05-11 8:36:05 PM 刘朝洪(99213820)
不过我觉得还是现实整体图更好看些，因为这个增加不了多少工作，其实也不会增加什么工作，只是把view里面现实的代码复制过去就可以

2017-05-11 8:38:56 PM 刘朝洪(99213820)
这个功能我觉得应该跟以前的cell widge 类似

2017-05-11 8:44:25 PM 梅子(1126859953)
cell widget 之前是用来显示构元信息没有响应鼠标事件，也没有画图的功能，这个好像不是一个结构。

2017-05-11 11:13:33 PM 刘朝洪(99213820)
嗯，不过他们的关联思路是一致的

2017-05-11 11:14:41 PM 刘朝洪(99213820)
这几天再做一个其他的事情，没有关注qq，今天把navigator那个东西，写一下我的思路，争取今天也把group那个实现思路也写好

2017-05-11 11:25:36 PM 梅子(1126859953)
好的，谢谢刘导！

2017-05-11 11:38:19 PM 华丽🈴联(1816023692)
@吴竹 时光荏苒，知音依旧[表情] 程序框架和整体质量有劳费心了[表情]

2017-05-12 9:53:05 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 12:53:05
"Navigator窗口实现思路.docx" 下载

2017-05-12 10:14:13 PM 华丽🈴联(1816023692)
@吴竹 谢谢！我把计算图形区域大小的内容（之前QQ记录）加进你的第一条了。更新的文档如下。


2017-05-12 10:19:01 PM 华丽🈴联(1816023692)
@潘雄 @梅子 @朱杏子 新的代码已经合并。上周的意见反馈还需要继续。@梅子 看到你的Navigator了。暂时还没有完全实现导航和工作区域的即时对应。请参考刘导上面的文档（我有更新为v1版本）。@潘雄 @朱杏子 请继续上周的意见反馈。谢谢！

2017-05-12 10:30:05 PM 华丽🈴联(1816023692)
请把CellItem下面的文件全部移至Cell目录。如果确实必要用CellItem目录，请将其规划成Cell目录下的子目录，比如\Cell\Item。（目前Cell目录还是空的）。

2017-05-12 11:23:51 PM 梅子(1126859953)
好的，邓博士，已经收到[表情]

2017-05-13 12:37:56 AM 潘雄(1357211280)
收到，邓导！辛苦了

2017-05-13 9:54:13 PM 华丽🈴联(1816023692)
同事的同学的往事[表情]

2017-05-13 9:54:15 PM 华丽🈴联(1816023692)
http://url.cn/494uOqB

2017-05-13 9:55:00 PM 华丽🈴联(1816023692)
[图片]

2017-05-13 11:24:50 PM 华丽🈴联(1816023692)
LaTeX的中文编译问题已经完全解决[表情] 文档工具以后没有问题了。我会稍后将文档和代码全部上传至远程。世上无难事，只怕有心人。有志者事竟成，破釜沉舟百二秦关终属楚 ；苦心人天不负，卧薪尝胆三千越甲可吞吴。[表情]


2017-05-14 5:22:38 PM 郎量(47445613)
@梅子 下午3:00开会，上午我有课。

2017-05-14 5:23:25 PM 潘雄(1357211280)
好的

2017-05-14 5:34:06 PM 梅子(1126859953)
好的

2017-05-14 5:57:38 PM 朱杏子(1398550113)
[表情]

2017-05-14 6:11:18 PM 朱杏子(1398550113)
@郎量 @华丽联 为什么我打开SmartGit是出现这种情况

2017-05-14 6:11:22 PM 朱杏子(1398550113)
[图片]

2017-05-14 6:18:30 PM 郎量(47445613)
安装smartgit 的时候，有个选项，不要选择商业版本。 网上有破解方法，我帮你找一下。

2017-05-14 6:20:18 PM 朱杏子(1398550113)
好

2017-05-14 6:20:49 PM 刘朝洪(99213820)
我用的是不是smart git

2017-05-14 6:21:22 PM 刘朝洪(99213820)
我用的是tortoise git

2017-05-14 6:21:30 PM 郎量(47445613)
@朱杏子 http://blog.csdn.net/z583773315/article/details/60882655  或者http://www.cnblogs.com/nn839155963/p/5912788.html

2017-05-14 6:22:08 PM 刘朝洪(99213820)
这个是完全免费的，因为我之前使用的tortoise svn，所以现在git我也用tortoise

2017-05-14 6:22:14 PM 潘雄(1357211280)
[图片]smartgit是这个样子的

2017-05-14 6:26:10 PM 郎量(47445613)
@潘雄 ，你选中modified文件，commit确认即可。

2017-05-14 6:27:36 PM 潘雄(1357211280)
这个不是问题，是我给刘导看smartgit的界面[表情]

2017-05-14 6:36:47 PM 朱杏子(1398550113)
好了

2017-05-14 6:37:46 PM 朱杏子(1398550113)
谢谢郎导了

2017-05-14 10:45:51 PM 刘朝洪(99213820)
@潘雄  master\optimask\src下的源代码全么，我加载Optimask.pro编译后感觉缺少东西

2017-05-14 10:48:28 PM 刘朝洪(99213820)
[图片]

2017-05-14 10:57:39 PM 潘雄(1357211280)
我下载下来的代码可以正常编译，通过，您的是有问题还是？

2017-05-14 11:00:26 PM 潘雄(1357211280)
还有上次您好像说过您的qt版本是4.8的，如果您编译通过不了，要换成现在的5.4版本或以上

2017-05-14 11:02:18 PM 刘朝洪(99213820)
不是Qt的问题，例如我这里缺少文件

2017-05-14 11:04:12 PM 潘雄(1357211280)
[图片]

2017-05-14 11:04:54 PM 潘雄(1357211280)
这个是src目录下的文件，都在这里

2017-05-14 11:04:56 PM 刘朝洪(99213820)
例如我就没有找到CGDS类的定义

2017-05-14 11:06:14 PM 刘朝洪(99213820)
找到了

2017-05-14 11:06:22 PM 潘雄(1357211280)
好的

2017-05-14 11:06:30 PM 刘朝洪(99213820)
脑袋搞迷糊了

2017-05-14 11:06:42 PM 刘朝洪(99213820)
我用的vs2015

2017-05-14 11:07:04 PM 潘雄(1357211280)
您在vs上开发吗？

2017-05-14 11:08:01 PM 刘朝洪(99213820)
嗯

2017-05-14 11:08:13 PM 刘朝洪(99213820)
CGDS &CGDS::operator =(const CGDS &read1){}这个函数的定义你们编译器没有报错？

2017-05-14 11:08:20 PM 刘朝洪(99213820)
没有任何返回值

2017-05-14 11:11:01 PM 系统消息(10000)
潘雄撤回了一条消息

2017-05-14 11:11:11 PM 潘雄(1357211280)
不过可以不要这个函数

2017-05-14 11:11:36 PM 刘朝洪(99213820)
应该是要报错的，因为没有返回值

2017-05-14 11:11:39 PM 潘雄(1357211280)
没有报错，会有警告

2017-05-14 11:12:28 PM 潘雄(1357211280)
Qt里面，没有返回值的都会给出警告，因为知道是什么原因就暂时没有管

2017-05-14 11:13:12 PM 刘朝洪(99213820)
Qt估计对语法没有管理不严，VS就严格一些，老的C++/C

2017-05-14 11:13:22 PM 潘雄(1357211280)
如：

2017-05-14 11:13:24 PM 潘雄(1357211280)
[图片]

2017-05-14 11:13:37 PM 刘朝洪(99213820)
他们规范要求是如果没有返回值，自动不上一个int的返回值

2017-05-14 11:14:06 PM 刘朝洪(99213820)
但是新的编译器都把这个当作错误

2017-05-14 11:14:11 PM 刘朝洪(99213820)
而不是警告

2017-05-14 11:14:46 PM 刘朝洪(99213820)
如果不用这个函数，最好删除。不然在某些操作的时候就会出现你想不到的后果

2017-05-14 11:15:33 PM 刘朝洪(99213820)
在赋值时，如果没有=符号的重载函数，就会按内存复制，如果有了，则会调用=的重载函数

2017-05-14 11:16:37 PM 刘朝洪(99213820)
假如你以后定义 CGDS a = b，那么你会发现a里面的成员值是未定义的

2017-05-14 11:16:53 PM 刘朝洪(99213820)
如果使用a，有可能会导致程序崩溃

2017-05-14 11:19:22 PM 刘朝洪(99213820)
我更正一下，你定义CGDS a = b，不会出现未定义，但是你定义如下代码CGDS a ，b;b=.....a=b;这样a才会有

2017-05-14 11:19:26 PM 潘雄(1357211280)
好的，等会我反能消除的警告先消除

2017-05-14 11:20:25 PM 潘雄(1357211280)
把

2017-05-14 11:23:16 PM 刘朝洪(99213820)
或者我修改一下也可以

2017-05-14 11:24:34 PM 刘朝洪(99213820)
还是你修改一下，我看看其他的错误

2017-05-14 11:27:02 PM 潘雄(1357211280)
好的

2017-05-14 11:29:38 PM 华丽🈴联(1816023692)
[表情]不同平台（VS和QtCreator）以及不同版本编译其实挺好。可以检验兼容性，以及错误/警告。既然我们的目标是要跨平台，那么目前这种测试并不算严格。目前代码在QtCreator下面有很多Warning的，能够减少点Warning也不错。

2017-05-14 11:49:18 PM 潘雄(1357211280)
Qt这边的警告，我消除完了。

2017-05-14 11:49:44 PM 潘雄(1357211280)
下次上传代码的时候应该就没有了

2017-05-14 11:53:40 PM 刘朝洪(99213820)
把那个aqp.hpp文件里面的那个include语言块的 #ifdef Q_CC_MSVC后面把下面的语句放在#include <math.h>语句前面#ifndef M_PI#define _USE_MATH_DEFINES#endif

2017-05-14 11:54:26 PM 刘朝洪(99213820)
等我现在这个项目用vs2015编译没有问题后，这些细节问题我直接修改在提交

2017-05-14 11:54:27 PM 华丽🈴联(1816023692)
@潘雄 [表情]好。请尽量按照刘导的建议修改和规范代码。他丰富的经验是多年的实战结果。[表情]

2017-05-14 11:55:34 PM 刘朝洪(99213820)
[图片]

2017-05-15 2:28:29 AM 刘朝洪(99213820)
该文档把我今天在VS下编译发现的问题写上去

2017-05-15 5:28:45 AM 郎量(47445613)
@吴竹 ， 请教一下，optimask若能够从QT移植到 VS ，能证明该项目具有跨平台的能力吗？ 二者都是windows操作系统。

2017-05-15 6:00:33 AM 系统消息(10000)
[图片] 刘朝洪 分享文件 17:27:45
"optimask项目从Qt移植到VS注意事项.docx" 下载

2017-05-15 7:46:36 AM 系统消息(10000)
你撤回了一条消息

2017-05-15 7:47:34 AM 华丽🈴联(1816023692)
@郎量 我觉得可以用数学上的必要条件和充分条件来理解。同时可以通过QtCreator和VS（以及版本差异），并不能证明是跨平台（非充分条件）。但是如果跨平台，那么应该需要可以通过两者的测试（即必要条件）。
总体而言，需要各方面注意，才可能最终跨平台。不积跬步，无以至千里；不积小流，无以成江海。积少成多，聚沙为塔。
既然代码处于起步阶段，早期注意和规范对于长远是有益的。防范于未然。设计阶段的问题以后修改代价最大（对于整个开发生产过程）。

2017-05-15 11:45:00 AM 华丽🈴联(1816023692)
@吴竹 谢谢文档。@潘雄 @梅子 @朱杏子 请阅读文档以及我下面的评论。[表情]
关于第一第二项：

1. 支持分情况选择include。一点补充是，关于数学和几何的常量和函数建议优先使用我/com目录下的文件。这些是实战开发的，今后的代码也要基于这些。

2. 关于代码编码，最初时即有过调研和分析结论的。Qt跨平台是建议使用UTF-8编码的（Linux/Unix下缺省为UTF-8），所以在windows下的开发是建议UTF-8编码。我可再去找相关文档发送过来。
a. 是否可以在VS2015下使用UTF-8编码，这样我们就同步了。
b. 代码正文，包括常量，是不允许中文的。中文字符只允许在注释处。中文注释可以使用你的建议，不过该方法看起来不是很简洁和直观。是否可以在VS下的设置处允许单字节注释？
c. 可以建议代码尽量使用英文注释。只在非常必要的地方，比如专有名词的中英文对照处，使用中文字符。

2017-05-15 3:59:19 PM 刘朝洪(99213820)
@郎量 从Qt移植到VS，不是表明跨平台，而是能够检查出代码中一些隐藏的错误

2017-05-15 4:01:37 PM 刘朝洪(99213820)
如果要跨平台，至少要在linux/freeBSD/OS2等环境下运行完好

2017-05-15 4:03:15 PM 刘朝洪(99213820)
对于代码来说，因为C/C++标准是各个编译器支持的，所以只要采用基本的C/C++编程，肯定能支持跨平台。就算有些问题，也只是微小的差异而已

2017-05-15 4:04:31 PM 刘朝洪(99213820)
我没有用过QtCreator开发过程序，都是用VS开发的，我对VS最熟悉，并且目前最强的开发工具就是VS了

2017-05-15 4:14:17 PM 华丽🈴联(1816023692)
@吴竹 [表情] 你说的也是我的意思，但你表达得更加直接明了。我有点像唐僧了[表情]，不过给大家鼓舞斗志也好[表情]。
我觉得VS并行测试值得提倡。以前我就曾经找你VS编译测试过，且希望一直可以。[表情][表情]

2017-05-15 4:28:02 PM 郎量(47445613)
@吴竹 [表情]

2017-05-15 4:33:10 PM 刘朝洪(99213820)
怎么qq也不同步？我现在才看到邓的留言，我在回复朗的时候都没有发现你的留言

2017-05-15 4:34:23 PM 刘朝洪(99213820)
VS支持UTF8格式的，只是在中文注释的情况下和代码页组合的情况支持不是很好，这是VS的问题，不是代码的问题

2017-05-15 4:34:57 PM 刘朝洪(99213820)
不过注释如果能够用英文，这是最好的了

2017-05-15 4:37:04 PM 郎量(47445613)
@吴竹 ，可以建议用英文注释

2017-05-15 4:37:28 PM 刘朝洪(99213820)
不然就算没有VS出现的问题，也会有其他的不适应的问题，例如在中文操作系统上看日本人的代码，因为是日文注释，结果一堆乱码，反之中文注释，在日文操作系统上看，也是乱码

2017-05-15 4:38:46 PM 刘朝洪(99213820)
@郎量 我觉得你的建议很好，能够用英文注释的就用英文注释，只有英文是在表达不清楚的时候采用中文

2017-05-15 4:39:54 PM 华丽🈴联(1816023692)
这个QQ信息同步问题我也发现了，尤其在手机和电脑并用的时候。上次我电脑传输的latex笔记在手机上显示为navigator文档。所以公司/软件大了，经常反而是在基本问题上出错。有个故事，说一群科学家日以继夜地算啊算，算了几年，终于算出结果了；然后回头一想，忘了算的是什么了，为什么计算了[表情]。希望我们一直目的非常明确。

2017-05-15 4:44:39 PM 华丽🈴联(1816023692)
@吴竹 @郎量 也就是大家基本一致了：
1. 编码还是用UTF-8，
2. 代码正文不可用中文，
3. 代码注释尽量用英文注释，实在必要时才用中文注释，比如专业词汇的中英文对照（这个还是有必要的，希望翻译的中文术语也是唯一和确定的）。

2017-05-15 4:45:45 PM 刘朝洪(99213820)
[表情]

2017-05-15 4:46:06 PM 刘朝洪(99213820)
我先走一步

2017-05-16 8:22:09 AM 潘雄(1357211280)
郎老师，明天上午一、二有课，我们还是10开会吧。

2017-05-16 5:00:49 PM 潘雄(1357211280)
郎导，老师把上课时间改了，上午我可以早点开会

2017-05-16 11:00:04 PM 系统消息(10000)
潘雄撤回了一条消息

2017-05-16 11:00:27 PM 系统消息(10000)
潘雄撤回了一条消息

2017-05-16 11:01:33 PM 潘雄(1357211280)
@华丽联 [图片]Duplicate和paste to 要完成什么样的功能，您描述一下？谢谢

2017-05-16 11:20:48 PM 华丽🈴联(1816023692)
Duplicate 就是复制 所有选中的图形和构元，各自位置不变。用户可以用鼠标移动去其它位置。Paste To   就是复制 所有选中的图形和构元，基准位置由用户输入（X，Y）确定。对于原来的图形，坐标位置全部+（X，Y）；对于原来的构元，相当于原点从（0，0）移位到（X，Y）；（目前GDSII格式只需要克隆图形和构元即可。在扩展程序结构里，ID#标号会依次累加计数，暂时不管）。

2017-05-16 11:24:14 PM 华丽🈴联(1816023692)
Paste      就是复制 所有选中的图形和构元，基准位置由当前鼠标位置确定。

2017-05-16 11:26:56 PM 华丽🈴联(1816023692)
Paste To  还可以允许用户确定复制到特定的其它构元或这其它构层上去。所以需要有一个简单的对话框，让用户输入目标构元，目标构层，以及目标基准位置（X，Y）。如果用户不输入目标构元，目标构层，那么表示缺省为当前构元，当前构层；但是目标基准位置（X，Y）是必须由输入的。

2017-05-16 11:29:22 PM 潘雄(1357211280)
谢谢邓导，基本明白，不懂的时候再问您[表情]

2017-05-16 11:36:19 PM 华丽🈴联(1816023692)
[表情] 有问题随时问。

2017-05-18 5:52:29 PM 郎量(47445613)
下午一点开会。 有笔记本的先下载一个zoom cloud. 具体地址  https://zoom.us/support/download

2017-05-18 5:55:37 PM 潘雄(1357211280)
好的

2017-05-18 6:11:14 PM 梅子(1126859953)
[表情]

2017-05-18 9:54:18 PM 郎量(47445613)
@华丽合联， 在线了通知一声

2017-05-18 9:55:53 PM 华丽🈴联(1816023692)
已经在线：https://zoom.us/j/4689930978

2017-05-18 10:14:46 PM 华丽🈴联(1816023692)
肯给我电话号码，我打过来

2017-05-18 10:17:14 PM 郎量(47445613)
18971079515

2017-05-18 11:20:54 PM 潘雄(1357211280)
邓导，您听得见吗？

2017-05-18 11:21:10 PM 华丽🈴联(1816023692)
我打电话

2017-05-18 11:21:16 PM 潘雄(1357211280)
可以

2017-05-18 11:54:30 PM 华丽🈴联(1816023692)
好的，谢谢大家。请代码合并上传一下。我和刘导周末可再看看。周末愉快！

2017-05-18 11:59:45 PM 潘雄(1357211280)
@华丽联 忘了给您说了，您的主程序我已经修改过了，节省了200多行的代码

2017-05-19 12:00:55 AM 华丽🈴联(1816023692)
[表情]好。

2017-05-19 12:11:46 AM 郎量(47445613)
@潘雄 @梅子 @朱杏子 ，下周一上午我有课，下周一下午3:点左右开会。

2017-05-19 12:12:39 AM 潘雄(1357211280)
大家都[表情]

2017-05-19 3:25:01 AM 潘雄(1357211280)
邓导，郎导，程序已经合并好了，请注意查收，谢谢！@华丽联 @郎量 

2017-05-19 10:29:00 PM 华丽🈴联(1816023692)
[图片]

2017-05-19 10:34:45 PM 华丽🈴联(1816023692)
@潘雄 合并后的代码编译失败。怀疑是Optimask.pro没有同步上传的结果。（上次即此情况）。（Optimask.pro属于源代码，需要每次同步的。）此外，因为你已经将\CellItem移动到\Cell\Item下面，请确定删除\CellItem目录可以工作。同步时删除远程（Remote，Origin)的文件的方法是使用“Remove"，如下图示例[图片]

2017-05-19 10:37:18 PM 华丽🈴联(1816023692)
需要修改Optimask.pro下面的位置为 \Cell\Item[图片]请确定删除\CellItem目录可以工作。

2017-05-19 11:27:52 PM 潘雄(1357211280)
您说的没错，确实是optimask.pro的问题，当时我也修改了optimask.pro 而且也删除了CellItem，还特意留意了这个问题，但是上传的时候，smartgit 没有明显的提示不同，所以我就给忘了！确实是我的疏忽，大意了。

2017-05-19 11:29:19 PM 刘昕(2389021593)
请按照流程，上传之后换个环境下载编译测试，确认没有问题

2017-05-19 11:33:19 PM 潘雄(1357211280)
刘博士，您好！上传是部分文件，如何开下载编译测试@刘昕 

2017-05-19 11:34:00 PM 华丽🈴联(1816023692)
smartgit上传文档时，注意一下状态：ignored, modified, missing, conflict等等。所有编译机器产生的文档要选择ignore，所有源代码modified一般需要上传。

2017-05-19 11:36:21 PM 潘雄(1357211280)
难道是上传的文件会覆盖掉以前的文件，这样下载下来的文件就包括更新的文件和未更新的文件？刘博士，是这样吗？@刘昕 

2017-05-19 11:37:51 PM 刘昕(2389021593)
应该换一个全新环境，pull代码，编译验证

2017-05-19 11:38:17 PM 刘昕(2389021593)
不要在你的开发环境上弄

2017-05-19 11:39:00 PM 潘雄(1357211280)
您说的pull是指pull自己远程分支的代码？

2017-05-19 11:39:13 PM 刘昕(2389021593)
对

2017-05-19 11:40:40 PM 潘雄(1357211280)
您这样说我就明白了，谢谢刘博士[表情]

2017-05-19 11:41:17 PM 刘昕(2389021593)
会做一件事和能把一件事做好，这中间还差很远，需要仔细谨慎和良好的工作习惯

2017-05-19 11:43:22 PM 潘雄(1357211280)
还有您说的按照流程，具体是什么样的流程，

2017-05-19 11:46:35 PM 潘雄(1357211280)
谢谢刘博士的谨言，会慢慢学习并加以更正不良习惯

2017-05-19 11:46:37 PM 刘昕(2389021593)
基本的原则就是，一件工作在转交给你的下游之前要确保是work的，自己先做一遍验证

2017-05-19 11:48:07 PM 华丽🈴联(1816023692)
每周的代码合并也规范一下：
1. 将主分支合并到开发分支，合并完成后push到远端
2. 找一个干净的环境，从远端拉取第1步的结果；验证拉取的代码（编译和测试）
3. 第2步的结果验证无误，打一个tag， tag编码规范 merge_20170502_x；x是从1开始的序号，用于区分同一天打的多个tag
4. 提交merge request时，提供需要merge的tag

2017-05-19 11:48:42 PM 华丽🈴联(1816023692)
参考刘博士之前的留言[表情]

2017-05-19 11:51:08 PM 潘雄(1357211280)
之前还不是很懂这个，还以为这是给邓导的建议呢[表情]，今天在看这个，确实有体会[表情]

2017-05-19 11:52:20 PM 华丽🈴联(1816023692)
同时再复制一次我之前的留言：正确的操作方法是，1. 每周开始需要从远程master主干checkout2. PULL （远程master主干）3. checkout本地个人分支，4. Merge合并Master主干至个人分支5. 开始本地个人分支的一周修改工作，修改确认之后commit6. 每周末后将本地commit需要PUSH至远程对应的个人分支。7. 发送Merge Request合并申请，要求将个人分支合并到Master上。8. 我来处理同步和远程主干更新。9. 你们重复从第一步开始。必须工作之前先将远程Master同步到你们个人分支上。目前看来，你们每周有本地分支的commit和push工作（即5，6，7步），但是没有第1，2，3，4步（即第9步）。请一定记住每周开始时从远程Master同步过来个人分支。这很重要。不然时间一长问题就累计多了，不好处理了。

2017-05-19 11:53:03 PM 潘雄(1357211280)
之前也一直以为pull是专指pull主分支的代码，没想过还可以pull自己的远程代码，今天收获不少

2017-05-19 11:55:27 PM 华丽🈴联(1816023692)
一些技术的留言，有时需要 学而常习之，温故而知新的。 我自己定期备份，以便查阅。同时也上传在远程/dev目录的。

2017-05-19 11:55:45 PM 潘雄(1357211280)
邓导，现在看来，您这个还缺少一点，验证自己的代码是否能正常编译通过[表情]

2017-05-19 11:56:11 PM 华丽🈴联(1816023692)
是的，欢迎你在学习中整理扩展。[表情]

2017-05-19 11:57:59 PM 潘雄(1357211280)
邓导，您那边时间也快12点了吧，您早些休息，有问题随时联系我[表情]

2017-05-19 11:58:17 PM 华丽🈴联(1816023692)
pull是提取当前checkout的分支或主干，不论他我。

2017-05-19 11:59:04 PM 潘雄(1357211280)
[图片]

2017-05-19 11:59:21 PM 华丽🈴联(1816023692)
[图片]

2017-05-22 7:33:01 AM 潘雄(1357211280)
邓导，我下拉的程序，不能正常编译通过

2017-05-22 7:34:22 AM 潘雄(1357211280)
还有就是下拉的好多程序，都没有改过来

2017-05-22 7:34:53 AM 潘雄(1357211280)
您当时合并程序的时候，能正常编译通过吗？

2017-05-22 3:42:38 PM 华丽🈴联(1816023692)
前一周的是可以正常编译通过的。本周的编译有错。很多程序没有改过来，应该是因为个人分支没有及时与主干同步。请看前面的合并流程。

2017-05-22 6:54:38 PM 潘雄(1357211280)
没有及时与主干同步，怎么讲？您上周中途是不是修改过主干的master？我们一般是在周一拉下来程序，在进行工作的。而且合并也是按照步骤来做的

2017-05-22 7:56:25 PM 潘雄(1357211280)
@刘昕 @华丽联 刘博士，邓导，您们好，请问当远程分支大于本地分支时，此时，我想将远程分支覆盖掉本地分支，该如何处理？

2017-05-22 7:56:33 PM 潘雄(1357211280)
[图片]

2017-05-22 8:02:49 PM 刘昕(2389021593)
pull就好了啊

2017-05-22 8:03:47 PM 潘雄(1357211280)
[图片]pull的时候，pull是灰色 的

2017-05-22 8:06:34 PM 潘雄(1357211280)
@华丽联 邓导，刚刚我重新push了一些文件，同时也下载了自己远程的代码，编译正常通过了。[表情]

2017-05-22 10:06:10 PM 华丽🈴联(1816023692)
@潘雄 [图片]好像还是有问题。

2017-05-22 10:23:17 PM 华丽🈴联(1816023692)
看看梅子和杏子是否可以用SmartGit同步后再编译通过？

2017-05-22 10:57:00 PM 系统消息(10000)
潘雄撤回了一条消息

2017-05-22 10:57:31 PM 潘雄(1357211280)
刚刚梅子从smartgit 上拉下来的程序是可以正常编译通过的@华丽联 

2017-05-22 11:08:07 PM 潘雄(1357211280)
@郎量 郎老师，您从smartgit上拉程序，编译看能否通过？

2017-05-22 11:09:22 PM 华丽🈴联(1816023692)
好吧，我再试试。你们先按原定计划工作。

2017-05-22 11:15:06 PM 潘雄(1357211280)
我想您应该出现的问题和郎老师一样，但是目前我还不知道为什么在您电脑或者郎老师的电脑上编译通不过，而在我们的电脑能通过！

2017-05-22 11:16:49 PM 华丽🈴联(1816023692)
应该还是代码不是完全一致。你们还是在各自的机器上操作。估计换台机器就不行。

2017-05-22 11:19:57 PM 华丽🈴联(1816023692)
可以将你们本机的代码拷贝至一个临时目录。然后checkout远程Master，并且Pull。用FreeFileSync比较备份目录和Checkout/Pull Master后的工作树。看是否有不一致的。若有，可点击右键后选择用WinMerge直接比较。

2017-05-22 11:22:35 PM 潘雄(1357211280)
这个我现在在图书馆复习准备考试，可能会晚一点去做这个工作，见谅/无奈

2017-05-22 11:38:55 PM 系统消息(10000)
你撤回了一条消息

2017-05-22 11:40:26 PM 华丽🈴联(1816023692)
好的，我只是告诉方法。祝考试顺利！

2017-05-22 11:42:19 PM 潘雄(1357211280)
谢谢！嗷嗷

2017-05-23 4:24:30 PM 潘雄(1357211280)
郎导，上午连着4节课，我们就下午开会吧！[表情]

2017-05-23 4:59:06 PM 郎量(47445613)
@潘雄 @梅子 @朱杏子 ，下午3点开会

2017-05-23 5:08:21 PM 梅子(1126859953)
好的

2017-05-23 7:00:19 PM 郎量(47445613)
@华丽联 ， 上周合并的程序在我的台式机器上能通过，在我的笔记本上调试有错误（程序异常结束）。 我估计你也是在笔记本上，编译也有类似的问题。目前，潘雄一边检查上周的程序，一边继续这周的工作。

2017-05-23 7:02:21 PM 郎量(47445613)
@吴竹 ， 朝洪。台式机编译能通过，但是笔记本编译不能通过的问题，你的经验比较丰富，有时间你看能否编译测试一下看看。

2017-05-23 7:14:05 PM 郎量(47445613)
@潘雄 ，在台式机上编译通过，但是在概要信息处有提示：“分析optimask.pro时发生错误，放弃中”。你看看有何错误

2017-05-23 8:26:16 PM 潘雄(1357211280)
我应该已经找出来

2017-05-23 10:55:15 PM 潘雄(1357211280)
@华丽联 邓导，我修改了一个文件，已经push上去了，同时申请了合并，只要合并我修改过的文件，编译将不会出现问题，我在我的笔记本上已经试验过了。上传的程序拉下来，试验也通过了。辛苦您合并了

2017-05-23 11:21:57 PM 华丽🈴联(1816023692)
@郎量 应该不是笔记本和台式机的问题，应该还是文件版本不一致的问题。@潘雄 好的。希望找到出错的原因，今后就不会再有此问题了。我明天再回复。[表情]

2017-05-23 11:22:47 PM 潘雄(1357211280)
.pro 时发生错误是qt的kits 没有选择好@郎量 

2017-05-23 11:30:23 PM 潘雄(1357211280)
@华丽联 好的，goodnight [表情]

2017-05-24 7:44:41 PM 华丽🈴联(1816023692)
@潘雄 编译通过了，谢谢。

2017-05-24 7:46:34 PM 华丽🈴联(1816023692)
@吴竹 有没有解决Layer Panel下的Group方案？

2017-05-24 7:51:02 PM 潘雄(1357211280)
@吴竹 ，台式机和笔记本的内存处理方法是不是不太一样？我确定一下

2017-05-24 7:52:26 PM 刘昕(2389021593)
机器都是一样的，是你开发环境配置不一样

2017-05-24 7:54:10 PM 郎量(47445613)
@刘昕 ，安装同一个版本的QT，开发环境会有何不同？

2017-05-24 7:54:55 PM 潘雄(1357211280)
@刘昕 上周的代码在台式机上可以通过，在笔记本上通不过可能的原因是Qt环境配置的不一样吗？

2017-05-24 8:02:52 PM 刘昕(2389021593)
我觉得是，或者有未提交的文件。你在台式机上换个新文件夹pull代码编译试试呢？

2017-05-24 8:04:17 PM 潘雄(1357211280)
我把问题叙述的清楚一些：上周出现以上问题是因为当初邓导声明了一个指针却没有初始化，在后期写程序的时候被我误用。这本来是个错误的代码，但是居然在台式机上编译通过了，而当相同的程序在笔记本上编译时，就不能通过了。

2017-05-24 8:18:26 PM 刘朝洪(99213820)
应该是编译设置参数不一样吧，跟电纳和笔记本没有区别，我的环境就是笔记本

2017-05-24 8:18:52 PM 华丽🈴联(1816023692)
是那个文件中的那个指针？可以让@吴竹 看看怎么回事？

2017-05-24 8:19:08 PM 郎量(47445613)
台式机上和笔记本上的编译设置的都是默认的

2017-05-24 8:19:25 PM 刘朝洪(99213820)
我全部导出来编译看看

2017-05-24 8:19:50 PM 刘朝洪(99213820)
报错的信息是什么

2017-05-24 8:20:57 PM 刘昕(2389021593)
估计是你台式机上的代码和笔记本上的代码不一致

2017-05-24 8:21:49 PM 郎量(47445613)
我是u盘直接拷贝的，应该一样的。

2017-05-24 8:22:18 PM 刘朝洪(99213820)
可以远程一下你的电脑么，或者你把编译的出错信息告诉我一下

2017-05-24 8:22:24 PM 华丽🈴联(1816023692)
@吴竹 可以测试编译一下分支下不同时间的提交（commit），看看问题出在哪？上周六的有问题，昨天的OK。

2017-05-24 8:22:58 PM 郎量(47445613)
没有出错信息，程序直接异常结束了。

2017-05-24 8:23:30 PM 刘朝洪(99213820)
哦，那不是编译问题了，是运行问题

2017-05-24 8:26:56 PM 潘雄(1357211280)
在台式机上编译通过后，也可以正常运行，@吴竹 

2017-05-24 8:29:16 PM 刘朝洪(99213820)
是不是在笔记本上编译后的程序运行时崩溃？

2017-05-24 8:29:42 PM 潘雄(1357211280)
您等一下，我运行给你截图

2017-05-24 8:37:00 PM 刘朝洪(99213820)
确定是什么环境，怎么样操作出现崩溃的？或者把你的整个项目打包发给我，当然把里面的debug目录，obj文件都删除，不然打包文件太大

2017-05-24 8:39:05 PM 潘雄(1357211280)
好的，我的笔记本实在有点慢

2017-05-24 8:39:18 PM 潘雄(1357211280)
等会我给您发过去

2017-05-24 8:39:24 PM 刘朝洪(99213820)
好

2017-05-24 10:11:05 PM 刘朝洪(99213820)
@潘雄 我看了你的文档，你确认是你描述的这个问题？

2017-05-24 10:16:28 PM 刘朝洪(99213820)
从你的文档描述来看，这个问题不管是笔记本还是PC都会出问题

2017-05-24 10:17:09 PM 刘朝洪(99213820)
如果不出问题，要么编译选项不同，或者编译器不同

2017-05-24 10:58:35 PM 潘雄(1357211280)
您等等，我去实验室的台式机电脑给您截个图

2017-05-24 11:13:36 PM 系统消息(10000)
[图片] 潘雄 分享文件 14:13:36
"Questions_20170525_xiong.rar" 下载

2017-05-24 11:14:16 PM 潘雄(1357211280)
@吴竹 问题确实是这个问题，您可以远程来控制我的电脑看看

2017-05-24 11:15:20 PM 刘朝洪(99213820)
好

2017-05-24 11:18:17 PM 刘朝洪(99213820)
我觉得，如果就是你那个问题，直接解决那个指针问题，解决那个没有初始化的指针后，如果台式机和笔记本都没有问题了，就Ok了，不要因为弄明白为啥两者不同而耽搁进度

2017-05-24 11:20:14 PM 刘朝洪(99213820)
在我的笔记本环境，的确是那个指针问题，只要解决了这个问题就运行正常

2017-05-24 11:21:17 PM 刘朝洪(99213820)
另外我粗看了一下klayout的group，它是自定义的，利用扩展tree控件

2017-05-24 11:21:56 PM 华丽🈴联(1816023692)
是那个指针？让我也明白一下[表情]

2017-05-24 11:23:00 PM 华丽🈴联(1816023692)
@吴竹 很好[表情]Group方案可以定了？[表情]谢谢

2017-05-24 11:24:14 PM 刘朝洪(99213820)
就是潘雄的那个文档

2017-05-24 11:24:49 PM 刘朝洪(99213820)
指针没有初始化，如果老狼的运行是因为这个的话，我觉得到问题不大

2017-05-24 11:25:23 PM 刘朝洪(99213820)
不过我不知道老狼那里的是否就是潘雄的说的

2017-05-24 11:25:39 PM 华丽🈴联(1816023692)
奇怪了！QQ电脑和手机又不同步了。电脑上刚才没看到。

2017-05-24 11:27:04 PM 潘雄(1357211280)
@吴竹 好的。就是一直在台式机上写代码，上个星期五把代码copy到自己电脑上准备给邓导演示相关功能时，运行代码就出现了问题，当时我们都觉得奇怪。还耽误了一些时间。郎老师说的也是我这个问题

2017-05-24 11:29:07 PM 潘雄(1357211280)
@华丽联 那个问题，我刚刚上传了一个文件。

2017-05-24 11:30:30 PM 潘雄(1357211280)
@吴竹 谢谢刘导了[表情]

2017-05-24 11:30:39 PM 华丽🈴联(1816023692)
才看到。这个指针没有初始化的问题，原则上应该都是Fail，应该报错处理。怎么让编译环境一致？

2017-05-24 11:31:44 PM 刘朝洪(99213820)
如果就是你这个问题，那就不用去再去找为啥两者不同了，我知道有优化可能的导致出现不同情况，至于其他原因是否还有，那就另外的事情了，要找原因，以后再说，因为在我的环境除了你的问题，没有出现这个问题

2017-05-24 11:32:10 PM 刘朝洪(99213820)
所以我觉得更可能的时候代码不要一致

2017-05-24 11:33:32 PM 刘朝洪(99213820)
@华丽联 group方案我在研究一下，看看能否直接把里面的代码抽出来，这样就减少工作量了

2017-05-24 11:33:53 PM 潘雄(1357211280)
@吴竹 所以我觉得更可能的时候代码不要一致，这句话啥意思啊

2017-05-24 11:35:54 PM 潘雄(1357211280)
@华丽联 让编译环境一致，在Qt里面有，工具——选项——构建和运行，在里面设置就好了[图片][图片]

2017-05-24 11:36:45 PM 刘朝洪(99213820)
如果是指针初始化问题，不管你放在那里编译，如果是同一个编译器不管你如何配制，都会出错

2017-05-24 11:37:47 PM 刘朝洪(99213820)
有没有这样一种可能，两个地方代码使用的分支不一样

2017-05-24 11:38:10 PM 刘朝洪(99213820)
不过所有这些都是猜测，我没有没法复现，就没法找出具体原因

2017-05-24 11:40:14 PM 潘雄(1357211280)
@吴竹  刚刚我在台式机上做实验的代码，就是下载的我用QQ发给您的代码。这个问题就先放着吧，说不哪天就能知道原因了，哈哈

2017-05-24 11:40:38 PM 刘朝洪(99213820)
嗯

2017-05-24 11:40:56 PM 刘朝洪(99213820)
就要这样，遇到这样的问题，就放一放

2017-05-24 11:41:23 PM 潘雄(1357211280)
[表情]

2017-05-24 11:41:52 PM 刘朝洪(99213820)
你发给我的代码，我这里运行没有问题，所以我也没发找原因，也只验证了你说的那个问题

2017-05-24 11:44:19 PM 潘雄(1357211280)
嗯，辛苦刘导了。

2017-05-24 11:46:18 PM 刘朝洪(99213820)
我有个屁辛苦，比你们差多了，只是这个问题没法复现，我也不肯定是否还有其他的原因，不过先不要管了

2017-05-24 11:47:25 PM 潘雄(1357211280)
[图片]

2017-05-24 11:49:47 PM 华丽🈴联(1816023692)
@潘雄 “所以我觉得更可能的时候代码不要一致”应该是拼音输入笔误，感觉应该是“所以我觉得更可能的是代码不一致”。我同时同意“有没有这样一种可能，两个地方代码使用的分支不一样”，我觉得还是你们分支同步的时候文件不一致的问题。以为同步了，实际上没有。

2017-05-24 11:51:23 PM 华丽🈴联(1816023692)
[图片]

2017-05-24 11:53:22 PM 潘雄(1357211280)
@华丽联 这个跟分支好想没有关系，不过我会注意这个问题的！

2017-05-24 11:53:50 PM 潘雄(1357211280)
[图片]

2017-05-24 11:57:19 PM 系统消息(10000)
你撤回了一条消息

2017-05-24 11:59:34 PM 系统消息(10000)
你撤回了一条消息

2017-05-25 12:01:20 AM 华丽🈴联(1816023692)
@潘雄 每个分支每次commit之后都跟原来不一样的。分支和主干来回切换checkout，commit没有及时push，当你切换回先前支干的时候，你的文件会被复原。而你可能想当然地以为你的文件更新了。这种问题我之前碰到过。还是要多加注意。文件修改后，必须commit，commit后注意（尽量）push，才可以切换支干。

2017-05-25 12:03:47 AM 潘雄(1357211280)
[图片]

2017-05-25 12:04:43 AM 潘雄(1357211280)
，这个真是个好提醒！

2017-05-25 8:13:56 PM 潘雄(1357211280)
@吴竹 刘导[图片]像这样的语句一般是用来做什么用？

2017-05-25 8:18:56 PM 潘雄(1357211280)
我只知道这个叫什么特性萃取，好像是c++中的一种编程技术，但是具体怎么用，一直不是很清楚，也不知道具体的作用，但是我的直觉觉得这个很有用，想把这个用到现在的代码中。

2017-05-25 9:19:32 PM 华丽🈴联(1816023692)
https://zh.wikipedia.org/wiki/命名空间命名空间（英语：Namespace），也称名字空间、名称空间等，它表示着一个标识符（identifier）的可见范围。一个标识符可在多个命名空间中定义，它在不同命名空间中的含义是互不相干的。这样，在一个新的命名空间中可定义任何标识符，它们不会与任何已有的标识符发生冲突，因为已有的定义都处于其他命名空间中。

2017-05-25 9:19:58 PM 华丽🈴联(1816023692)
https://en.wikipedia.org/wiki/Namespace

2017-05-25 9:21:12 PM 华丽🈴联(1816023692)
郎导说，我们今天正常1pm开会。请先调试好话筒等。谢谢！

2017-05-25 9:49:24 PM 潘雄(1357211280)
@华丽联 [表情]不过我的意思并不是指命名空间，而是里面的内容[表情]

2017-05-25 9:53:48 PM 潘雄(1357211280)
邓导，我们已经在会议室了，您在吗@华丽联 

2017-05-25 9:54:59 PM 华丽🈴联(1816023692)
在，等我开zoom

2017-05-25 9:56:13 PM 华丽🈴联(1816023692)
https://zoom.us/j/4689930978

2017-05-25 10:25:41 PM 刘朝洪(99213820)
语句

2017-05-25 10:25:41 PM 刘朝洪(99213820)
@潘雄 你问的是里面哪条鱼具

2017-05-25 10:26:28 PM 刘朝洪(99213820)
你的图片定义了一个特例化的结构定义

2017-05-25 10:27:36 PM 刘朝洪(99213820)
typedef 从一个已知类型定义新的类型别名

2017-05-25 10:29:25 PM 刘朝洪(99213820)
template<> 模板特殊化，如果定义一个普通的模板，则<>里面有类型参数的符号如class T或者typename T

2017-05-25 10:30:51 PM 刘朝洪(99213820)
namespace表示随后的各种定义位于命名空间

2017-05-30 6:46:02 PM 郎量(47445613)
@潘雄 @朱杏子 @梅子，下午3:30分开会

2017-05-30 6:46:24 PM 朱杏子(1398550113)
[表情]

2017-05-30 6:47:09 PM 潘雄(1357211280)
下午有四节课

2017-05-30 6:47:11 PM 梅子(1126859953)
好的

2017-05-30 6:47:39 PM 潘雄(1357211280)
@郎量 

2017-05-30 6:51:04 PM 潘雄(1357211280)
@郎量 郎老师，我们上午10点半开会吧！

2017-05-30 6:52:25 PM 郎量(47445613)
如果同学们都在，可以。

2017-05-30 6:53:30 PM 潘雄(1357211280)
问过她们了[表情]，没问题，那我们就10：30开会

2017-05-31 5:46:17 PM 郎量(47445613)
@潘雄 @朱杏子 @梅子 ，邓博士估计中午12点半左右来学校请大家聚餐，我会在百景园定个位置，到时候通知一下大家。

2017-05-31 6:09:12 PM 潘雄(1357211280)
好的 [表情]

2017-05-31 6:09:37 PM 朱杏子(1398550113)
[表情]

2017-05-31 6:16:20 PM 梅子(1126859953)
好的

2017-05-31 7:10:53 PM 刘朝洪(99213820)
@郎量 你应该昨天通知的，这样就可以提前一天不吃，今天狂宰他一顿

2017-05-31 7:11:29 PM 郎量(47445613)
@梅子 @朱杏子 @潘雄 百景园三楼的北湖厅，我和邓博士预计12点半到。请大家12:20之前到

2017-05-31 7:12:05 PM 郎量(47445613)
@吴竹 ，昨天已经通知，女同学居多，估计够呛。

2017-05-31 7:13:55 PM 刘朝洪(99213820)
@郎量 那你跟潘雄多吃些，吃的他裤子都不剩

2017-05-31 7:14:44 PM 郎量(47445613)
@潘雄 ，若提前到，你可以考虑先点菜。

2017-05-31 7:15:09 PM 郎量(47445613)
@吴竹 ，我现在胖了，也够呛。下次把你叫上。

2017-05-31 7:15:29 PM 潘雄(1357211280)
好的，郎导，邓导，你们要吃什么菜？

2017-05-31 7:16:01 PM 潘雄(1357211280)
@吴竹 再吃，我就是小胖子了

2017-05-31 7:16:09 PM 郎量(47445613)
这个按你们的口味先点。我们都无所谓

2017-05-31 7:17:18 PM 潘雄(1357211280)
好的，那我就按贵的点啦[表情]

2017-05-31 7:17:35 PM 郎量(47445613)
可以，如果需要，我们再加菜。我担心我们12:30到不了。

2017-05-31 7:19:10 PM 梅子(1126859953)
我早饭特意没吃，不要紧我们可以等[表情]

2017-05-31 7:19:39 PM 刘朝洪(99213820)
来100只熊掌，如果没有熊掌，那就来100只猪蹄

2017-05-31 9:16:41 PM 潘雄(1357211280)
郎老师，您们大概要多久来，我们刚刚点了菜

2017-06-03 7:57:48 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 19:36:00
"Group方案.docx" 下载

2017-06-03 8:42:41 PM 华丽🈴联(1816023692)
@吴竹 辛苦了。解决方案很好。没有做不到的，只有想不到的。[表情]@梅子 请按刘导的方案进行。必要时可问刘导要代码样本。谢谢！

2017-06-04 12:36:51 AM 梅子(1126859953)
好的，邓博士，已收到@华丽联 

2017-06-04 10:08:13 PM 华丽🈴联(1816023692)
很高兴在武汉见到大家，希望有机会今后多见！[表情]

2017-06-04 10:36:14 PM 刘朝洪(99213820)
邓，你后面的事老狼？

2017-06-04 10:37:01 PM 华丽🈴联(1816023692)
是的，老郎都不认识了，[表情]

2017-06-04 10:38:13 PM 刘朝洪(99213820)
一点印象都没有了，乍一看，连你都变化太大了

2017-06-04 10:38:36 PM 刘朝洪(99213820)
你也胖了啊

2017-06-04 10:38:53 PM 华丽🈴联(1816023692)
那就更加要敲了[表情][表情][表情][表情]

2017-06-04 10:39:38 PM 刘朝洪(99213820)
[表情]

2017-06-04 10:40:01 PM 刘朝洪(99213820)
老狼倒是显得很年轻的

2017-06-04 10:40:49 PM 华丽🈴联(1816023692)
也就是我显老咯[表情]

2017-06-04 10:41:27 PM 刘朝洪(99213820)
你还真显老了，我记得你以前的照片都是很年轻的

2017-06-04 10:41:58 PM 刘朝洪(99213820)
怎么这次这么显老，美帝国主义对你的剥削太狠了

2017-06-04 10:44:54 PM 华丽🈴联(1816023692)
[表情]本来我还以为有成熟的感觉哦。学生们太年轻了，更加反衬的。

2017-06-04 10:47:02 PM 刘朝洪(99213820)
老了，长江后浪推前浪，一代新人换旧人

2017-06-04 10:49:07 PM 华丽🈴联(1816023692)
争取老将出马、老当益壮啊[表情] 

2017-06-04 10:51:11 PM 刘朝洪(99213820)
[表情]

2017-06-06 6:05:29 PM 郎量(47445613)
@潘雄 ，大家在吗？

2017-06-06 6:10:27 PM 潘雄(1357211280)
都在，但是梅子刚刚好像有点事

2017-06-06 6:13:48 PM 郎量(47445613)
好。等一下到办公室来一下，会议室有人占用。

2017-06-06 6:16:07 PM 郎量(47445613)
@朱杏子 到这个网站搜一下 Icon图标设计。http://www.zbj.com/?pmcode=19310698&utm_source=bdpz&utm_medium=SEM

2017-06-06 6:16:22 PM 朱杏子(1398550113)
好

2017-06-06 6:27:22 PM 郎量(47445613)
@朱杏子 ，电脑我这周开始招标了。

2017-06-06 6:30:19 PM 朱杏子(1398550113)
恩，好的

2017-06-06 6:30:29 PM 郎量(47445613)
@吴竹 ， 关于group和ungroup你添加的那部分的代码，若没有传给梅子，可以传给梅子或者上传到群文件夹。

2017-06-06 8:30:41 PM 华丽🈴联(1816023692)
@郎量 [表情] 需要资金的话通知一声，我即转过来。

2017-06-06 8:39:42 PM 系统消息(10000)
[图片] 刘朝洪 分享文件 11:39:41
"src.rar" 下载

2017-06-06 8:40:36 PM 刘朝洪(99213820)
代码我是直接把梅子的代码添加到klayout里面

2017-06-06 8:40:51 PM 刘朝洪(99213820)
主要在headdata

2017-06-06 8:41:12 PM 刘朝洪(99213820)
headdata()和data()函数里面

2017-06-06 8:43:06 PM 刘朝洪(99213820)
flags()函数也添加了

2017-06-06 8:43:32 PM 刘朝洪(99213820)
根据梅子以前写的代码添加修改的

2017-06-06 10:23:07 PM 梅子(1126859953)
@吴竹 好的，谢谢刘博士

2017-06-07 12:50:24 PM 华丽🈴联(1816023692)
http://url.cn/4A9TQpT

2017-06-08 9:55:30 PM 潘雄(1357211280)
邓导，我们到实验室了，您在吗？

2017-06-08 9:55:43 PM 潘雄(1357211280)
@华丽联 

2017-06-08 9:57:53 PM 华丽🈴联(1816023692)
在，请连接 https://zoom.us/j/4689930978 

2017-06-08 10:00:20 PM 朱杏子(1398550113)
好的

2017-06-09 5:58:48 PM 华丽🈴联(1816023692)
代码新的版本有上传么？

2017-06-10 3:22:06 PM 系统消息(10000)
郎量撤回了一条消息

2017-06-10 3:22:28 PM 郎量(47445613)
这个星期没有代码，估计没有上传

2017-06-11 11:02:40 PM 华丽🈴联(1816023692)
@梅子 希望实习一切顺利！ 希望实习一切顺利！
@潘雄 希望考试捷报频传！
@朱杏子 梅子交接的工作基本结构可否写个简单文档？听说你已经对代码做了完整注释[表情] 因为潘熊还在考试，你可否试着上传最新版本至smartgit上你的个人分支，并发送合并申请？刚好你也来做一下先锋，练手一下。
谢谢了[表情]。

2017-06-12 1:10:23 AM 郎量(47445613)
@华丽联 ，任务已经安排。

2017-06-12 1:15:39 AM 潘雄(1357211280)
这一周我先完成画matrix的界面设计

2017-06-12 1:28:43 AM 郎量(47445613)
good

2017-06-12 2:09:28 AM 朱杏子(1398550113)
邓导@华丽联 ，我把代码上传上去了，你有时间合并一下。

2017-06-12 2:12:35 AM 朱杏子(1398550113)
我这周先完成剩余代码的英文注释，然后再用xmind画出梅子那部分代码的框架和思考group、ungroup算法实现的思路

2017-06-12 4:11:57 AM 潘雄(1357211280)
[图片]邓导，这个图您从哪里截取的？@华丽联 

2017-06-12 7:14:05 AM 华丽🈴联(1816023692)
@郎量 @朱杏子 @潘雄 好的

2017-06-12 7:16:05 AM 潘雄(1357211280)
[图片]

2017-06-12 7:16:26 AM 华丽🈴联(1816023692)
@潘雄 这个图是在L-Edit下，选中任何一个多边形，快捷键ctrl+E，显示的坐标组。

2017-06-12 7:18:48 AM 潘雄(1357211280)
好的

2017-06-12 7:18:50 AM 华丽🈴联(1816023692)
你可以用文本文档生成任何一个2维矩阵数组，可怎么样读取和显示。

2017-06-12 7:20:42 AM 潘雄(1357211280)
我先把界面完成，后面几个wires等的界面语言编写吗？

2017-06-12 7:21:28 AM 潘雄(1357211280)
我已经编写好了polygons的界面了

2017-06-12 7:24:13 AM 潘雄(1357211280)
这个显示应该是一个表格试图，如果做的快的话，我看这个星期能不能在上面显示数据

2017-06-12 7:48:45 AM 华丽🈴联(1816023692)
可以同时将其它几个界面同时做了。根据所画的图形性质，对应弹出。polygon的坐标显示，最好像Excel的表格状态，而不是上面的LEdit的单格组合形式。

2017-06-12 3:44:06 PM 梅子(1126859953)
@华丽联 谢谢，@朱杏子 杏子，你如果有哪些地方不懂的可以给我发扣扣，白天公司内网不能上扣扣，晚上回来可以帮你看看

2017-06-12 6:29:12 PM 朱杏子(1398550113)
好的

2017-06-12 10:55:09 PM 华丽🈴联(1816023692)
@朱杏子 谢谢[表情]，你的分支已经合并了。我和刘导会一起看看。此外，每次合并申请时，可否像潘雄之前所做的，简单列出有修改的文件名字列表，加入简单说明记录？（应该可以用FreeFileSync来找出修改的文件名）。@吴竹 你之前的分支，没有送合并申请，所以我也不知道是否可以合并，合并至何处。是否可以在目前master最新版本上加入你的修改，然后发送合并申请？此外，你的个人分支lch是否可以命名为dev_lch之类格式。每个人分支前面加dev_@朱杏子 刘导上次想修改合并的代码是希望注释如下，请考虑修改（应该可以用文本编辑工具自动全部修改）：Visual studio 中文注释/*...*/形式中以 */结尾的那一行是单数，编译时很可能出现 error C1071:(在注释中遇到意外的文件结束)错误……。因此最好/*...*/注释把/*和*/另起一行

2017-06-12 11:12:47 PM 朱杏子(1398550113)
好的，你说的这些问题我下次注意一下

2017-06-12 11:26:28 PM 华丽🈴联(1816023692)
[表情]初次操作即成功，总体还是不错的[表情]

2017-06-13 7:02:40 PM 潘雄(1357211280)
郎导，我们啥时候开会

2017-06-13 7:02:48 PM 潘雄(1357211280)
@郎量 

2017-06-15 9:56:22 PM 朱杏子(1398550113)
邓导，我们已经到实验室了

2017-06-15 9:56:50 PM 朱杏子(1398550113)
@华丽联 

2017-06-15 9:57:12 PM 华丽🈴联(1816023692)
https://zoom.us/j/4689930978

2017-06-15 9:58:25 PM 华丽🈴联(1816023692)
可以记住这个会议链接，每次都相同的。

2017-06-15 9:58:42 PM 朱杏子(1398550113)
好的

2017-06-16 12:51:10 AM 潘雄(1357211280)
@华丽联 邓导，这一周的代码已经上传，复查也已经通过。您注意接收[表情]。

2017-06-16 4:48:10 AM 华丽🈴联(1816023692)
好的，我们周末会给出更多意见。请继续之前的工作。周末愉快！[表情]

2017-06-17 9:00:14 PM 华丽🈴联(1816023692)
【6/18/2017 一周任务更新】1.	潘雄：GDSII读写正确，显示构层。（之前的“GDSII文件读取死循环调试201704.docx”，还有之前的QQ记录关于GDSII文件读写问题）。2.	杏子：朝洪测试命令行的实现（需要每两天更新个人分支，不需要合并申请）。Group/Ungroup功能实现。3.	邓：最小程序框架文档。4.	朝洪：命令行的实现文档。现有程序结构检查。（UI ，”视图、 数据结构与存储”接口/分层，怎么扩展（规范）。）

2017-06-17 9:03:28 PM 华丽🈴联(1816023692)
所有程序开发过程中的文档在 \optixera\optimask\dev，如果你有新文档（或更新），请上传或同步。谢谢！

